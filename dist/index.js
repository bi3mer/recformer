class h{x;y;constructor(s,f){this.x=s,this.y=f}}function x(s){return new h(s.x,s.y)}function bs(s,f){return s.x==f.x&&s.y==f.y}function q(s,f){return new h(s.x+f.x,s.y+f.y)}function Re(s,f){s.x+=f.x,s.y+=f.y}function B(s,f){return new h(s.x-f.x,s.y-f.y)}function xe(s,f){s.x+=f,s.y+=f}function $(s,f){return new h(s.x*f,s.y*f)}function ps(s,f){s.x*=f,s.y*=f}function ds(s){return s.x*s.x+s.y*s.y}function Ms(s){return Math.sqrt(s.x*s.x+s.y*s.y)}function xs(s){let f=Ms(s);s.x/=f,s.y/=f}function _(s,f){let l=s.x-f.x,a=s.y-f.y;return l*l+a*a}function Oe(s,f){return Math.atan2(f.y-s.y,f.x-s.x)}function ys(s,f){return Math.floor(Math.random()*(f-s+1)+s)}function ve(s){return s*2-1}function me(){return Math.random()<0.5}function ye(s,f,l){return Math.min(Math.max(s,f),l)}function ge(s,f,l,a){return ds(B(l,new h(ye(l.x,s.x,s.x+f.x),ye(l.y,s.y,s.y+f.y))))<a*a}function vs(s,f,l,a){let{x:t,y:r}=s,u=t+f.x,n=r+f.y,i=l.x,p=l.y,Z=i+a.x,C=p+a.y;return t<Z&&u>i&&r<C&&n>p}function Ke(s){let f=Object.keys(s);return f[Math.floor(Math.random()*f.length)]}var Ae=typeof window!=="undefined",z=[];function ms(s){if(Ae){z.push(new Audio("audio/coin_1.wav")),z.push(new Audio("audio/coin_2.wav")),z.push(new Audio("audio/coin_3.wav")),z.push(new Audio("audio/coin_4.wav")),z.push(new Audio("audio/coin_5.wav")),z.push(new Audio("audio/laser.wav"));let f=()=>{let l=!0;for(let a=0;a<z.length;++a)if(!z[a].readyState){l=!1;break}if(l)z[5].volume=0.4,s();else setTimeout(f,100)};f()}else s()}function gs(){if(Ae){let s=ys(0,4);z[s].currentTime=0.15,z[s].play()}}function $s(){if(Ae)z[5].currentTime=0,z[5].play()}var A;((o)=>{o[o.LEFT=0]="LEFT";o[o.RIGHT=1]="RIGHT";o[o.DOWN=2]="DOWN";o[o.UP=3]="UP";o[o.A=4]="A";o[o.D=5]="D";o[o.E=6]="E";o[o.G=7]="G";o[o.H=8]="H";o[o.I=9]="I";o[o.Q=10]="Q";o[o.R=11]="R";o[o.S=12]="S";o[o.W=13]="W";o[o.SPACE=14]="SPACE";o[o.ESCAPE=15]="ESCAPE";o[o.ENTER=16]="ENTER";o[o.SHIFT=17]="SHIFT";o[o.INVALID=18]="INVALID"})(A||={});class d{static _keys=[];static init(){for(let s=0;s<Object.keys(A).length;++s)d._keys.push(!1);window.addEventListener("keydown",d.onKeyDown),window.addEventListener("keyup",d.onKeyUp)}static isKeyDown(...s){let f=s.length;for(let l=0;l<f;++l)if(d._keys[s[l]])return!0;return!1}static keyStrToKey(s){switch(s){case"Down":case"ArrowDown":return 2;case"Up":case"ArrowUp":return 3;case"Right":case"ArrowRight":return 1;case"Left":case"ArrowLeft":return 0;case" ":case"Space":return 14;case"Escape":return 15;case"a":case"A":return 4;case"e":case"E":return 6;case"s":case"S":return 12;case"d":case"D":return 5;case"w":case"W":return 13;case"r":case"R":return 11;case"q":case"Q":return 10;case"g":case"G":return 7;case"h":case"H":return 8;case"i":case"I":return 9;case"Shift":return 17;case"Enter":return 16;default:return console.warn(`Unhandled key: ${s}.`),18}}static onKeyDown(s){let f=d.keyStrToKey(s.key);if(d._keys[f]=!0,f==2||f==3||f==0||f==1)s.preventDefault();return!1}static onKeyUp(s){return d._keys[d.keyStrToKey(s.key)]=!1,!1}static clear(){for(let s=0;s<d._keys.length;++s)d._keys[s]=!1}}class Ge{scenes={};registerScene(s,f){if(this.scenes[s]===void 0)this.scenes[s]=f;else console.error(`Key "${s}" for scene already exists! Scene not added to SceneManager.`)}getScene(s){return this.scenes[s]}}var g="#fe546f";var F="#ffd080",G="#fffdff",zs="#0bffe6";var qs="#9696ff";var Q=720,J=480,v=32,P=15,Fs=P+2,Qs=3,Js=2*Math.PI,H=0,$e=1,ze=2,He=20,Se=30,Is=He/v,Ls=Se/v,Vs=new h(Is,Ls),j=31,E=31,O=j/v,cs=E/v,S=new h(O,cs),M=16,I=16,Ds=M/v,Ts=I/v,qe=new h(Ds,Ts),ee=25,se=15,Xs=ee/v,ks=se/v,Us=new h(Xs,ks),Zs=new h(ks,Xs),Me=10,Bs=Me/v,Ie=2.5,Le=O/8,Ps=j/8,Fe=0.6,js=2,Ws=2.5,Ys=150,Cs=10,Ns=10,Rs=10,Qe=M/v,_s=I/v,Os=new h(Qe,_s),X="start",fe="end",b="death";class k{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class ce extends k{ctx;constructor(s){super();this.ctx=s}onEnter(){this.ctx.clearRect(0,0,Q,J),this.ctx.font="30px Arial",this.ctx.fillStyle=G,this.ctx.fillText("You won! Congratulations!",170,J/2)}update(s){}render(){}_onExit(){}}var le="main menu",N="game",Je="player won",U="transition",Ve="lost",ae="won";class De extends k{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){d.clear(),this.ctx.fillStyle=F,this.ctx.font="48px Arial",this.ctx.fillText("YOU WON",250,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to keep going.",180,400)}update(s){if(d.isKeyDown(14))this.transitionScene.targetScene=N,this.changeScene=U}render(){}_onExit(){}}class Te extends k{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){d.clear(),this.ctx.fillStyle=g,this.ctx.font="48px Arial",this.ctx.fillText("YOU LOST",243,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to try again.",195,400)}update(s){if(d.isKeyDown(14))this.transitionScene.targetScene=N,this.changeScene=U}render(){}_onExit(){}}class _e{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class Ee extends _e{targetScene=le;timer=0;ctx;constructor(s){super();this.ctx=s}onEnter(){}update(s){if(this.timer+=s,this.timer>0.5)this.changeScene=this.targetScene}render(){let s=this.timer/0.5;this.ctx.fillStyle=`rgba(0,0,0, ${s})`,this.ctx.fillRect(0,0,Q,J)}_onExit(){this.timer=0}}class K{movingRight=!1;movingLeft=!1;jumping=!1;set(s){this.movingRight=s.moveRight,this.movingLeft=s.moveLeft,this.jumping=s.jump}}class es extends K{time=0;name(){return"random"}update(s){if(this.time+=s,this.time>0.2)this.time=0,this.movingRight=me(),this.movingLeft=me(),this.jumping=me()}}class Xe extends K{name(){return"player"}update(s){this.movingRight=d.isKeyDown(5,1),this.movingLeft=d.isKeyDown(4,0),this.jumping=d.isKeyDown(14,3)}}class ss extends K{name(){return"empty"}update(s){}}var ef=0,fs=1,te=2;function Ks(s,f){switch(s){case ef:return new es;case fs:return new Xe;case te:return new ss;default:return console.error(`Unhandled agent type: ${s}. Defaulted to player agent.`),new Xe}}class ls{src;tgt;probability;constructor(s,f,l){this.src=s,this.tgt=f,this.probability=l}}class re{name;reward;utility;isTerminal;neighbors;constructor(s,f,l,a,t){this.name=s,this.reward=f,this.utility=l,this.isTerminal=a,this.neighbors=t}}class ke{nodes;edges;constructor(){this.nodes={},this.edges={}}getNode(s){return this.nodes[s]}hasNode(s){return s in this.nodes}addNode(s){this.nodes[s.name]=s}addDefaultNode(s,f=1,l=0,a=!1,t=null){if(t==null)t=[];this.nodes[s]=new re(s,f,l,a,t)}removeNode(s){let f=[];for(let l of Object.values(this.edges)){if(l.src==s||l.tgt==s)f.push(l);let a=l.probability,t=-1;for(let i=0;i<a.length;i++){let[p,Z]=a[i];if(p==s){t=i;break}}if(t==-1)continue;let r=a[t][1];a.splice(t,1);let u=a.length,n=r/u;l.probability=a.map(([i,p])=>[i,p+n])}for(let l of f)this.removeEdge(l.src,l.tgt);delete this.nodes[s]}getEdge(s,f){return this.edges[`${s},${f}`]}hasEdge(s,f){return`${s},${f}`in this.edges}addEdge(s){this.edges[`${s.src},${s.tgt}`]=s;let f=this.nodes[s.src].neighbors;if(!f.includes(s.tgt))f.push(s.tgt)}addDefaultEdge(s,f,l=null){if(l==null)l=[[f,1]];this.addEdge(new ls(s,f,l))}removeEdge(s,f){let l=this.nodes[s],a=l.neighbors.indexOf(f);l.neighbors.splice(a,1),delete this.edges[`${s},${f}`]}neighbors(s){return this.nodes[s].neighbors}setNodeUtilities(s){for(let[f,l]of Object.entries(s))this.nodes[f].utility=l}utility(s){return this.nodes[s].utility}reward(s){return this.nodes[s].reward}isTerminal(s){return this.nodes[s].isTerminal}mapNodes(s){for(let f of Object.values(this.nodes))s(f)}mapEdges(s){for(let f of Object.values(this.edges))s(f)}}function R(s){return s[Math.floor(Math.random()*s.length)]}function L(s,f,l,a){let t=s.getEdge(f,l).probability,r=t.length,u=0;for(let n=0;n<r;++n){let[i,p]=t[n];u+=p*(s.reward(i)+a*s.utility(i))}return u}function Ue(s,f,l){let a=s.getNode(f);if(a.isTerminal)return 0;let t=a.neighbors,r=t.length,u=-1/0;for(let n=0;n<r;++n)u=Math.max(u,L(s,f,t[n],l));return u}function as(s){for(let f in s.nodes)s.nodes[f].utility=0}function ts(s){let f={};for(let l in s.nodes)if(!s.getNode(l).isTerminal)f[l]=[...s.neighbors(l)];return f}function rs(s,f){let l={};for(let a in s.nodes){if(s.getNode(a).isTerminal)continue;let t=-1/0,r=[];for(let u of s.neighbors(a)){let n=L(s,a,u,f);if(n===t)r.push(u);else if(n>t)t=n,r.length=0,r.push(u)}l[a]=r}return l}function sf(s,f,l,a){for(let t=0;t<a;++t)for(let r in s.nodes){let u=s.getNode(r);if(!u.isTerminal)u.utility=L(s,r,R(f[r]),l)}}function ff(s,f,l,a){for(let t=0;t<a;++t){let r={};for(let u in s.nodes)if(!s.getNode(u).isTerminal)r[u]=L(s,u,R(f[u]),l);s.setNodeUtilities(r)}}function lf(s,f,l,a){for(let t=0;t<a;++t)for(let r in s.nodes)s.getNode(r).utility=Ue(s,r,l)}function af(s,f,l,a){for(let t=0;t<a;++t){let r={};for(let u in s.nodes)r[u]=Ue(s,u,l);s.setNodeUtilities(r)}}function As(s,f,l){let a=!1;for(let t in s.nodes){if(s.getNode(t).isTerminal)continue;let r=null,u=-1/0;for(let n of s.neighbors(t)){let i=L(s,t,n,l);if(i===u);else if(i>u)r=n,u=i}if(R(f[t])!==r)f[t].length=0,f[t].push(r),a=!0}return a}function us(s,f,l=!1,a=!1,t=10,r=!0){if(r)as(s);let u=ts(s),n;if(l&&a)n=sf;else if(l&&!a)n=ff;else if(!l&&a)n=lf;else n=af;let i=!0;while(i)n(s,u,f,t),i=As(s,u,f);return n(s,u,f,t),As(s,u,f),rs(s,f)}class m extends re{visitedCount;sumPercentCompleted;depth;designerReward;playerReward;constructor(s,f,l,a,t,r){super(s,f,l,a,t);this.designerReward=f,this.playerReward=0,this.depth=r,this.visitedCount=1,this.sumPercentCompleted=1}updateReward(){this.reward=this.designerReward*this.visitedCount}}var w=new ke;w.addNode(new m(X,0,0,!1,[],-1));w.addNode(new m(b,-1,0,!0,[],-1));w.addNode(new m(fe,1,0,!0,[],-1));w.addNode(new m("1-a",-0.95,0,!1,[],1));w.addNode(new m("2-a",-0.925,0,!1,[],2));w.addNode(new m("2-b",-0.925,0,!1,[],2));w.addNode(new m("3-a",-0.9,0,!1,[],3));w.addNode(new m("3-b",-0.9,0,!1,[],3));w.addNode(new m("4-a",-0.825,0,!1,[],4));w.addNode(new m("4-b",-0.825,0,!1,[],4));w.addNode(new m("5-a",-0.8,0,!1,[],5));w.addNode(new m("5-b",-0.8,0,!1,[],5));w.addNode(new m("5-c",-0.8,0,!1,[],5));w.addNode(new m("6-a",-0.775,0,!1,[],6));w.addNode(new m("7-a",-0.75,0,!1,[],7));w.addNode(new m("6-b",-0.775,0,!1,[],6));w.addNode(new m("1-b",-0.95,0,!1,[],1));w.addDefaultEdge(X,"1-a",[["1-a",0.99],[b,0.01]]);w.addDefaultEdge("1-a","2-b",[["2-b",0.99],[b,0.01]]);w.addDefaultEdge("1-a","2-a",[["2-a",0.99],[b,0.01]]);w.addDefaultEdge("2-a","3-a",[["3-a",0.99],[b,0.01]]);w.addDefaultEdge("2-b","3-b",[["3-b",0.99],[b,0.01]]);w.addDefaultEdge("3-a","4-b",[["4-b",0.99],[b,0.01]]);w.addDefaultEdge("3-a","4-a",[["4-a",0.99],[b,0.01]]);w.addDefaultEdge("3-b","4-b",[["4-b",0.99],[b,0.01]]);w.addDefaultEdge("3-b","4-a",[["4-a",0.99],[b,0.01]]);w.addDefaultEdge("4-a","5-b",[["5-b",0.99],[b,0.01]]);w.addDefaultEdge("4-a","5-a",[["5-a",0.99],[b,0.01]]);w.addDefaultEdge("4-a","5-c",[["5-c",0.99],[b,0.01]]);w.addDefaultEdge("4-b","5-b",[["5-b",0.99],[b,0.01]]);w.addDefaultEdge("4-b","5-a",[["5-a",0.99],[b,0.01]]);w.addDefaultEdge("4-b","5-c",[["5-c",0.99],[b,0.01]]);w.addDefaultEdge("5-a","6-a",[["6-a",0.99],[b,0.01]]);w.addDefaultEdge("5-a","6-b",[["6-b",0.99],[b,0.01]]);w.addDefaultEdge("5-b","6-a",[["6-a",0.99],[b,0.01]]);w.addDefaultEdge("5-b","6-b",[["6-b",0.99],[b,0.01]]);w.addDefaultEdge("5-c","6-a",[["6-a",0.99],[b,0.01]]);w.addDefaultEdge("5-c","6-b",[["6-b",0.99],[b,0.01]]);w.addDefaultEdge("6-a","7-a",[["7-a",0.99],[b,0.01]]);w.addDefaultEdge("7-a","end",[["end",0.99],[b,0.01]]);w.addDefaultEdge("6-b","7-a",[["7-a",0.99],[b,0.01]]);w.addDefaultEdge(X,"1-b",[["1-b",0.99],[b,0.01]]);w.addDefaultEdge("1-b","2-b",[["2-b",0.99],[b,0.01]]);w.addDefaultEdge("1-b","2-a",[["2-a",0.99],[b,0.01]]);var Ze={"1-a":["------------XXX-","-------------T--","----------------","----------------","----------------","----------------","----------------","----------------","-----X-C-----X--","--------------b-","-----------o----","--------o-XX----","------o-XXXX----","------XXXXXX----","XXXXXXXXXXXX^XXX"],"2-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-------XXXXXXXX-------","----------------------","-------V--o---V-----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"2-b":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-----------o----------","--------------------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"3-a":["----------------------","----------------------","----------------------","----------------------","-----------o----------","----------------------","---------XXXXX--------","-----------o----------","----------------------","-------X-H-----X------","---XX--XXXXXXXXX--XX--","----------------------","-------V---o---V----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"3-b":["----------------------","----------------------","----------------------","----------------------","----------o-----------","----------------------","--------XXXXX---------","--------V---V---------","----------o-----------","----------------------","------XXXXXXXXX-------","----------------------","----------o---------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"4-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------XXX---","-----------------V----","-------X---XX-----V---","------XX------o-V---o-","-----XXX--------------","XXXXXXXX---XXXXXXXXXXX"],"4-b":["--------------------XX","--------------------XX","--------------------XX","--------------------XX","--------------------XX","-----------X-H---o--XX","-----------------o--XX","---------o----------XX","-----------XXXXXXX--XX","--------------------XX","-------X------------XX","------XXX-----------XX","-----XXXXX-----------o","----XXXXXXX-----------","XXXXXXXXXXXXXXXX--XXXX"],"5-a":["--------XXXXXXXXXXXXXX--------","-------------------ooX--------","---------------------X--------","---------------------X--------","------------------XXXX--------","------------------X-----------","-----------o--XXXXX-----------","------------------------------","---------XX-----------------o-","------------------------------","--------------XX---XXX----XXXX","------------------------------","----------XX------------------","------------------------------","XXXXXXXX----------------------"],"5-b":["------------------------------","-o----------------------------","------------------------------","XXX---------------------------","------------------------------","-----XXX----------------------","------------------------------","-----------XXX----------------","-o--------------------------o-","------XXX---------------------","XXX-----------------------XXXX","------------XXX-------XX------","------------------XX----------","------------------------------","XXXXXXXX---XXXXX--------------"],"5-c":["o-----------------------------","------------------------------","X---XX------------------------","------------------------------","------------------------------","XX----------------------------","--------XXXXX-----------------","--------Xoo-------------------","XXX-----Xoo----o------------o-","--------X---------------------","--------XXX---XX----XX----XXXX","XXXX--------------------------","------------------------------","------------------------------","XXXXXXXX----------------------"],"6-a":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","-------oo---XXXXXXXX----------","-o----------XXXXXXXX----------","------XXXX--XXXXXXXX----------","--------------o---------------","XXXX--------------------------","-------------XXXX-----------o-","---------------------XX-------","XXXXXXXX-----------------XXXXX"],"7-a":["-------------------V---------------","-----------------o---o-------------","------------X-H------------H--XXX--","-----V------XXXXXXXXXXXXXXXXXXXXX--","--------XX----o--------------------","-----------------------------------","-----------XXXXXX---Ho-------------","-----------------------------------","-------------V------XX--------H----","-----------------------------------","XX--------o------XXXXX----H--------","-----------------------------------","---X----H----H-X-----------------o-","---XXXXXXXXXXXXX-------------------","XXXX--------------------------XXXXX"],end:["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----oooooooooooooooooo","XXXXXXXXXXXXXXXXXXXXXX"],"6-b":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX---o------","----------XXXXXXXXXX----------","-o--------XXXXXXXXXX----------","----------XXXXXXXXXX---X------","----------XXXXXXXXXX----------","XXX-------XXXXXXXXXXX---------","------XX-----oooo-----------o-","------------------------------","XXXX--------XXXXXX---XXX--XXXX"],"1-b":["---------XXX----","----------T-----","----------------","----------------","----------------","----------------","----------------","----X-----X-----","-------oo------C","----------------","-------XX-------","----o-XXXX-o----","-----XXXXXX-----","---XXXXXXXXXX---","XXXXXXXXXXXXXXXX"]};class e{moveRight;moveLeft;jump;constructor(s,f,l){this.moveRight=s,this.moveLeft=f,this.jump=l}}var Gs=[new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0)],tf=Gs.length;var Be=3,Hs=0.01666*Be;class ue{startCol=0;offsetX=0;colsPerScreen=Math.ceil(Q/v);update(s){let f=s-this.colsPerScreen/2;this.startCol=Math.max(0,Math.floor(f)),this.offsetX=-f*v+this.startCol*v}columnToScreen(s){return(s-this.startCol)*v+this.offsetX}rowToScreen(s){return s*v}}class ne{game;pos;type;dead=!1;velocity=new h(0,0);gravity=new h(0,100);constructor(s,f){this.pos=s,this.type=f}physicsUpdate(s){Re(this.velocity,$(this.gravity,s)),this.velocity.y=Math.min(this.velocity.y,30),Re(this.pos,$(this.velocity,s))}}class y extends ne{size;constructor(s,f,l){super(s,l);this.size=f}collision(s){if(s instanceof y){if(vs(this.pos,this.size,s.pos,s.size))this.handleCollision(s),s.handleCollision(this)}else if(s instanceof we){if(ge(this.pos,this.size,s.pos,s.r))this.handleCollision(s),s.handleCollision(this)}}}class we extends ne{r;constructor(s,f,l){super(s,l);this.r=f}collision(s){if(s instanceof y){if(ge(s.pos,s.size,this.pos,this.r))this.handleCollision(s),s.handleCollision(this)}}}var c=0,V=1,Pe=2,W=3,je=4,Y=5;class ie extends we{angle;start;constructor(s,f,l,a){super(s,Bs,W);this.gravity.y=0,this.angle=f,this.start=l,this.velocity=a}static defaultConstructor(s){return new ie(s,0,x(s),new h(0,0))}clone(){return new ie(x(this.pos),this.angle,this.start,x(this.velocity))}update(s){this.angle+=s,this.velocity.x=2*Ie*Math.cos(this.angle),this.velocity.y=Ie*Math.sin(this.angle)}handleCollision(s){this.dead=s.type===Y}render(s,f){s.fillStyle=g,s.beginPath(),s.arc(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Me,0,Js),s.fill()}}class oe extends y{constructor(s,f){super(s,Os,Y);this.gravity.y=0,this.velocity=f}static defaultConstructor(s,f){let l=B(f,s);return xs(l),ps(l,Cs),new oe(s,l)}clone(){return new oe(x(this.pos),x(this.velocity))}update(s){}handleCollision(s){this.dead=!0}render(s,f){s.fillStyle=g,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Ns,Rs)}}class We extends y{playerPos;color;time;state;constructor(s,f=0,l=0){super(s,S,V);this.color=F,this.gravity.y=0,this.time=f,this.state=l}clone(){return new We(x(this.pos),this.time,this.state)}update(s){switch(this.state){case 0:{if(_(this.pos,this.game.protaganist().pos)<=Ys)this.color=g,this.state=1;break}case 1:{if(this.time+=s,this.time>=Ws)this.time=0,this.state=2;break}case 2:{this.state=0,this.color=F;let f=this.game.protaganist().pos,l=Oe(this.pos,f),a=Math.cos(l),t=Math.sin(l);this.game.dynamicEntities.push(oe.defaultConstructor(new h(this.pos.x+(Qe+O)*a,this.pos.y+(Qe+O)*t),f));break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),a=f.rowToScreen(this.pos.y),t=j/2,r=2*t,u=new h(l+t,a);s.lineWidth=2,s.beginPath(),s.arc(u.x,u.y,t,0,Math.PI),s.stroke();let n=Oe(this.pos,this.game.protaganist().pos),i=Math.cos(n),p=Math.sin(n);s.lineWidth=4,s.beginPath(),s.moveTo(u.x+t*i,u.y+t*p),s.lineTo(u.x+r*i,u.y+r*p),s.stroke(),s.lineWidth=1}}class ns extends y{constructor(s){super(s,S,V)}clone(){throw new Error("Block.clone should not have been called!")}update(s){}handleCollision(s){}render(s,f){s.lineWidth=1.3,s.strokeStyle=G,s.strokeRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),j,E)}}var rf=1000,uf=2;class he extends y{minY;maxY;yMod;timeGone;constructor(s,f,l,a,t,r){super(s,qe,je);this.gravity.y=0,this.yMod=f,this.minY=l,this.maxY=a,this.velocity.y=t,this.timeGone=r}static defaultConstructor(s){let f=Math.random()*0.5;return xe(s,0.25),new he(s,f,s.y+0.15,s.y+0.3,f,0)}clone(){return new he(x(this.pos),this.yMod,this.minY,this.maxY,this.velocity.y,this.timeGone)}update(s){if(this.pos.y>100){if(this.timeGone+=s,this.timeGone>=uf)this.pos.y=this.maxY,this.velocity.y=-this.yMod}else if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===c)this.pos.y=rf,this.timeGone=0}render(s,f){s.fillStyle=zs,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),M,I)}}class D extends y{minY;maxY;yMod;constructor(s,f,l,a,t,r=!1){super(s,qe,Pe);this.gravity.y=0,this.yMod=f,this.maxY=l,this.minY=a,this.velocity.y=t,this.dead=r}static defaultConstructor(s){return s.x+=0.25,new D(s,0.1,s.y+0.3,s.y+0.15,0.1)}clone(){return new D(x(this.pos),this.yMod,this.maxY,this.minY,this.velocity.y,this.dead)}update(s){if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===c)gs(),this.dead=!0}render(s,f){s.fillStyle=F,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),M,I)}}class be extends y{maxColumns;constructor(s,f,l){super(s,Us,W);this.maxColumns=f,this.velocity.x=l,this.gravity.y=0}static defaultConstructor(s,f){return xe(s,0.25),new be(s,f,3)}clone(){return new be(x(this.pos),this.maxColumns,this.velocity.x)}update(s){this.velocity.x*=ve(this.pos.x>=0&&this.pos.x<=this.maxColumns)}handleCollision(s){if(s.type===V){let f=B(q(this.pos,$(this.size,0.5)),q(s.pos,$(s.size,0.5))),l=q(this.size,s.size);if($(l,0.5),Math.abs(f.x/this.size.x)>Math.abs(f.y/this.size.y))if(this.velocity.x*=-1,f.x<0)this.pos.x=s.pos.x-this.size.x;else this.pos.x=s.pos.x+s.size.x}else if(s.type===Y)this.dead=!0}render(s,f){s.fillStyle=g,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),ee,se)}}class pe extends y{time;constructor(s,f,l){super(s,f,W);this.gravity.y=0,this.time=l}static defaultConstructor(s,f){return s.x+=(O-Le)/2,new pe(s,new h(Le,f),0)}clone(){return new pe(this.pos,this.size,this.time)}update(s){$s(),this.time+=s,this.dead=this.time>=Fe}handleCollision(s){}render(s,f){s.fillStyle=g,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Ps,this.size.y*v)}}class Ye extends y{color;time=0;state=0;constructor(s,f=0,l=0){super(s,S,V);this.color=F,this.gravity.y=0,this.state=f,this.time=l}clone(){return new Ye(x(this.pos),this.state,this.time)}update(s){if(_(this.pos,this.game.protaganist().pos)>150)this.state=0;switch(this.time+=s,this.state){case 0:{if(this.time>=Fe)this.time=0,this.state=1,this.color=F;break}case 1:{if(this.time>=js){this.time=0,this.state=0,this.color=g;let f=this.game.raycastUp(this.pos),l=f===null?P:this.pos.y-f.pos.y-1;this.game.dynamicEntities.push(pe.defaultConstructor(new h(this.pos.x,this.pos.y-l),l))}break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),a=f.rowToScreen(this.pos.y),t=a+E;s.beginPath(),s.moveTo(l,t),s.lineTo(l+j/2,a),s.lineTo(l+j,t),s.lineTo(l,t),s.stroke(),s.strokeStyle=G,s.beginPath(),s.moveTo(l,a),s.lineTo(l+j,a),s.stroke()}}var Ss=6,nf=0.4;class Ce extends y{movingRight;movingLeft;moveMod;jumpTime;squash;stretch;coinsCollected;maxColumn;agent;constructor(s,f,l,a=!1,t=!1,r=0,u=0,n=1,i=1,p=0,Z=0){super(s,Vs,c);this.velocity=f,this.agent=l,this.movingRight=a,this.movingLeft=t,this.moveMod=r,this.jumpTime=u,this.squash=n,this.stretch=i,this.coinsCollected=p,this.maxColumn=Z}clone(){return new Ce(x(this.pos),x(this.velocity),this.agent,this.movingRight,this.movingLeft,this.moveMod,this.jumpTime,this.squash,this.stretch,this.coinsCollected,this.maxColumn)}update(s){if(this.pos.y>Fs){this.dead=!0;return}if(this.movingLeft=!1,this.movingRight=!1,this.velocity.x=0,this.agent.update(s),this.agent.movingRight)this.movingRight=!0,this.velocity.x=Ss,this.moveMod=4;if(this.agent.movingLeft)if(this.movingRight)this.movingRight=!1,this.velocity.x=0;else this.movingLeft=!0,this.velocity.x=-Ss,this.moveMod=4;if(this.jumpTime<nf&&this.agent.jumping){if(this.jumpTime===0)this.velocity.y=-15;else if(this.jumpTime<0.2)this.velocity.y-=2;this.velocity.y=Math.max(-20,this.velocity.y),this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s),this.jumpTime+=s}else if(this.squash!=this.stretch)this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s);this.maxColumn=Math.max(this.pos.x,this.maxColumn)}handleCollision(s){switch(s.type){case V:{let f=s,l=B(q(this.pos,$(this.size,0.5)),q(f.pos,$(f.size,0.5))),a=q(this.size,f.size);$(a,0.5);let t=Math.abs(Math.atan(l.y/l.x));if(!(t<0.96&&t>0.698)&&Math.abs(l.x/this.size.x)>Math.abs(l.y/this.size.y))if(l.x<0)this.pos.x=f.pos.x-this.size.x;else this.pos.x=f.pos.x+f.size.x;else if(l.y>0)this.pos.y=f.pos.y+f.size.y;else this.pos.y=f.pos.y-this.size.y,this.velocity.y=0,this.jumpTime=0,this.stretch=1.01,this.squash=0.99;break}case Pe:{++this.coinsCollected;break}case Y:case W:{this.dead=!0;break}case je:{this.jumpTime=0,this.velocity.y=Math.min(this.velocity.y,0);break}default:{console.warn(`Player unhandled collision type: ${s.type}.`);break}}}render(s,f){s.fillStyle=qs;let l=f.columnToScreen(this.pos.x),a=f.rowToScreen(this.pos.y),t=Se*this.squash,r=He*this.stretch;if(this.movingRight){let u=new Path2D;u.moveTo(l,a),u.lineTo(l-this.moveMod,a+t),u.lineTo(l+r-this.moveMod,a+t),u.lineTo(l+r,a),u.closePath(),s.fill(u,"evenodd")}else if(this.movingLeft){let u=new Path2D;u.moveTo(l,a),u.lineTo(l+this.moveMod,a+t),u.lineTo(l+r+this.moveMod,a+t),u.lineTo(l+r,a),u.closePath(),s.fill(u,"evenodd")}else s.fillRect(l,a,r,t)}}class de extends y{constructor(s,f){super(s,Zs,W);this.velocity.y=f,this.gravity.y=0}static defaultConstructor(s){return s.x+=0.25,s.y+=0.1,new de(s,3)}clone(){return new de(x(this.pos),this.velocity.y)}update(s){this.velocity.y*=ve(this.pos.y>0&&this.pos.y<=P)}handleCollision(s){if(s.type===V){let f=B(q(this.pos,$(this.size,0.5)),q(s.pos,$(s.size,0.5))),l=q(this.size,s.size);if($(l,0.5),Math.abs(f.x/this.size.x)<Math.abs(f.y/this.size.y))if(this.velocity.y*=-1,f.y>0)this.pos.y=s.pos.y+s.size.y;else this.pos.y=s.pos.y-this.size.y}else if(s.type===Y)this.dead=!0}render(s,f){s.fillStyle=g,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),se,ee)}}class T{staticEntities=[];dynamicEntities=[];coins=[];constructor(s,f){if(s===null)return;let l=s.length;if(l!==P){console.error("Level should have 15 rows!");return}this.dynamicEntities.push(new Ce(new h(2,12),new h(0,0),Ks(f,this)));let a=s[0].length;for(let r=0;r<l;++r){let u=s[r];if(a!==u.length){console.error(`Every row in the level should have the same number of columns! (${a} !== ${u.length}).`);return}for(let n=0;n<a;++n){let i=u[n];if(i==="X")this.staticEntities.push(new ns(new h(n,r)));else if(i==="^")this.dynamicEntities.push(new Ye(new h(n,r)));else if(i==="T")this.dynamicEntities.push(new We(new h(n,r)));else if(i==="o"){let p=D.defaultConstructor(new h(n,r));this.dynamicEntities.push(p),this.coins.push(p)}else if(i=="b")this.dynamicEntities.push(he.defaultConstructor(new h(n,r)));else if(i==="H")this.dynamicEntities.push(be.defaultConstructor(new h(n,r),a));else if(i==="V")this.dynamicEntities.push(de.defaultConstructor(new h(n,r)));else if(i==="C")this.dynamicEntities.push(ie.defaultConstructor(new h(n,r)));else if(i!=="-")console.error(`Unhandled tile type: ${u[n]}`)}}let t=0;for(;t<this.staticEntities.length;++t)this.staticEntities[t].game=this;for(let r=0;r<this.dynamicEntities.length;++r)this.dynamicEntities[r].game=this;this.coins.sort((r,u)=>{return r.pos.x-u.pos.x})}clone(){let s=new T(null,te),f=this.dynamicEntities.length,l=0;for(;l<f;++l){let a=this.dynamicEntities[l];if(a.dead)continue;let t=a.clone();if(t.game=s,s.dynamicEntities.push(t),t instanceof D)s.coins.push(t)}return s.coins.sort((a,t)=>{return a.pos.x-t.pos.x}),s.staticEntities=this.staticEntities,s}hash(){let s=this.dynamicEntities[0].pos;return Math.round(s.x*100)+Math.round(s.y*100)*1e6}update(s,f=1){s=s/f;for(let l=0;l<f;++l){let a=this.dynamicEntities.length,t=this.staticEntities.length,r,u=0;for(;u<a;++u){let n=this.dynamicEntities[u];if(n.update(s),n.dead){if(u==0)break;this.dynamicEntities.splice(u,1),--u,--a}n.physicsUpdate(s);for(r=u+1;r<a;++r)n.collision(this.dynamicEntities[r]);for(r=0;r<t;++r)n.collision(this.staticEntities[r])}}}render(s,f){f.update(this.dynamicEntities[0].pos.x);let l=this.staticEntities.length,a=0;for(;a<l;++a)this.staticEntities[a].render(s,f);l=this.dynamicEntities.length;for(a=0;a<l;++a)this.dynamicEntities[a].render(s,f)}state(){let s=this.dynamicEntities[0];if(s.coinsCollected>=this.coins.length)return ze;if(s.dead)return $e;return H}protaganist(){return this.dynamicEntities[0]}fitness(){return 1-this.dynamicEntities[0].coinsCollected/this.coins.length}raycastUp(s){let f=x(s);f.y-=1;let l=this.staticEntities.length,a;while(f.y>=0){for(a=0;a<l;++a){let t=this.staticEntities[a];if(bs(f,t.pos))return t}f.y-=1}return null}}var Ne={"1-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"2-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"2-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"3-a":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"3-b":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"4-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"4-b":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"5-b":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-c":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"6-a":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"7-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1)],end:[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"6-b":[new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"1-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)]};var wf=Hs/Be;class ws extends k{ctx;transitionScene;camera;game;actions=[];actionIndex;frame;time;previousKey="";constructor(s,f){super();this.ctx=s,this.transitionScene=f,this.camera=new ue}onEnter(){let s=Ke(Ne);while(s==this.previousKey)s=Ke(Ne);this.previousKey=s,this.actions=Ne[s],this.game=new T(Ze[s],te),this.actionIndex=0,this.frame=0,this.time=0}update(s){if(this.game.state()!==H)this.onEnter();if(d.isKeyDown(14))this.transitionScene.targetScene=N,this.changeScene=U;if(this.time+=s,this.time>=0.0166666){if(this.time=this.time-0.016666,this.frame>=Be)this.frame=0,++this.actionIndex;++this.frame,this.game.protaganist().agent.set(this.actions[this.actionIndex]),this.game.update(wf)}}render(){this.ctx.clearRect(0,0,Q,J),this.game.render(this.ctx,this.camera),this.ctx.fillStyle="black",this.ctx.fillRect(240,60,240,47),this.ctx.fillRect(210,234,295,39),this.ctx.fillStyle=F,this.ctx.font="48px Arial",this.ctx.fillText("Recformer",247,100),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to start",220,J*0.55)}_onExit(){}}class is{playerIsOnLastLevel=!1;keys;columnsPerLevel;lossesInARow=0;playerWonLastRound=!1;constructor(){}update(s,f){let l=this.keys.length,a=[];if(s){for(let r=0;r<l;++r)a.push(1);this.lossesInARow=0}else{let r=f;for(let u=0;u<l;++u)if(r>this.columnsPerLevel[u])a[u]=1,r-=this.columnsPerLevel[u];else{a[u]=r/this.columnsPerLevel[u];break}}let t=a.length;for(let r=0;r<t;++r){let u=a[r],n=this.keys[r],i=w.getNode(n);if(u===1){if(!w.hasEdge(X,n))w.addDefaultEdge(X,n,[[n,1],[b,0]])}++i.visitedCount,i.sumPercentCompleted+=u,i.updateReward();let p=i.sumPercentCompleted/i.visitedCount,Z=1-p;w.mapEdges((C)=>{if(C.tgt===n)C.probability[0][1]=p,C.probability[1][1]=Z})}if(!s){++this.lossesInARow;for(let r=0;r<this.lossesInARow;++r){let u=w.getNode(X).neighbors,n=u.length;if(n===1)break;let i="",p=-1e4;for(let Z=0;Z<n;++Z){let C=u[Z],hs=w.getNode(C).depth;if(hs>p)i=C,p=hs}console.log("removing edge:",i,p),w.removeEdge(X,i)}}this.playerWonLastRound=s}get(s){let f=us(w,0.95,!0,!0,20);if(this.columnsPerLevel=[],this.playerWonLastRound)this.keys=[R(f[X])];else this.keys=[X];for(let t=0;t<s;++t){let r=R(f[this.keys[t]]);if(this.keys.push(r),r===fe)break}this.keys.splice(0,1),this.playerIsOnLastLevel=this.keys.includes(fe);let l=Array(P).fill(""),a=this.keys.length;for(let t=0;t<a;++t){let r=Ze[this.keys[t]];this.columnsPerLevel.push(r[0].length);for(let u=0;u<P;++u)l[u]+=r[u]}return l}}class os extends k{ctx;transitionScene;agentType;game;camera;levelDirector;constructor(s,f,l){super();this.ctx=s,this.agentType=l,this.transitionScene=f,this.camera=new ue,this.levelDirector=new is}onEnter(){let s=this.levelDirector.get(Qs);this.game=new T(s,this.agentType)}update(s){this.game.update(s);let f=this.game.state();switch(f){case H:break;case $e:{this.transitionScene.targetScene=Ve,this.changeScene=U;break}case ze:{if(this.levelDirector.playerIsOnLastLevel)this.transitionScene.targetScene=Je;else this.transitionScene.targetScene=ae;this.changeScene=U;break}default:{console.error(`Unhandled game state type: ${f}`);break}}}render(){this.ctx.clearRect(0,0,Q,J),this.game.render(this.ctx,this.camera)}_onExit(){let s=this.game.fitness();console.log(`Fitness: ${s}`),this.levelDirector.update(this.transitionScene.targetScene===ae,s)}}window.addEventListener("load",()=>{ms(()=>{d.init();let s=document.createElement("canvas");s.setAttribute("id","canvas"),s.width=Q,s.height=J;let f=s.getContext("2d");document.getElementById("game").appendChild(s);let l=new Ge,a=new Ee(f);l.registerScene(U,a),l.registerScene(le,new ws(f,a)),l.registerScene(N,new os(f,a,fs)),l.registerScene(Je,new ce(f)),l.registerScene(ae,new De(f,a)),l.registerScene(Ve,new Te(f,a));let t=l.getScene(le);t.onEnter();let r=0,u=(n)=>{let i=Math.min(0.05,(n-r)/1000);r=n,t.update(ye(i,0.01,0.2)),t.render();let p=t.changeScene;if(p!==void 0)t.onExit(),t=l.getScene(p),t.onEnter();window.requestAnimationFrame(u)};window.requestAnimationFrame(u)})});
