class o{x;y;constructor(s,f){this.x=s,this.y=f}}function y(s){return new o(s.x,s.y)}function g(s,f){return new o(s.x+f.x,s.y+f.y)}function Ke(s,f){s.x+=f.x,s.y+=f.y}function P(s,f){return new o(s.x-f.x,s.y-f.y)}function pe(s,f){s.x+=f,s.y+=f}function z(s,f){return new o(s.x*f,s.y*f)}function bs(s,f){s.x*=f,s.y*=f}function xs(s){return s.x*s.x+s.y*s.y}function Ss(s){return Math.sqrt(s.x*s.x+s.y*s.y)}function ds(s){let f=Ss(s);s.x/=f,s.y/=f}function j(s,f){let l=s.x-f.x,t=s.y-f.y;return l*l+t*t}function Oe(s,f){return Math.atan2(f.y-s.y,f.x-s.x)}function ps(s){return new o(Math.floor(s.x),Math.floor(s.y))}function ys(s,f){return Math.floor(Math.random()*(f-s+1)+s)}function ve(s){return s*2-1}function me(){return Math.random()<0.5}function ye(s,f,l){return Math.min(Math.max(s,f),l)}function ge(s,f,l,t){return xs(P(l,new o(ye(l.x,s.x,s.x+f.x),ye(l.y,s.y,s.y+f.y))))<t*t}function vs(s,f,l,t){let{x:a,y:r}=s,u=a+f.x,n=r+f.y,i=l.x,b=l.y,B=i+t.x,R=b+t.y;return a<B&&u>i&&r<R&&n>b}function Ae(s){let f=Object.keys(s);return f[Math.floor(Math.random()*f.length)]}var Ge=typeof window!=="undefined",F=[];function ms(s){if(Ge){F.push(new Audio("audio/coin_1.wav")),F.push(new Audio("audio/coin_2.wav")),F.push(new Audio("audio/coin_3.wav")),F.push(new Audio("audio/coin_4.wav")),F.push(new Audio("audio/coin_5.wav")),F.push(new Audio("audio/laser.wav"));let f=()=>{let l=!0;for(let t=0;t<F.length;++t)if(!F[t].readyState){l=!1;break}if(l)F[5].volume=0.4,s();else setTimeout(f,100)};f()}else s()}function gs(){if(Ge){let s=ys(0,4);F[s].currentTime=0.15,F[s].play()}}function $s(){if(Ge)F[5].currentTime=0,F[5].play()}var S;((h)=>{h[h.LEFT=0]="LEFT";h[h.RIGHT=1]="RIGHT";h[h.DOWN=2]="DOWN";h[h.UP=3]="UP";h[h.A=4]="A";h[h.D=5]="D";h[h.E=6]="E";h[h.G=7]="G";h[h.H=8]="H";h[h.I=9]="I";h[h.Q=10]="Q";h[h.R=11]="R";h[h.S=12]="S";h[h.W=13]="W";h[h.SPACE=14]="SPACE";h[h.ESCAPE=15]="ESCAPE";h[h.ENTER=16]="ENTER";h[h.SHIFT=17]="SHIFT";h[h.INVALID=18]="INVALID"})(S||={});class p{static _keys=[];static init(){for(let s=0;s<Object.keys(S).length;++s)p._keys.push(!1);window.addEventListener("keydown",p.onKeyDown),window.addEventListener("keyup",p.onKeyUp)}static isKeyDown(...s){let f=s.length;for(let l=0;l<f;++l)if(p._keys[s[l]])return!0;return!1}static keyStrToKey(s){switch(s){case"Down":case"ArrowDown":return 2;case"Up":case"ArrowUp":return 3;case"Right":case"ArrowRight":return 1;case"Left":case"ArrowLeft":return 0;case" ":case"Space":return 14;case"Escape":return 15;case"a":case"A":return 4;case"e":case"E":return 6;case"s":case"S":return 12;case"d":case"D":return 5;case"w":case"W":return 13;case"r":case"R":return 11;case"q":case"Q":return 10;case"g":case"G":return 7;case"h":case"H":return 8;case"i":case"I":return 9;case"Shift":return 17;case"Enter":return 16;default:return console.warn(`Unhandled key: ${s}.`),18}}static onKeyDown(s){let f=p.keyStrToKey(s.key);if(p._keys[f]=!0,f==2||f==3||f==0||f==1)s.preventDefault();return!1}static onKeyUp(s){return p._keys[p.keyStrToKey(s.key)]=!1,!1}static clear(){for(let s=0;s<p._keys.length;++s)p._keys[s]=!1}}class He{scenes={};registerScene(s,f){if(this.scenes[s]===void 0)this.scenes[s]=f;else console.error(`Key "${s}" for scene already exists! Scene not added to SceneManager.`)}getScene(s){return this.scenes[s]}}var $="#fe546f";var q="#ffd080",K="#fffdff",zs="#0bffe6";var Fs="#9696ff";var Q=720,J=480,v=32,W=15,qs=W+2,Qs=3,Js=2*Math.PI,I=0,$e=1,ze=2,Me=20,Se=30,Is=Me/v,Ls=Se/v,Vs=new o(Is,Ls),V=31,G=31,H=V/v,Ds=G/v,Y=new o(H,Ds),L=16,D=16,cs=L/v,Ts=D/v,Fe=new o(cs,Ts),ee=25,se=15,Xs=ee/v,Us=se/v,ks=new o(Xs,Us),Zs=new o(Us,Xs),Ie=10,Bs=Ie/v,Le=2.5,De=H/8,Ps=V/8,qe=0.6,js=2,Ws=2.5,Ys=150,Ns=10,Cs=10,Rs=10,Qe=L/v,_s=D/v,Ks=new o(Qe,_s),U="start",fe="end",x="death";class k{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class ce extends k{ctx;constructor(s){super();this.ctx=s}onEnter(){this.ctx.clearRect(0,0,Q,J),this.ctx.font="30px Arial",this.ctx.fillStyle=K,this.ctx.fillText("You won! Congratulations!",170,J/2)}update(s){}render(){}_onExit(){}}var le="main menu",O="game",Je="player won",Z="transition",Ve="lost",ae="won";class Te extends k{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){p.clear(),this.ctx.fillStyle=q,this.ctx.font="48px Arial",this.ctx.fillText("YOU WON",250,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to keep going.",180,400)}update(s){if(p.isKeyDown(14))this.transitionScene.targetScene=O,this.changeScene=Z}render(){}_onExit(){}}class _e extends k{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){p.clear(),this.ctx.fillStyle=$,this.ctx.font="48px Arial",this.ctx.fillText("YOU LOST",243,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to try again.",195,400)}update(s){if(p.isKeyDown(14))this.transitionScene.targetScene=O,this.changeScene=Z}render(){}_onExit(){}}class Ee{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class es extends Ee{targetScene=le;timer=0;ctx;constructor(s){super();this.ctx=s}onEnter(){}update(s){if(this.timer+=s,this.timer>0.5)this.changeScene=this.targetScene}render(){let s=this.timer/0.5;this.ctx.fillStyle=`rgba(0,0,0, ${s})`,this.ctx.fillRect(0,0,Q,J)}_onExit(){this.timer=0}}class M{movingRight=!1;movingLeft=!1;jumping=!1;set(s){this.movingRight=s.moveRight,this.movingLeft=s.moveLeft,this.jumping=s.jump}}class ss extends M{time=0;name(){return"random"}update(s){if(this.time+=s,this.time>0.2)this.time=0,this.movingRight=me(),this.movingLeft=me(),this.jumping=me()}}class Xe extends M{name(){return"player"}update(s){this.movingRight=p.isKeyDown(5,1),this.movingLeft=p.isKeyDown(4,0),this.jumping=p.isKeyDown(14,3)}}class fs extends M{name(){return"empty"}update(s){}}var ef=0,ls=1,te=2;function Os(s,f){switch(s){case ef:return new ss;case ls:return new Xe;case te:return new fs;default:return console.error(`Unhandled agent type: ${s}. Defaulted to player agent.`),new Xe}}class as{src;tgt;probability;constructor(s,f,l){this.src=s,this.tgt=f,this.probability=l}}class re{name;reward;utility;isTerminal;neighbors;constructor(s,f,l,t,a){this.name=s,this.reward=f,this.utility=l,this.isTerminal=t,this.neighbors=a}}class Ue{nodes;edges;constructor(){this.nodes={},this.edges={}}getNode(s){return this.nodes[s]}hasNode(s){return s in this.nodes}addNode(s){this.nodes[s.name]=s}addDefaultNode(s,f=1,l=0,t=!1,a=null){if(a==null)a=[];this.nodes[s]=new re(s,f,l,t,a)}removeNode(s){let f=[];for(let l of Object.values(this.edges)){if(l.src==s||l.tgt==s)f.push(l);let t=l.probability,a=-1;for(let i=0;i<t.length;i++){let[b,B]=t[i];if(b==s){a=i;break}}if(a==-1)continue;let r=t[a][1];t.splice(a,1);let u=t.length,n=r/u;l.probability=t.map(([i,b])=>[i,b+n])}for(let l of f)this.removeEdge(l.src,l.tgt);delete this.nodes[s]}getEdge(s,f){return this.edges[`${s},${f}`]}hasEdge(s,f){return`${s},${f}`in this.edges}addEdge(s){this.edges[`${s.src},${s.tgt}`]=s;let f=this.nodes[s.src].neighbors;if(!f.includes(s.tgt))f.push(s.tgt)}addDefaultEdge(s,f,l=null){if(l==null)l=[[f,1]];this.addEdge(new as(s,f,l))}removeEdge(s,f){let l=this.nodes[s],t=l.neighbors.indexOf(f);l.neighbors.splice(t,1),delete this.edges[`${s},${f}`]}neighbors(s){return this.nodes[s].neighbors}setNodeUtilities(s){for(let[f,l]of Object.entries(s))this.nodes[f].utility=l}utility(s){return this.nodes[s].utility}reward(s){return this.nodes[s].reward}isTerminal(s){return this.nodes[s].isTerminal}mapNodes(s){for(let f of Object.values(this.nodes))s(f)}mapEdges(s){for(let f of Object.values(this.edges))s(f)}}function A(s){return s[Math.floor(Math.random()*s.length)]}function c(s,f,l,t){let a=s.getEdge(f,l).probability,r=a.length,u=0;for(let n=0;n<r;++n){let[i,b]=a[n];u+=b*(s.reward(i)+t*s.utility(i))}return u}function ke(s,f,l){let t=s.getNode(f);if(t.isTerminal)return 0;let a=t.neighbors,r=a.length,u=-1/0;for(let n=0;n<r;++n)u=Math.max(u,c(s,f,a[n],l));return u}function ts(s){for(let f in s.nodes)s.nodes[f].utility=0}function rs(s){let f={};for(let l in s.nodes)if(!s.getNode(l).isTerminal)f[l]=[...s.neighbors(l)];return f}function us(s,f){let l={};for(let t in s.nodes){if(s.getNode(t).isTerminal)continue;let a=-1/0,r=[];for(let u of s.neighbors(t)){let n=c(s,t,u,f);if(n===a)r.push(u);else if(n>a)a=n,r.length=0,r.push(u)}l[t]=r}return l}function sf(s,f,l,t){for(let a=0;a<t;++a)for(let r in s.nodes){let u=s.getNode(r);if(!u.isTerminal)u.utility=c(s,r,A(f[r]),l)}}function ff(s,f,l,t){for(let a=0;a<t;++a){let r={};for(let u in s.nodes)if(!s.getNode(u).isTerminal)r[u]=c(s,u,A(f[u]),l);s.setNodeUtilities(r)}}function lf(s,f,l,t){for(let a=0;a<t;++a)for(let r in s.nodes)s.getNode(r).utility=ke(s,r,l)}function af(s,f,l,t){for(let a=0;a<t;++a){let r={};for(let u in s.nodes)r[u]=ke(s,u,l);s.setNodeUtilities(r)}}function As(s,f,l){let t=!1;for(let a in s.nodes){if(s.getNode(a).isTerminal)continue;let r=null,u=-1/0;for(let n of s.neighbors(a)){let i=c(s,a,n,l);if(i===u);else if(i>u)r=n,u=i}if(A(f[a])!==r)f[a].length=0,f[a].push(r),t=!0}return t}function ns(s,f,l=!1,t=!1,a=10,r=!0){if(r)ts(s);let u=rs(s),n;if(l&&t)n=sf;else if(l&&!t)n=ff;else if(!l&&t)n=lf;else n=af;let i=!0;while(i)n(s,u,f,a),i=As(s,u,f);return n(s,u,f,a),As(s,u,f),us(s,f)}class m extends re{visitedCount;sumPercentCompleted;depth;designerReward;playerReward;constructor(s,f,l,t,a,r){super(s,f,l,t,a);this.designerReward=f,this.playerReward=0,this.depth=r,this.visitedCount=1,this.sumPercentCompleted=1}updateReward(){this.reward=this.designerReward*this.visitedCount}}var w=new Ue;w.addNode(new m(U,0,0,!1,[],-1));w.addNode(new m(x,-1,0,!0,[],-1));w.addNode(new m(fe,1,0,!0,[],-1));w.addNode(new m("1-a",-0.95,0,!1,[],1));w.addNode(new m("2-a",-0.925,0,!1,[],2));w.addNode(new m("2-b",-0.925,0,!1,[],2));w.addNode(new m("3-a",-0.9,0,!1,[],3));w.addNode(new m("3-b",-0.9,0,!1,[],3));w.addNode(new m("4-a",-0.825,0,!1,[],4));w.addNode(new m("4-b",-0.825,0,!1,[],4));w.addNode(new m("5-a",-0.8,0,!1,[],5));w.addNode(new m("5-b",-0.8,0,!1,[],5));w.addNode(new m("5-c",-0.8,0,!1,[],5));w.addNode(new m("6-a",-0.775,0,!1,[],6));w.addNode(new m("7-a",-0.75,0,!1,[],7));w.addNode(new m("6-b",-0.775,0,!1,[],6));w.addNode(new m("1-b",-0.95,0,!1,[],1));w.addDefaultEdge(U,"1-a",[["1-a",0.99],[x,0.01]]);w.addDefaultEdge("1-a","2-b",[["2-b",0.99],[x,0.01]]);w.addDefaultEdge("1-a","2-a",[["2-a",0.99],[x,0.01]]);w.addDefaultEdge("2-a","3-a",[["3-a",0.99],[x,0.01]]);w.addDefaultEdge("2-b","3-b",[["3-b",0.99],[x,0.01]]);w.addDefaultEdge("3-a","4-b",[["4-b",0.99],[x,0.01]]);w.addDefaultEdge("3-a","4-a",[["4-a",0.99],[x,0.01]]);w.addDefaultEdge("3-b","4-b",[["4-b",0.99],[x,0.01]]);w.addDefaultEdge("3-b","4-a",[["4-a",0.99],[x,0.01]]);w.addDefaultEdge("4-a","5-b",[["5-b",0.99],[x,0.01]]);w.addDefaultEdge("4-a","5-a",[["5-a",0.99],[x,0.01]]);w.addDefaultEdge("4-a","5-c",[["5-c",0.99],[x,0.01]]);w.addDefaultEdge("4-b","5-b",[["5-b",0.99],[x,0.01]]);w.addDefaultEdge("4-b","5-a",[["5-a",0.99],[x,0.01]]);w.addDefaultEdge("4-b","5-c",[["5-c",0.99],[x,0.01]]);w.addDefaultEdge("5-a","6-a",[["6-a",0.99],[x,0.01]]);w.addDefaultEdge("5-a","6-b",[["6-b",0.99],[x,0.01]]);w.addDefaultEdge("5-b","6-a",[["6-a",0.99],[x,0.01]]);w.addDefaultEdge("5-b","6-b",[["6-b",0.99],[x,0.01]]);w.addDefaultEdge("5-c","6-a",[["6-a",0.99],[x,0.01]]);w.addDefaultEdge("5-c","6-b",[["6-b",0.99],[x,0.01]]);w.addDefaultEdge("6-a","7-a",[["7-a",0.99],[x,0.01]]);w.addDefaultEdge("7-a","end",[["end",0.99],[x,0.01]]);w.addDefaultEdge("6-b","7-a",[["7-a",0.99],[x,0.01]]);w.addDefaultEdge(U,"1-b",[["1-b",0.99],[x,0.01]]);w.addDefaultEdge("1-b","2-b",[["2-b",0.99],[x,0.01]]);w.addDefaultEdge("1-b","2-a",[["2-a",0.99],[x,0.01]]);var Ze={"1-a":["------------XXX-","-------------T--","----------------","----------------","----------------","----------------","----------------","----------------","-----X-C-----X--","--------------b-","-----------o----","--------o-XX----","------o-XXXX----","------XXXXXX----","XXXXXXXXXXXX^XXX"],"2-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-------XXXXXXXX-------","----------------------","-------V--o---V-----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"2-b":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-----------o----------","--------------------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"3-a":["----------------------","----------------------","----------------------","----------------------","-----------o----------","----------------------","---------XXXXX--------","-----------o----------","----------------------","-------X-H-----X------","---XX--XXXXXXXXX--XX--","----------------------","-------V---o---V----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"3-b":["----------------------","----------------------","----------------------","----------------------","----------o-----------","----------------------","--------XXXXX---------","--------V---V---------","----------o-----------","----------------------","------XXXXXXXXX-------","----------------------","----------o---------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"4-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------XXX---","-----------------V----","-------X---XX-----V---","------XX------o-V---o-","-----XXX--------------","XXXXXXXX---XXXXXXXXXXX"],"4-b":["--------------------XX","--------------------XX","--------------------XX","--------------------XX","--------------------XX","-----------X-H---o--XX","-----------------o--XX","---------o----------XX","-----------XXXXXXX--XX","--------------------XX","-------X------------XX","------XXX-----------XX","-----XXXXX-----------o","----XXXXXXX-----------","XXXXXXXXXXXXXXXX--XXXX"],"5-a":["--------XXXXXXXXXXXXXX--------","-------------------ooX--------","---------------------X--------","---------------------X--------","------------------XXXX--------","------------------X-----------","-----------o--XXXXX-----------","------------------------------","---------XX-----------------o-","------------------------------","--------------XX---XXX----XXXX","------------------------------","----------XX------------------","------------------------------","XXXXXXXX----------------------"],"5-b":["------------------------------","-o----------------------------","------------------------------","XXX---------------------------","------------------------------","-----XXX----------------------","------------------------------","-----------XXX----------------","-o--------------------------o-","------XXX---------------------","XXX-----------------------XXXX","------------XXX-------XX------","------------------XX----------","------------------------------","XXXXXXXX---XXXXX--------------"],"5-c":["o-----------------------------","------------------------------","X---XX------------------------","------------------------------","------------------------------","XX----------------------------","--------XXXXX-----------------","--------Xoo-------------------","XXX-----Xoo----o------------o-","--------X---------------------","--------XXX---XX----XX----XXXX","XXXX--------------------------","------------------------------","------------------------------","XXXXXXXX----------------------"],"6-a":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","-------oo---XXXXXXXX----------","-o----------XXXXXXXX----------","------XXXX--XXXXXXXX----------","--------------o---------------","XXXX--------------------------","-------------XXXX-----------o-","---------------------XX-------","XXXXXXXX-----------------XXXXX"],"7-a":["-------------------V---------------","-----------------o---o-------------","------------X-H------------H--XXX--","-----V------XXXXXXXXXXXXXXXXXXXXX--","--------XX----o--------------------","-----------------------------------","-----------XXXXXX---Ho-------------","-----------------------------------","-------------V------XX--------H----","-----------------------------------","XX--------o------XXXXX----H--------","-----------------------------------","---X----H----H-X-----------------o-","---XXXXXXXXXXXXX-------------------","XXXX--------------------------XXXXX"],end:["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----oooooooooooooooooo","XXXXXXXXXXXXXXXXXXXXXX"],"6-b":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX---o------","----------XXXXXXXXXX----------","-o--------XXXXXXXXXX----------","----------XXXXXXXXXX---X------","----------XXXXXXXXXX----------","XXX-------XXXXXXXXXXX---------","------XX-----oooo-----------o-","------------------------------","XXXX--------XXXXXX---XXX--XXXX"],"1-b":["---------XXX----","----------T-----","----------------","----------------","----------------","----------------","----------------","----X-----X-----","-------oo------C","----------------","-------XX-------","----o-XXXX-o----","-----XXXXXX-----","---XXXXXXXXXX---","XXXXXXXXXXXXXXXX"]};class e{moveRight;moveLeft;jump;constructor(s,f,l){this.moveRight=s,this.moveLeft=f,this.jump=l}}var Gs=[new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0)],tf=Gs.length;var Be=3,Hs=0.01666*Be;class ue{startCol=0;offsetX=0;colsPerScreen=Math.ceil(Q/v);update(s){let f=s-this.colsPerScreen/2;this.startCol=Math.max(0,Math.floor(f)),this.offsetX=-f*v+this.startCol*v}columnToScreen(s){return(s-this.startCol)*v+this.offsetX}rowToScreen(s){return s*v}}class ne{game;pos;type;dead=!1;velocity=new o(0,0);gravity=new o(0,100);constructor(s,f){this.pos=s,this.type=f}physicsUpdate(s){Ke(this.velocity,z(this.gravity,s)),this.velocity.y=Math.min(this.velocity.y,30),Ke(this.pos,z(this.velocity,s))}}class d extends ne{size;constructor(s,f,l){super(s,l);this.size=f}collision(s){if(s instanceof d){if(vs(this.pos,this.size,s.pos,s.size))this.handleCollision(s),s.handleCollision(this)}else if(s instanceof we){if(ge(this.pos,this.size,s.pos,s.r))this.handleCollision(s),s.handleCollision(this)}}}class we extends ne{r;constructor(s,f,l){super(s,l);this.r=f}collision(s){if(s instanceof d){if(ge(s.pos,s.size,this.pos,this.r))this.handleCollision(s),s.handleCollision(this)}}}var T=0,X=1,Pe=2,N=3,je=4,C=5;class ie extends we{angle;start;constructor(s,f,l,t){super(s,Bs,N);this.gravity.y=0,this.angle=f,this.start=l,this.velocity=t}static defaultConstructor(s){return new ie(s,0,y(s),new o(0,0))}clone(){return new ie(y(this.pos),this.angle,this.start,y(this.velocity))}update(s){this.angle+=s,this.velocity.x=2*Le*Math.cos(this.angle),this.velocity.y=Le*Math.sin(this.angle)}handleCollision(s){this.dead=s.type===C}render(s,f){s.fillStyle=$,s.beginPath(),s.arc(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Ie,0,Js),s.fill()}}class oe extends d{constructor(s,f){super(s,Ks,C);this.gravity.y=0,this.velocity=f}static defaultConstructor(s,f){let l=P(f,s);return ds(l),bs(l,Ns),new oe(s,l)}clone(){return new oe(y(this.pos),y(this.velocity))}update(s){}handleCollision(s){this.dead=!0}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Cs,Rs)}}class We extends d{playerPos;color;time;state;constructor(s,f=0,l=0){super(s,Y,X);this.color=q,this.gravity.y=0,this.time=f,this.state=l}clone(){return new We(y(this.pos),this.time,this.state)}update(s){switch(this.state){case 0:{if(j(this.pos,this.game.protaganist().pos)<=Ys)this.color=$,this.state=1;break}case 1:{if(this.time+=s,this.time>=Ws)this.time=0,this.state=2;break}case 2:{this.state=0,this.color=q;let f=this.game.protaganist().pos,l=Oe(this.pos,f),t=Math.cos(l),a=Math.sin(l);this.game.dynamicEntities.push(oe.defaultConstructor(new o(this.pos.x+(Qe+H)*t,this.pos.y+(Qe+H)*a),f));break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=V/2,r=2*a,u=new o(l+a,t);s.lineWidth=2,s.beginPath(),s.arc(u.x,u.y,a,0,Math.PI),s.stroke();let n=Oe(this.pos,this.game.protaganist().pos),i=Math.cos(n),b=Math.sin(n);s.lineWidth=4,s.beginPath(),s.moveTo(u.x+a*i,u.y+a*b),s.lineTo(u.x+r*i,u.y+r*b),s.stroke(),s.lineWidth=1}}class Ye extends d{constructor(s){super(s,Y,X)}clone(){throw new Error("Block.clone should not have been called!")}update(s){}handleCollision(s){}render(s,f){s.lineWidth=1.3,s.strokeStyle=K,s.strokeRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),V,G)}}var rf=1000,uf=2;class he extends d{minY;maxY;yMod;timeGone;constructor(s,f,l,t,a,r){super(s,Fe,je);this.gravity.y=0,this.yMod=f,this.minY=l,this.maxY=t,this.velocity.y=a,this.timeGone=r}static defaultConstructor(s){let f=Math.random()*0.5;return pe(s,0.25),new he(s,f,s.y+0.15,s.y+0.3,f,0)}clone(){return new he(y(this.pos),this.yMod,this.minY,this.maxY,this.velocity.y,this.timeGone)}update(s){if(this.pos.y>100){if(this.timeGone+=s,this.timeGone>=uf)this.pos.y=this.maxY,this.velocity.y=-this.yMod}else if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===T)this.pos.y=rf,this.timeGone=0}render(s,f){s.fillStyle=zs,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),L,D)}}class _ extends d{minY;maxY;yMod;constructor(s,f,l,t,a,r=!1){super(s,Fe,Pe);this.gravity.y=0,this.yMod=f,this.maxY=l,this.minY=t,this.velocity.y=a,this.dead=r}static defaultConstructor(s){return s.x+=0.25,new _(s,0.1,s.y+0.3,s.y+0.15,0.1)}clone(){return new _(y(this.pos),this.yMod,this.maxY,this.minY,this.velocity.y,this.dead)}update(s){if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===T)gs(),this.dead=!0}render(s,f){s.fillStyle=q,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),L,D)}}class be extends d{maxColumns;constructor(s,f,l){super(s,ks,N);this.maxColumns=f,this.velocity.x=l,this.gravity.y=0}static defaultConstructor(s,f){return pe(s,0.25),new be(s,f,3)}clone(){return new be(y(this.pos),this.maxColumns,this.velocity.x)}update(s){this.velocity.x*=ve(this.pos.x>=0&&this.pos.x<=this.maxColumns)}handleCollision(s){if(s.type===X){let f=P(g(this.pos,z(this.size,0.5)),g(s.pos,z(s.size,0.5))),l=g(this.size,s.size);if(z(l,0.5),Math.abs(f.x/this.size.x)>Math.abs(f.y/this.size.y))if(this.velocity.x*=-1,f.x<0)this.pos.x=s.pos.x-this.size.x;else this.pos.x=s.pos.x+s.size.x}else if(s.type===C)this.dead=!0}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),ee,se)}}class xe extends d{time;constructor(s,f,l){super(s,f,N);this.gravity.y=0,this.time=l}static defaultConstructor(s,f){return s.x+=(H-De)/2,new xe(s,new o(De,f),0)}clone(){return new xe(this.pos,this.size,this.time)}update(s){$s(),this.time+=s,this.dead=this.time>=qe}handleCollision(s){}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Ps,this.size.y*v)}}class Ne extends d{color;time=0;state=0;constructor(s,f=0,l=0){super(s,Y,X);this.color=q,this.gravity.y=0,this.state=f,this.time=l}clone(){return new Ne(y(this.pos),this.state,this.time)}update(s){if(j(this.pos,this.game.protaganist().pos)>150)this.state=0;switch(this.time+=s,this.state){case 0:{if(this.time>=qe)this.time=0,this.state=1,this.color=q;break}case 1:{if(this.time>=js){this.time=0,this.state=0,this.color=$;let f=this.game.raycastUp(this.pos),l=f===null?W:this.pos.y-f.pos.y-1;this.game.dynamicEntities.push(xe.defaultConstructor(new o(this.pos.x,this.pos.y-l),l))}break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=t+G;s.beginPath(),s.moveTo(l,a),s.lineTo(l+V/2,t),s.lineTo(l+V,a),s.lineTo(l,a),s.stroke(),s.strokeStyle=K,s.beginPath(),s.moveTo(l,t),s.lineTo(l+V,t),s.stroke()}}var Ms=6,nf=0.4;class Ce extends d{movingRight;movingLeft;moveMod;jumpTime;squash;stretch;coinsCollected;maxColumn;agent;constructor(s,f,l,t=!1,a=!1,r=0,u=0,n=1,i=1,b=0,B=0){super(s,Vs,T);this.velocity=f,this.agent=l,this.movingRight=t,this.movingLeft=a,this.moveMod=r,this.jumpTime=u,this.squash=n,this.stretch=i,this.coinsCollected=b,this.maxColumn=B}clone(){return new Ce(y(this.pos),y(this.velocity),this.agent,this.movingRight,this.movingLeft,this.moveMod,this.jumpTime,this.squash,this.stretch,this.coinsCollected,this.maxColumn)}update(s){if(this.pos.y>qs){this.dead=!0;return}if(this.movingLeft=!1,this.movingRight=!1,this.velocity.x=0,this.agent.update(s),this.agent.movingRight)this.movingRight=!0,this.velocity.x=Ms,this.moveMod=4;if(this.agent.movingLeft)if(this.movingRight)this.movingRight=!1,this.velocity.x=0;else this.movingLeft=!0,this.velocity.x=-Ms,this.moveMod=4;if(this.jumpTime<nf&&this.agent.jumping){if(this.jumpTime===0)this.velocity.y=-15;else if(this.jumpTime<0.2)this.velocity.y-=2;this.velocity.y=Math.max(-20,this.velocity.y),this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s),this.jumpTime+=s}else if(this.squash!=this.stretch)this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s);this.maxColumn=Math.max(this.pos.x,this.maxColumn)}handleCollision(s){switch(s.type){case X:{let f=s,l=P(g(this.pos,z(this.size,0.5)),g(f.pos,z(f.size,0.5))),t=g(this.size,f.size);z(t,0.5);let a=Math.abs(Math.atan(l.y/l.x));if(!(a<0.96&&a>0.698)&&Math.abs(l.x/this.size.x)>Math.abs(l.y/this.size.y))if(l.x<0)this.pos.x=f.pos.x-this.size.x;else this.pos.x=f.pos.x+f.size.x;else if(l.y>0)this.pos.y=f.pos.y+f.size.y;else this.pos.y=f.pos.y-this.size.y,this.velocity.y=0,this.jumpTime=0,this.stretch=1.01,this.squash=0.99;break}case Pe:{++this.coinsCollected;break}case C:case N:{this.dead=!0;break}case je:{this.jumpTime=0,this.velocity.y=Math.min(this.velocity.y,0);break}default:{console.warn(`Player unhandled collision type: ${s.type}.`);break}}}render(s,f){s.fillStyle=Fs;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=Se*this.squash,r=Me*this.stretch;if(this.movingRight){let u=new Path2D;u.moveTo(l,t),u.lineTo(l-this.moveMod,t+a),u.lineTo(l+r-this.moveMod,t+a),u.lineTo(l+r,t),u.closePath(),s.fill(u,"evenodd")}else if(this.movingLeft){let u=new Path2D;u.moveTo(l,t),u.lineTo(l+this.moveMod,t+a),u.lineTo(l+r+this.moveMod,t+a),u.lineTo(l+r,t),u.closePath(),s.fill(u,"evenodd")}else s.fillRect(l,t,r,a)}}class de extends d{constructor(s,f){super(s,Zs,N);this.velocity.y=f,this.gravity.y=0}static defaultConstructor(s){return s.x+=0.25,s.y+=0.1,new de(s,3)}clone(){return new de(y(this.pos),this.velocity.y)}update(s){this.velocity.y*=ve(this.pos.y>0&&this.pos.y<=W)}handleCollision(s){if(s.type===X){let f=P(g(this.pos,z(this.size,0.5)),g(s.pos,z(s.size,0.5))),l=g(this.size,s.size);if(z(l,0.5),Math.abs(f.x/this.size.x)<Math.abs(f.y/this.size.y))if(this.velocity.y*=-1,f.y>0)this.pos.y=s.pos.y+s.size.y;else this.pos.y=s.pos.y-this.size.y}else if(s.type===C)this.dead=!0}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),se,ee)}}class E{staticEntitiesRenderLocations=[];staticEntities;dynamicEntities=[];coins=[];constructor(s,f){if(s===null)return;let l=s.length;if(l!==W){console.error("Level should have 15 rows!");return}this.dynamicEntities.push(new Ce(new o(2,12),new o(0,0),Os(f,this)));let t=s[0].length,a,r;this.staticEntities=[];for(a=0;a<l;++a){let n=new Array(t);n.fill(!1),this.staticEntities.push(n)}for(a=0;a<l;++a){let n=s[a];if(t!==n.length){console.error(`Every row in the level should have the same number of columns! (${t} !== ${n.length}).`);return}for(r=0;r<t;++r){let i=n[r];if(i==="X")this.staticEntities[a][r]=!0,this.staticEntitiesRenderLocations.push(new o(r,a));else if(i==="^")this.dynamicEntities.push(new Ne(new o(r,a)));else if(i==="T")this.dynamicEntities.push(new We(new o(r,a)));else if(i==="o"){let b=_.defaultConstructor(new o(r,a));this.dynamicEntities.push(b),this.coins.push(b)}else if(i=="b")this.dynamicEntities.push(he.defaultConstructor(new o(r,a)));else if(i==="H")this.dynamicEntities.push(be.defaultConstructor(new o(r,a),t));else if(i==="V")this.dynamicEntities.push(de.defaultConstructor(new o(r,a)));else if(i==="C")this.dynamicEntities.push(ie.defaultConstructor(new o(r,a)));else if(i!=="-")console.error(`Unhandled tile type: ${n[r]}`)}}for(let n=0;n<this.dynamicEntities.length;++n)this.dynamicEntities[n].game=this;let u=this.dynamicEntities[0].pos;this.coins.sort((n,i)=>{return j(u,n.pos)-j(u,i.pos)})}clone(){let s=new E(null,te),f=this.dynamicEntities.length,l=0;for(;l<f;++l){let a=this.dynamicEntities[l];if(a.dead)continue;let r=a.clone();if(r.game=s,s.dynamicEntities.push(r),r instanceof _)s.coins.push(r)}let t=s.dynamicEntities[0].pos;return s.coins.sort((a,r)=>{return j(t,a.pos)-j(t,r.pos)}),s.staticEntities=this.staticEntities,s}hash(){let s=this.dynamicEntities[0].pos;return Math.round(s.x*100)+Math.round(s.y*100)*1e6}update(s,f=1){s=s/f;for(let l=0;l<f;++l){let t=this.dynamicEntities.length,a=this.staticEntities.length,r,u=0;for(;u<t;++u){let n=this.dynamicEntities[u];if(n.update(s),n.dead){if(u==0)break;this.dynamicEntities.splice(u,1),--u,--t}n.physicsUpdate(s);for(r=u+1;r<t;++r)n.collision(this.dynamicEntities[r]);if(n instanceof d){let i=[n.pos,g(n.pos,new o(Y.x,0)),g(n.pos,new o(0,Y.y)),g(n.pos,Y)];for(r=0;r<4;++r){let b=ps(i[r]);if(b.y>=0&&b.y<this.staticEntities.length&&b.x>=0&&b.x<=this.staticEntities[0].length&&this.staticEntities[b.y][b.x])n.collision(new Ye(b))}}}}}render(s,f){f.update(this.dynamicEntities[0].pos.x);let l=this.staticEntitiesRenderLocations.length,t=0;s.lineWidth=1.3,s.strokeStyle=K;for(;t<l;++t){let a=this.staticEntitiesRenderLocations[t];s.strokeRect(f.columnToScreen(a.x),f.rowToScreen(a.y),V,G)}l=this.dynamicEntities.length;for(t=0;t<l;++t)this.dynamicEntities[t].render(s,f)}state(){let s=this.dynamicEntities[0];if(s.coinsCollected>=this.coins.length)return ze;if(s.dead)return $e;return I}protaganist(){return this.dynamicEntities[0]}fitness(){return 1-this.dynamicEntities[0].coinsCollected/this.coins.length}raycastUp(s){let f=y(s);f.y-=1;while(f.y>=0){if(this.staticEntities[f.y][f.x])return new Ye(f);f.y-=1}return null}}var Re={"1-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"2-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"2-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"3-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1)],"3-b":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1)],"4-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"4-b":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"5-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"5-b":[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-c":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"6-a":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"7-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1)],end:[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"6-b":[new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"1-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)]};var wf=Hs/Be;class ws extends k{ctx;transitionScene;camera;game;actions=[];actionIndex;frame;time;previousKey="";constructor(s,f){super();this.ctx=s,this.transitionScene=f,this.camera=new ue}onEnter(){let s=Ae(Re);while(s==this.previousKey)s=Ae(Re);this.previousKey=s,this.actions=Re[s],this.game=new E(Ze[s],te),this.actionIndex=0,this.frame=0,this.time=0}update(s){if(this.game.state()!==I)this.onEnter();if(p.isKeyDown(14))this.transitionScene.targetScene=O,this.changeScene=Z;if(this.time+=s,this.time>=0.0166666){if(this.time=this.time-0.016666,this.frame>=Be)this.frame=0,++this.actionIndex;++this.frame,this.game.protaganist().agent.set(this.actions[this.actionIndex]),this.game.update(wf)}}render(){this.ctx.clearRect(0,0,Q,J),this.game.render(this.ctx,this.camera),this.ctx.fillStyle="black",this.ctx.fillRect(240,60,240,47),this.ctx.fillRect(210,234,295,39),this.ctx.fillStyle=q,this.ctx.font="48px Arial",this.ctx.fillText("Recformer",247,100),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to start",220,J*0.55)}_onExit(){}}class is{playerIsOnLastLevel=!1;keys;columnsPerLevel;lossesInARow=0;playerWonLastRound=!1;constructor(){}update(s,f){let l=this.keys.length,t=[];if(s){for(let r=0;r<l;++r)t.push(1);this.lossesInARow=0}else{let r=f;for(let u=0;u<l;++u)if(r>this.columnsPerLevel[u])t[u]=1,r-=this.columnsPerLevel[u];else{t[u]=r/this.columnsPerLevel[u];break}}let a=t.length;for(let r=0;r<a;++r){let u=t[r],n=this.keys[r],i=w.getNode(n);if(u===1){if(!w.hasEdge(U,n))w.addDefaultEdge(U,n,[[n,1],[x,0]])}++i.visitedCount,i.sumPercentCompleted+=u,i.updateReward();let b=i.sumPercentCompleted/i.visitedCount,B=1-b;w.mapEdges((R)=>{if(R.tgt===n)R.probability[0][1]=b,R.probability[1][1]=B})}if(!s){++this.lossesInARow;for(let r=0;r<this.lossesInARow;++r){let u=w.getNode(U).neighbors,n=u.length;if(n===1)break;let i="",b=-1e4;for(let B=0;B<n;++B){let R=u[B],hs=w.getNode(R).depth;if(hs>b)i=R,b=hs}console.log("removing edge:",i,b),w.removeEdge(U,i)}}this.playerWonLastRound=s}get(s){let f=ns(w,0.95,!0,!0,20);if(this.columnsPerLevel=[],this.playerWonLastRound)this.keys=[A(f[U])];else this.keys=[U];for(let a=0;a<s;++a){let r=A(f[this.keys[a]]);if(this.keys.push(r),r===fe)break}this.keys.splice(0,1),this.playerIsOnLastLevel=this.keys.includes(fe);let l=Array(W).fill(""),t=this.keys.length;for(let a=0;a<t;++a){let r=Ze[this.keys[a]];this.columnsPerLevel.push(r[0].length);for(let u=0;u<W;++u)l[u]+=r[u]}return l}}class os extends k{ctx;transitionScene;agentType;game;camera;levelDirector;constructor(s,f,l){super();this.ctx=s,this.agentType=l,this.transitionScene=f,this.camera=new ue,this.levelDirector=new is}onEnter(){let s=this.levelDirector.get(Qs);this.game=new E(s,this.agentType)}update(s){this.game.update(s);let f=this.game.state();switch(f){case I:break;case $e:{this.transitionScene.targetScene=Ve,this.changeScene=Z;break}case ze:{if(this.levelDirector.playerIsOnLastLevel)this.transitionScene.targetScene=Je;else this.transitionScene.targetScene=ae;this.changeScene=Z;break}default:{console.error(`Unhandled game state type: ${f}`);break}}}render(){this.ctx.clearRect(0,0,Q,J),this.game.render(this.ctx,this.camera)}_onExit(){let s=this.game.fitness();console.log(`Fitness: ${s}`),this.levelDirector.update(this.transitionScene.targetScene===ae,s)}}window.addEventListener("load",()=>{ms(()=>{p.init();let s=document.createElement("canvas");s.setAttribute("id","canvas"),s.width=Q,s.height=J;let f=s.getContext("2d");document.getElementById("game").appendChild(s);let l=new He,t=new es(f);l.registerScene(Z,t),l.registerScene(le,new ws(f,t)),l.registerScene(O,new os(f,t,ls)),l.registerScene(Je,new ce(f)),l.registerScene(ae,new Te(f,t)),l.registerScene(Ve,new _e(f,t));let a=l.getScene(le);a.onEnter();let r=0,u=(n)=>{let i=Math.min(0.05,(n-r)/1000);r=n,a.update(ye(i,0.01,0.2)),a.render();let b=a.changeScene;if(b!==void 0)a.onExit(),a=l.getScene(b),a.onEnter();window.requestAnimationFrame(u)};window.requestAnimationFrame(u)})});
