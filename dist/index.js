class h{x;y;constructor(s,f){this.x=s,this.y=f}}function m(s){return new h(s.x,s.y)}function F(s,f){return new h(s.x+f.x,s.y+f.y)}function He(s,f){s.x+=f.x,s.y+=f.y}function A(s,f){return new h(s.x-f.x,s.y-f.y)}function ze(s,f){s.x+=f,s.y+=f}function J(s,f){return new h(s.x*f,s.y*f)}function vs(s,f){s.x*=f,s.y*=f}function $s(s){return s.x*s.x+s.y*s.y}function Ls(s){return Math.sqrt(s.x*s.x+s.y*s.y)}function Fs(s){let f=Ls(s);s.x/=f,s.y/=f}function S(s,f){let l=s.x-f.x,t=s.y-f.y;return l*l+t*t}function Ge(s,f){return Math.atan2(f.y-s.y,f.x-s.x)}function zs(s){return new h(Math.floor(s.x),Math.floor(s.y))}function le(s,f){let l=Math.pow(10,f);return Math.round(s*l)/l}function Js(s,f){return Math.floor(Math.random()*(f-s+1)+s)}function Qe(s){return s*2-1}function Je(){return Math.random()<0.5}function Qs(s,f,l){return Math.min(Math.max(s,f),l)}function Xe(s,f,l,t){return $s(A(l,new h(Qs(l.x,s.x,s.x+f.x),Qs(l.y,s.y,s.y+f.y))))<t*t}function Xs(s,f,l,t){let{x:a,y:r}=s,u=a+f.x,n=r+f.y,i=l.x,x=l.y,X=i+t.x,N=x+t.y;return a<X&&u>i&&r<N&&n>x}function Ie(s){let f=Object.keys(s);return f[Math.floor(Math.random()*f.length)]}var ce=typeof window!=="undefined",U=[];function Us(s){if(ce){U.push(new Audio("audio/coin_1.wav")),U.push(new Audio("audio/coin_2.wav")),U.push(new Audio("audio/coin_3.wav")),U.push(new Audio("audio/coin_4.wav")),U.push(new Audio("audio/coin_5.wav")),U.push(new Audio("audio/laser.wav"));let f=()=>{let l=!0;for(let t=0;t<U.length;++t)if(!U[t].readyState){l=!1;break}if(l)U[5].volume=0.4,s();else setTimeout(f,100)};f()}else s()}function qs(){if(ce){let s=Js(0,4);U[s].currentTime=0.15,U[s].play()}}function Vs(){if(ce)U[5].currentTime=0,U[5].play()}var T;((d)=>{d[d.LEFT=0]="LEFT";d[d.RIGHT=1]="RIGHT";d[d.DOWN=2]="DOWN";d[d.UP=3]="UP";d[d.A=4]="A";d[d.D=5]="D";d[d.E=6]="E";d[d.G=7]="G";d[d.H=8]="H";d[d.I=9]="I";d[d.Q=10]="Q";d[d.R=11]="R";d[d.S=12]="S";d[d.W=13]="W";d[d.SPACE=14]="SPACE";d[d.ESCAPE=15]="ESCAPE";d[d.ENTER=16]="ENTER";d[d.SHIFT=17]="SHIFT";d[d.INVALID=18]="INVALID"})(T||={});class y{static _keys=[];static init(){for(let s=0;s<Object.keys(T).length;++s)y._keys.push(!1);window.addEventListener("keydown",y.onKeyDown),window.addEventListener("keyup",y.onKeyUp)}static isKeyDown(...s){let f=s.length;for(let l=0;l<f;++l)if(y._keys[s[l]])return!0;return!1}static keyStrToKey(s){switch(s){case"Down":case"ArrowDown":return 2;case"Up":case"ArrowUp":return 3;case"Right":case"ArrowRight":return 1;case"Left":case"ArrowLeft":return 0;case" ":case"Space":return 14;case"Escape":return 15;case"a":case"A":return 4;case"e":case"E":return 6;case"s":case"S":return 12;case"d":case"D":return 5;case"w":case"W":return 13;case"r":case"R":return 11;case"q":case"Q":return 10;case"g":case"G":return 7;case"h":case"H":return 8;case"i":case"I":return 9;case"Shift":return 17;case"Enter":return 16;default:return console.warn(`Unhandled key: ${s}.`),18}}static onKeyDown(s){let f=y.keyStrToKey(s.key);if(y._keys[f]=!0,f==2||f==3||f==0||f==1)s.preventDefault();return!1}static onKeyUp(s){return y._keys[y.keyStrToKey(s.key)]=!1,!1}static clear(){for(let s=0;s<y._keys.length;++s)y._keys[s]=!1}}class Te{scenes={};registerScene(s,f){if(this.scenes[s]===void 0)this.scenes[s]=f;else console.error(`Key "${s}" for scene already exists! Scene not added to SceneManager.`)}getScene(s){return this.scenes[s]}}var z="#fe546f";var q="#ffd080",K="#fffdff",ks="#0bffe6";var Zs="#9696ff";var D=!1,V=720,k=480,v=32,R=15,Bs=R+2,Ns=3,Ps=2*Math.PI,g=0,Ue=1,qe=2,De=20,ge=30,ef=De/v,sf=ge/v,Ws=new h(ef,sf),Z=31,G=31,I=Z/v,ff=G/v,Y=new h(I,ff),_=16,E=16,lf=_/v,tf=E/v,Ve=new h(lf,tf),te=25,ae=15,js=te/v,As=ae/v,Rs=new h(js,As),Ys=new h(As,js),_e=10,Cs=_e/v,Ee=2.5,Le=I/8,Os=Z/8,ke=0.6,Ss=2,Ks=2.5,Ms=150,Hs=10,Gs=10,Is=10,Ze=_/v,af=E/v,cs=new h(Ze,af),P="start",re="end",p="death",Be="error-condition";class W{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class es extends W{ctx;constructor(s){super();this.ctx=s}onEnter(){this.ctx.clearRect(0,0,V,k),this.ctx.font="30px Arial",this.ctx.fillStyle=K,this.ctx.fillText("You won! Congratulations!",170,k/2),document.getElementById("time").style.display="none",document.getElementById("instructions").style.display="none",document.getElementById("studyOver").style.display="inline"}update(s){}render(){}_onExit(){}}var ue="main menu",M="game",ne="player won",j="transition",Ne="lost",we="won";class ss extends W{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){y.clear(),this.ctx.fillStyle=q,this.ctx.font="48px Arial",this.ctx.fillText("YOU WON",250,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to keep going.",180,400)}update(s){if(y.isKeyDown(14))this.transitionScene.targetScene=M,this.changeScene=j}render(){}_onExit(){}}class fs extends W{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){y.clear(),this.ctx.fillStyle=z,this.ctx.font="48px Arial",this.ctx.fillText("YOU LOST",243,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to try again.",195,400)}update(s){if(y.isKeyDown(14))this.transitionScene.targetScene=M,this.changeScene=j}render(){}_onExit(){}}class ls{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class ts extends ls{targetScene=ue;timer=0;ctx;constructor(s){super();this.ctx=s}onEnter(){}update(s){if(this.timer+=s,this.timer>0.5)this.changeScene=this.targetScene}render(){let s=this.timer/0.5;this.ctx.fillStyle=`rgba(0,0,0, ${s})`,this.ctx.fillRect(0,0,V,k)}_onExit(){this.timer=0}}class c{movingRight=!1;movingLeft=!1;jumping=!1;set(s){this.movingRight=s.moveRight,this.movingLeft=s.moveLeft,this.jumping=s.jump}}class as extends c{time=0;name(){return"random"}update(s){if(this.time+=s,this.time>0.2)this.time=0,this.movingRight=Je(),this.movingLeft=Je(),this.jumping=Je()}}class Pe extends c{name(){return"player"}update(s){this.movingRight=y.isKeyDown(5,1),this.movingLeft=y.isKeyDown(4,0),this.jumping=y.isKeyDown(14,3,13)}}class rs extends c{name(){return"empty"}update(s){}}var uf=0,us=1,ie=2;function Ts(s,f){switch(s){case uf:return new as;case us:return new Pe;case ie:return new rs;default:return console.error(`Unhandled agent type: ${s}. Defaulted to player agent.`),new Pe}}class ns{src;tgt;probability;constructor(s,f,l){this.src=s,this.tgt=f,this.probability=l}}class oe{name;reward;utility;isTerminal;neighbors;constructor(s,f,l,t,a){this.name=s,this.reward=f,this.utility=l,this.isTerminal=t,this.neighbors=a}}class We{nodes;edges;constructor(){this.nodes={},this.edges={}}getNode(s){return this.nodes[s]}hasNode(s){return s in this.nodes}addNode(s){this.nodes[s.name]=s}addDefaultNode(s,f=1,l=0,t=!1,a=null){if(a==null)a=[];this.nodes[s]=new oe(s,f,l,t,a)}removeNode(s){let f=[];for(let l of Object.values(this.edges)){if(l.src==s||l.tgt==s)f.push(l);let t=l.probability,a=-1;for(let i=0;i<t.length;i++){let[x,X]=t[i];if(x==s){a=i;break}}if(a==-1)continue;let r=t[a][1];t.splice(a,1);let u=t.length,n=r/u;l.probability=t.map(([i,x])=>[i,x+n])}for(let l of f)this.removeEdge(l.src,l.tgt);delete this.nodes[s]}getEdge(s,f){return this.edges[`${s},${f}`]}hasEdge(s,f){return`${s},${f}`in this.edges}addEdge(s){this.edges[`${s.src},${s.tgt}`]=s;let f=this.nodes[s.src].neighbors;if(!f.includes(s.tgt))f.push(s.tgt)}addDefaultEdge(s,f,l=null){if(l==null)l=[[f,1]];this.addEdge(new ns(s,f,l))}removeEdge(s,f){let l=this.nodes[s],t=l.neighbors.indexOf(f);l.neighbors.splice(t,1),delete this.edges[`${s},${f}`]}neighbors(s){return this.nodes[s].neighbors}setNodeUtilities(s){for(let[f,l]of Object.entries(s))this.nodes[f].utility=l}utility(s){return this.nodes[s].utility}reward(s){return this.nodes[s].reward}isTerminal(s){return this.nodes[s].isTerminal}mapNodes(s){for(let f of Object.values(this.nodes))s(f)}mapEdges(s){for(let f of Object.values(this.edges))s(f)}}function H(s){return s[Math.floor(Math.random()*s.length)]}function L(s,f,l,t){let a=s.getEdge(f,l).probability,r=a.length,u=0;for(let n=0;n<r;++n){let[i,x]=a[n];u+=x*(s.reward(i)+t*s.utility(i))}return u}function je(s,f,l){let t=s.getNode(f);if(t.isTerminal)return 0;let a=t.neighbors,r=a.length,u=-1/0;for(let n=0;n<r;++n)u=Math.max(u,L(s,f,a[n],l));return u}function ws(s){for(let f in s.nodes)s.nodes[f].utility=0}function is(s){let f={};for(let l in s.nodes)if(!s.getNode(l).isTerminal)f[l]=[...s.neighbors(l)];return f}function os(s,f){let l={};for(let t in s.nodes){if(s.getNode(t).isTerminal)continue;let a=-1/0,r=[];for(let u of s.neighbors(t)){let n=L(s,t,u,f);if(n===a)r.push(u);else if(n>a)a=n,r.length=0,r.push(u)}l[t]=r}return l}function nf(s,f,l,t){for(let a=0;a<t;++a)for(let r in s.nodes){let u=s.getNode(r);if(!u.isTerminal)u.utility=L(s,r,H(f[r]),l)}}function wf(s,f,l,t){for(let a=0;a<t;++a){let r={};for(let u in s.nodes)if(!s.getNode(u).isTerminal)r[u]=L(s,u,H(f[u]),l);s.setNodeUtilities(r)}}function of(s,f,l,t){for(let a=0;a<t;++a)for(let r in s.nodes)s.getNode(r).utility=je(s,r,l)}function hf(s,f,l,t){for(let a=0;a<t;++a){let r={};for(let u in s.nodes)r[u]=je(s,u,l);s.setNodeUtilities(r)}}function Ds(s,f,l){let t=!1;for(let a in s.nodes){if(s.getNode(a).isTerminal)continue;let r=null,u=-1/0;for(let n of s.neighbors(a)){let i=L(s,a,n,l);if(i===u);else if(i>u)r=n,u=i}if(H(f[a])!==r)f[a].length=0,f[a].push(r),t=!0}return t}function hs(s,f,l=!1,t=!1,a=10,r=!0){if(r)ws(s);let u=is(s),n;if(l&&t)n=nf;else if(l&&!t)n=wf;else if(!l&&t)n=of;else n=hf;let i=!0;while(i)n(s,u,f,a),i=Ds(s,u,f);return n(s,u,f,a),Ds(s,u,f),os(s,f)}class $ extends oe{visitedCount;sumPercentCompleted;depth;designerReward;playerReward;constructor(s,f,l,t,a,r){super(s,f,l,t,a);this.designerReward=f,this.playerReward=0,this.depth=r,this.visitedCount=1,this.sumPercentCompleted=1}updateReward(){this.reward=this.designerReward*this.visitedCount}}var o=new We;o.addNode(new $(P,0,0,!1,[],-1));o.addNode(new $(p,-1,0,!0,[],-1));o.addNode(new $(re,1,0,!0,[],-1));o.addNode(new $("1-a",-0.95,0,!1,[],1));o.addNode(new $("2-a",-0.925,0,!1,[],2));o.addNode(new $("2-b",-0.925,0,!1,[],2));o.addNode(new $("3-a",-0.9,0,!1,[],3));o.addNode(new $("3-b",-0.9,0,!1,[],3));o.addNode(new $("4-a",-0.825,0,!1,[],4));o.addNode(new $("4-b",-0.825,0,!1,[],4));o.addNode(new $("5-a",-0.8,0,!1,[],5));o.addNode(new $("5-b",-0.8,0,!1,[],5));o.addNode(new $("5-c",-0.8,0,!1,[],5));o.addNode(new $("6-a",-0.775,0,!1,[],6));o.addNode(new $("7-a",-0.75,0,!1,[],7));o.addNode(new $("6-b",-0.775,0,!1,[],6));o.addNode(new $("1-b",-0.95,0,!1,[],1));o.addDefaultEdge(P,"1-a",[["1-a",0.99],[p,0.01]]);o.addDefaultEdge("1-a","2-b",[["2-b",0.99],[p,0.01]]);o.addDefaultEdge("1-a","2-a",[["2-a",0.99],[p,0.01]]);o.addDefaultEdge("2-a","3-a",[["3-a",0.99],[p,0.01]]);o.addDefaultEdge("2-b","3-b",[["3-b",0.99],[p,0.01]]);o.addDefaultEdge("3-a","4-b",[["4-b",0.99],[p,0.01]]);o.addDefaultEdge("3-a","4-a",[["4-a",0.99],[p,0.01]]);o.addDefaultEdge("3-b","4-b",[["4-b",0.99],[p,0.01]]);o.addDefaultEdge("3-b","4-a",[["4-a",0.99],[p,0.01]]);o.addDefaultEdge("4-a","5-b",[["5-b",0.99],[p,0.01]]);o.addDefaultEdge("4-a","5-a",[["5-a",0.99],[p,0.01]]);o.addDefaultEdge("4-a","5-c",[["5-c",0.99],[p,0.01]]);o.addDefaultEdge("4-b","5-b",[["5-b",0.99],[p,0.01]]);o.addDefaultEdge("4-b","5-a",[["5-a",0.99],[p,0.01]]);o.addDefaultEdge("4-b","5-c",[["5-c",0.99],[p,0.01]]);o.addDefaultEdge("5-a","6-a",[["6-a",0.99],[p,0.01]]);o.addDefaultEdge("5-a","6-b",[["6-b",0.99],[p,0.01]]);o.addDefaultEdge("5-b","6-a",[["6-a",0.99],[p,0.01]]);o.addDefaultEdge("5-b","6-b",[["6-b",0.99],[p,0.01]]);o.addDefaultEdge("5-c","6-a",[["6-a",0.99],[p,0.01]]);o.addDefaultEdge("5-c","6-b",[["6-b",0.99],[p,0.01]]);o.addDefaultEdge("6-a","7-a",[["7-a",0.99],[p,0.01]]);o.addDefaultEdge("7-a","end",[["end",0.99],[p,0.01]]);o.addDefaultEdge("6-b","7-a",[["7-a",0.99],[p,0.01]]);o.addDefaultEdge(P,"1-b",[["1-b",0.99],[p,0.01]]);o.addDefaultEdge("1-b","2-b",[["2-b",0.99],[p,0.01]]);o.addDefaultEdge("1-b","2-a",[["2-a",0.99],[p,0.01]]);var Ae={"1-a":["------------XXX-","-------------T--","----------------","----------------","----------------","----------------","----------------","----------------","-----X-C-----X--","--------------b-","-----------o----","--------o-XX----","------o-XXXX----","------XXXXXX----","XXXXXXXXXXXX^XXX"],"2-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-------XXXXXXXX-------","----------------------","-------V--o---V-----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"2-b":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-----------o----------","--------------------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"3-a":["----------------------","----------------------","----------------------","----------------------","-----------o----------","----------------------","---------XXXXX--------","-----------o----------","----------------------","-------X-H-----X------","---XX--XXXXXXXXX--XX--","----------------------","-------V---o---V----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"3-b":["----------------------","----------------------","----------------------","----------------------","----------o-----------","----------------------","--------XXXXX---------","--------V---V---------","----------o-----------","----------------------","------XXXXXXXXX-------","----------------------","----------o---------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"4-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------XXX---","-----------------V----","-------X---XX-----V---","------XX------o-V---o-","-----XXX--------------","XXXXXXXX---XXXXXXXXXXX"],"4-b":["--------------------XX","--------------------XX","--------------------XX","--------------------XX","--------------------XX","-----------X-H---o--XX","-----------------o--XX","---------o----------XX","-----------XXXXXXX--XX","--------------------XX","-------X------------XX","------XXX-----------XX","-----XXXXX-----------o","----XXXXXXX-----------","XXXXXXXXXXXXXXXX--XXXX"],"5-a":["--------XXXXXXXXXXXXXX--------","-------------------ooX--------","---------------------X--------","---------------------X--------","------------------XXXX--------","------------------X-----------","-----------o--XXXXX-----------","------------------------------","---------XX-----------------o-","------------------------------","--------------XX---XXX----XXXX","------------------------------","----------XX------------------","------------------------------","XXXXXXXX----------------------"],"5-b":["------------------------------","-o----------------------------","------------------------------","XXX---------------------------","------------------------------","-----XXX----------------------","------------------------------","-----------XXX----------------","-o--------------------------o-","------XXX---------------------","XXX-----------------------XXXX","------------XXX-------XX------","------------------XX----------","------------------------------","XXXXXXXX---XXXXX--------------"],"5-c":["o-----------------------------","------------------------------","X---XX------------------------","------------------------------","------------------------------","XX----------------------------","--------XXXXX-----------------","--------Xoo-------------------","XXX-----Xoo----o------------o-","--------X---------------------","--------XXX---XX----XX----XXXX","XXXX--------------------------","------------------------------","------------------------------","XXXXXXXX----------------------"],"6-a":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","-------oo---XXXXXXXX----------","-o----------XXXXXXXX----------","------XXXX--XXXXXXXX----------","--------------o---------------","XXXX--------------------------","-------------XXXX-----------o-","---------------------XX-------","XXXXXXXX-----------------XXXXX"],"7-a":["-------------------V---------------","-----------------o---o-------------","------------X-H------------H--XXX--","-----V------XXXXXXXXXXXXXXXXXXXXX--","--------XX----o--------------------","-----------------------------------","-----------XXXXXX---Ho-------------","-----------------------------------","-------------V------XX--------H----","-----------------------------------","XX--------o------XXXXX----H--------","-----------------------------------","---X----H----H-X-----------------o-","---XXXXXXXXXXXXX-------------------","XXXX--------------------------XXXXX"],end:["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----oooooooooooooooooo","XXXXXXXXXXXXXXXXXXXXXX"],"6-b":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX---o------","----------XXXXXXXXXX----------","-o--------XXXXXXXXXX----------","----------XXXXXXXXXX---X------","----------XXXXXXXXXX----------","XXX-------XXXXXXXXXXX---------","------XX-----oooo-----------o-","------------------------------","XXXX--------XXXXXX---XXX--XXXX"],"1-b":["---------XXX----","----------T-----","----------------","----------------","----------------","----------------","----------------","----X-----X-----","-------oo------C","----------------","-------XX-------","----o-XXXX-o----","-----XXXXXX-----","---XXXXXXXXXX---","XXXXXXXXXXXXXXXX"]};class e{moveRight;moveLeft;jump;constructor(s,f,l){this.moveRight=s,this.moveLeft=f,this.jump=l}}var df=[new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0)],Yl=df.length;var gs=0.049980000000000004,ds=3,Re={"1-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"2-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"2-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"3-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1)],"3-b":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"4-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"4-b":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"5-b":[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-c":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"6-a":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"7-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1)],end:[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"6-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"1-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)]};class he{startCol=0;offsetX=0;colsPerScreen=Math.ceil(V/v);update(s){let f=s-this.colsPerScreen/2;this.startCol=Math.max(0,Math.floor(f)),this.offsetX=-f*v+this.startCol*v}columnToScreen(s){return(s-this.startCol)*v+this.offsetX}rowToScreen(s){return s*v}}class de{game;pos;type;dead=!1;velocity=new h(0,0);gravity=new h(0,100);leftX;rightX;constructor(s,f){this.pos=s,this.type=f}physicsUpdate(s){He(this.velocity,J(this.gravity,s)),this.velocity.y=Math.min(this.velocity.y,30),He(this.pos,J(this.velocity,s)),this.updateLeftRight()}}class b extends de{size;constructor(s,f,l){super(s,l);this.size=f,this.leftX=this.pos.x,this.rightX=this.pos.x+f.x}updateLeftRight(){this.leftX=this.pos.x,this.rightX=this.pos.x+this.size.x}collision(s){if(s instanceof b){if(Xs(this.pos,this.size,s.pos,s.size))this.handleCollision(s),s.handleCollision(this)}else if(s instanceof xe){if(Xe(this.pos,this.size,s.pos,s.r))this.handleCollision(s),s.handleCollision(this)}}}class xe extends de{r;constructor(s,f,l){super(s,l);this.r=f,this.leftX=this.pos.x-f,this.rightX=this.pos.x+f}updateLeftRight(){this.leftX=this.pos.x-this.r,this.rightX=this.pos.x+this.r}collision(s){if(s instanceof b){if(Xe(s.pos,s.size,this.pos,this.r))this.handleCollision(s),s.handleCollision(this)}}}var Q=0,B=1,Ye=2,C=3,Ce=4,O=5;class w{static playerID;static version;static condition;static result;static coinsCollected;static coinsInLevel;static timePlayed;static levels;static order;static pathX;static pathY;static velX;static velY;static init(){if(location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="")w.playerID="local-dev";else if(new URLSearchParams(window.location.search).has("id"))w.playerID=crypto.randomUUID();else w.playerID="browser-dev";console.log(w.playerID),w.version="0.0.0",w.result="none",w.coinsCollected=0,w.timePlayed=0,w.order=0,w.pathX=[],w.pathY=[],w.velX=[],w.velY=[]}static pushPlayerPositionAndVelocity(s,f){this.pathX.push(le(s.x,4)),this.pathY.push(le(s.y,4)),this.velX.push(le(f.x,4)),this.velY.push(le(f.y,4))}static getLog(){return{id:w.playerID,version:w.version,condition:w.condition,result:w.result,coinsCollected:w.coinsCollected,coinsInLevel:w.coinsInLevel,timePlayed:w.timePlayed,order:w.order,pathX:w.pathX,pathY:w.pathY,velX:w.velX,velY:w.velY}}static resetLog(){++w.order,w.result="none",w.coinsCollected=0,w.coinsInLevel=0,w.timePlayed=0,w.pathX=[],w.pathY=[],w.velX=[],w.velY=[]}}class pe extends xe{angle;start;constructor(s,f,l,t){super(s,Cs,C);this.gravity.y=0,this.angle=f,this.start=l,this.velocity=t}static defaultConstructor(s){return new pe(s,0,m(s),new h(0,0))}clone(){return new pe(m(this.pos),this.angle,this.start,m(this.velocity))}update(s){this.angle+=s,this.velocity.x=2*Ee*Math.cos(this.angle),this.velocity.y=Ee*Math.sin(this.angle)}handleCollision(s){if(s.type===Q)w.result="lost - circle enemy";else this.dead=s.type===O}render(s,f){s.fillStyle=z,s.beginPath(),s.arc(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),_e,0,Ps),s.fill()}}class be extends b{constructor(s,f){super(s,cs,O);this.gravity.y=0,this.velocity=f}static defaultConstructor(s,f){let l=A(f,s);return Fs(l),vs(l,Hs),new be(s,l)}clone(){return new be(m(this.pos),m(this.velocity))}update(s){}handleCollision(s){if(s.type===Q)w.result="lost - bullet";this.dead=!0}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Gs,Is)}}class Oe extends b{playerPos;color;time;state;constructor(s,f=0,l=0){super(s,Y,B);this.color=q,this.gravity.y=0,this.time=f,this.state=l}clone(){return new Oe(m(this.pos),this.time,this.state)}update(s){switch(this.state){case 0:{if(S(this.pos,this.game.protaganist().pos)<=Ms)this.color=z,this.state=1;break}case 1:{if(this.time+=s,this.time>=Ks)this.time=0,this.state=2;break}case 2:{this.state=0,this.color=q;let f=this.game.protaganist().pos,l=Ge(this.pos,f),t=Math.cos(l),a=Math.sin(l);this.game.dynamicEntities.push(be.defaultConstructor(new h(this.pos.x+(Ze+I)*t,this.pos.y+(Ze+I)*a),f));break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=Z/2,r=2*a,u=new h(l+a,t);s.lineWidth=2,s.beginPath(),s.arc(u.x,u.y,a,0,Math.PI),s.stroke();let n=Ge(this.pos,this.game.protaganist().pos),i=Math.cos(n),x=Math.sin(n);s.lineWidth=4,s.beginPath(),s.moveTo(u.x+a*i,u.y+a*x),s.lineTo(u.x+r*i,u.y+r*x),s.stroke(),s.lineWidth=1}}class Se extends b{constructor(s){super(s,Y,B)}clone(){throw new Error("Block.clone should not have been called!")}update(s){}handleCollision(s){}render(s,f){s.lineWidth=1.3,s.strokeStyle=K,s.strokeRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Z,G)}}var xf=1000,pf=2;class ye extends b{minY;maxY;yMod;timeGone;constructor(s,f,l,t,a,r){super(s,Ve,Ce);this.gravity.y=0,this.yMod=f,this.minY=l,this.maxY=t,this.velocity.y=a,this.timeGone=r}static defaultConstructor(s){return ze(s,0.25),new ye(s,0.25,s.y+0.15,s.y+0.3,0.25,0)}clone(){return new ye(m(this.pos),this.yMod,this.minY,this.maxY,this.velocity.y,this.timeGone)}update(s){if(this.pos.y>100){if(this.timeGone+=s,this.timeGone>=pf)this.pos.y=this.maxY,this.velocity.y=-this.yMod}else if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===Q)this.pos.y=xf,this.timeGone=0}render(s,f){s.fillStyle=ks,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),_,E)}}class ee extends b{minY;maxY;yMod;constructor(s,f,l,t,a,r=!1){super(s,Ve,Ye);this.gravity.y=0,this.yMod=f,this.maxY=l,this.minY=t,this.velocity.y=a,this.dead=r}static defaultConstructor(s){return s.x+=0.25,new ee(s,0.1,s.y+0.3,s.y+0.15,0.1)}clone(){return new ee(m(this.pos),this.yMod,this.maxY,this.minY,this.velocity.y,this.dead)}update(s){if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===Q)qs(),this.dead=!0}render(s,f){s.fillStyle=q,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),_,E)}}class me extends b{maxColumns;constructor(s,f,l){super(s,Rs,C);this.maxColumns=f,this.velocity.x=l,this.gravity.y=0}static defaultConstructor(s,f){return ze(s,0.25),new me(s,f,3)}clone(){return new me(m(this.pos),this.maxColumns,this.velocity.x)}update(s){this.velocity.x*=Qe(this.pos.x>=0&&this.pos.x<=this.maxColumns)}handleCollision(s){if(s.type===B){let f=A(F(this.pos,J(this.size,0.5)),F(s.pos,J(s.size,0.5))),l=F(this.size,s.size);if(J(l,0.5),Math.abs(f.x/this.size.x)>Math.abs(f.y/this.size.y))if(this.velocity.x*=-1,f.x<0)this.pos.x=s.pos.x-this.size.x;else this.pos.x=s.pos.x+s.size.x}else if(s.type===O)this.dead=!0;else if(s.type===Q)w.result="lost - horizontal enemy"}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),te,ae)}}class ve extends b{time;constructor(s,f,l){super(s,f,C);this.gravity.y=0,this.time=l}static defaultConstructor(s,f){return s.x+=(I-Le)/2,new ve(s,new h(Le,f),0)}clone(){return new ve(this.pos,this.size,this.time)}update(s){Vs(),this.time+=s,this.dead=this.time>=ke}handleCollision(s){if(s.type===Q)w.result="lost - laser"}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Os,this.size.y*v)}}class Ke extends b{color;time=0;state=0;constructor(s,f=0,l=0){super(s,Y,B);this.color=q,this.gravity.y=0,this.state=f,this.time=l}clone(){return new Ke(m(this.pos),this.state,this.time)}update(s){if(S(this.pos,this.game.protaganist().pos)>150)this.state=0;switch(this.time+=s,this.state){case 0:{if(this.time>=ke)this.time=0,this.state=1,this.color=q;break}case 1:{if(this.time>=Ss){this.time=0,this.state=0,this.color=z;let f=this.game.raycastUp(this.pos),l=f===null?R:this.pos.y-f.pos.y-1;this.game.dynamicEntities.push(ve.defaultConstructor(new h(this.pos.x,this.pos.y-l),l))}break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=t+G;s.beginPath(),s.moveTo(l,a),s.lineTo(l+Z/2,t),s.lineTo(l+Z,a),s.lineTo(l,a),s.stroke(),s.strokeStyle=K,s.beginPath(),s.moveTo(l,t),s.lineTo(l+Z,t),s.stroke()}}var _s=6,bf=0.4;class Me extends b{movingRight;movingLeft;moveMod;jumpTime;squash;stretch;coinsCollected;maxColumn;agent;constructor(s,f,l,t=!1,a=!1,r=0,u=0,n=1,i=1,x=0,X=0){super(s,Ws,Q);this.velocity=f,this.agent=l,this.movingRight=t,this.movingLeft=a,this.moveMod=r,this.jumpTime=u,this.squash=n,this.stretch=i,this.coinsCollected=x,this.maxColumn=X}clone(){return new Me(m(this.pos),m(this.velocity),this.agent,this.movingRight,this.movingLeft,this.moveMod,this.jumpTime,this.squash,this.stretch,this.coinsCollected,this.maxColumn)}update(s){if(this.pos.y>Bs){w.result="lost - fell",this.dead=!0;return}if(this.movingLeft=!1,this.movingRight=!1,this.velocity.x=0,this.agent.update(s),this.agent.movingRight)this.movingRight=!0,this.velocity.x=_s,this.moveMod=4;if(this.agent.movingLeft)if(this.movingRight)this.movingRight=!1,this.velocity.x=0;else this.movingLeft=!0,this.velocity.x=-_s,this.moveMod=4;if(this.jumpTime<bf&&this.agent.jumping){if(this.jumpTime===0)this.velocity.y=-15;else if(this.jumpTime<0.2)this.velocity.y-=2;this.velocity.y=Math.max(-20,this.velocity.y),this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s),this.jumpTime+=s}else if(this.squash!=this.stretch)this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s);this.maxColumn=Math.max(this.pos.x,this.maxColumn)}handleCollision(s){switch(s.type){case B:{let f=s,l=A(F(this.pos,J(this.size,0.5)),F(f.pos,J(f.size,0.5))),t=F(this.size,f.size);J(t,0.5);let a=Math.abs(Math.atan(l.y/l.x));if(!(a<1.03&&a>0.6)&&Math.abs(l.x/this.size.x)>Math.abs(l.y/this.size.y))if(l.x<0)this.pos.x=f.pos.x-this.size.x;else this.pos.x=f.pos.x+f.size.x;else if(l.y>0)this.pos.y=f.pos.y+f.size.y;else this.pos.y=f.pos.y-this.size.y,this.velocity.y=0,this.jumpTime=0,this.stretch=1.01,this.squash=0.99;break}case Ye:{++this.coinsCollected;break}case O:case C:{this.dead=!0;break}case Ce:{this.jumpTime=0,this.velocity.y=Math.min(this.velocity.y,0);break}default:{console.warn(`Protaganist has an unhandled collision type: ${s.type}.`);break}}}render(s,f){s.fillStyle=Zs;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=ge*this.squash,r=De*this.stretch;if(this.movingRight){let u=new Path2D;u.moveTo(l,t),u.lineTo(l-this.moveMod,t+a),u.lineTo(l+r-this.moveMod,t+a),u.lineTo(l+r,t),u.closePath(),s.fill(u,"evenodd")}else if(this.movingLeft){let u=new Path2D;u.moveTo(l,t),u.lineTo(l+this.moveMod,t+a),u.lineTo(l+r+this.moveMod,t+a),u.lineTo(l+r,t),u.closePath(),s.fill(u,"evenodd")}else s.fillRect(l,t,r,a)}}class $e extends b{constructor(s,f){super(s,Ys,C);this.velocity.y=f,this.gravity.y=0}static defaultConstructor(s){return s.x+=0.25,s.y+=0.1,new $e(s,3)}clone(){return new $e(m(this.pos),this.velocity.y)}update(s){this.velocity.y*=Qe(this.pos.y>0&&this.pos.y<=R)}handleCollision(s){if(s.type===B){let f=A(F(this.pos,J(this.size,0.5)),F(s.pos,J(s.size,0.5))),l=F(this.size,s.size);if(J(l,0.5),Math.abs(f.x/this.size.x)<Math.abs(f.y/this.size.y))if(this.velocity.y*=-1,f.y>0)this.pos.y=s.pos.y+s.size.y;else this.pos.y=s.pos.y-this.size.y}else if(s.type===O)this.dead=!0;else if(s.type===Q)w.result="lost - vertical enemy"}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),ae,te)}}class se{staticEntitiesRenderLocations=[];staticEntities;dynamicEntities=[];coins=[];constructor(s,f){if(s===null)return;let l=s.length;if(l!==R){console.error("Level should have 15 rows!");return}this.dynamicEntities.push(new Me(new h(2,12),new h(0,0),Ts(f,this)));let t=s[0].length,a,r;this.staticEntities=[];for(a=0;a<l;++a){let n=new Array(t);n.fill(!1),this.staticEntities.push(n)}for(a=0;a<l;++a){let n=s[a];if(t!==n.length){console.error(`Every row in the level should have the same number of columns! (${t} != ${n.length}).`);return}for(r=0;r<t;++r){let i=n[r];if(i==="X")this.staticEntities[a][r]=!0,this.staticEntitiesRenderLocations.push(new h(r,a));else if(i==="^")this.dynamicEntities.push(new Ke(new h(r,a)));else if(i==="T")this.dynamicEntities.push(new Oe(new h(r,a)));else if(i==="o"){let x=ee.defaultConstructor(new h(r,a));this.dynamicEntities.push(x),this.coins.push(x)}else if(i=="b")this.dynamicEntities.push(ye.defaultConstructor(new h(r,a)));else if(i==="H")this.dynamicEntities.push(me.defaultConstructor(new h(r,a),t));else if(i==="V")this.dynamicEntities.push($e.defaultConstructor(new h(r,a)));else if(i==="C")this.dynamicEntities.push(pe.defaultConstructor(new h(r,a)));else if(i!=="-")console.error(`Unhandled tile type: ${i}`)}}for(let n=0;n<this.dynamicEntities.length;++n)this.dynamicEntities[n].game=this;let u=this.dynamicEntities[0].pos;this.coins.sort((n,i)=>{return S(u,n.pos)-S(u,i.pos)})}clone(){let s=new se(null,ie),f=this.dynamicEntities.length,l=0;for(;l<f;++l){let a=this.dynamicEntities[l];if(a.dead)continue;let r=a.clone();if(r.game=s,s.dynamicEntities.push(r),r instanceof ee)s.coins.push(r)}let t=s.dynamicEntities[0].pos;return s.coins.sort((a,r)=>{return S(t,a.pos)-S(t,r.pos)}),s.staticEntities=this.staticEntities,s}hash(){let s=this.dynamicEntities[0].pos;return Math.round(s.x*100)+Math.round(s.y*100)*1e6}update(s,f=1){s=s/f;for(let l=0;l<f;++l){let t=this.dynamicEntities.length;for(let r=0;r<t;++r){let u=this.dynamicEntities[r];u.update(s),u.physicsUpdate(s)}let a=Array.from(this.dynamicEntities.keys()).sort((r,u)=>this.dynamicEntities[r].leftX-this.dynamicEntities[u].leftX);for(let r=0;r<a.length;++r){let u=this.dynamicEntities[a[r]];for(let n=r+1;n<a.length;++n){let i=this.dynamicEntities[a[n]];if(i.leftX>u.rightX)break;u.collision(i)}if(u instanceof b){let n=[u.pos,F(u.pos,new h(Y.x,0)),F(u.pos,new h(0,Y.y)),F(u.pos,Y)];for(let i=0;i<4;++i){let x=zs(n[i]);if(x.y>=0&&x.y<this.staticEntities.length&&x.x>=0&&x.x<=this.staticEntities[0].length&&this.staticEntities[x.y][x.x])u.collision(new Se(x))}}}for(let r=0;r<t;++r)if(this.dynamicEntities[r].dead){if(r==0)return;this.dynamicEntities.splice(r,1),--t}}}render(s,f){f.update(this.dynamicEntities[0].pos.x);let l=this.staticEntitiesRenderLocations.length,t=0;s.lineWidth=1.3,s.strokeStyle=K;for(;t<l;++t){let a=this.staticEntitiesRenderLocations[t];s.strokeRect(f.columnToScreen(a.x),f.rowToScreen(a.y),Z,G)}l=this.dynamicEntities.length;for(t=0;t<l;++t)this.dynamicEntities[t].render(s,f)}state(){let s=this.dynamicEntities[0];if(s.coinsCollected>=this.coins.length)return qe;if(s.dead)return Ue;return g}protaganist(){return this.dynamicEntities[0]}fitness(){return 1-this.dynamicEntities[0].coinsCollected/this.coins.length}raycastUp(s){let f=m(s);f.y-=1;while(f.y>=0){if(this.staticEntities[f.y][f.x])return new Se(f);f.y-=1}return null}}var yf=gs/ds;class xs extends W{ctx;transitionScene;camera;game;actions=[];actionIndex;frame;time;previousKey="";constructor(s,f){super();this.ctx=s,this.transitionScene=f,this.camera=new he}onEnter(){let s=Ie(Re);while(s==this.previousKey)s=Ie(Re);this.previousKey=s,this.actions=Re[s],this.game=new se(Ae[s],ie),this.actionIndex=0,this.frame=0,this.time=0}update(s){if(this.game.state()!==g)this.onEnter();if(y.isKeyDown(14))this.transitionScene.targetScene=M,this.changeScene=j;if(this.time+=s,this.time>=0.0166666){if(this.time=this.time-0.016666,this.frame>=ds)this.frame=0,++this.actionIndex;++this.frame,this.game.protaganist().agent.set(this.actions[this.actionIndex]),this.game.update(yf)}}render(){this.ctx.clearRect(0,0,V,k),this.game.render(this.ctx,this.camera),this.ctx.fillStyle="black",this.ctx.fillRect(240,60,240,47),this.ctx.fillRect(210,234,295,39),this.ctx.fillStyle=q,this.ctx.font="48px Arial",this.ctx.fillText("Recformer",247,100),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to start",220,k*0.55)}_onExit(){}}class ps{playerIsOnLastLevel=!1;keys;columnsPerLevel;lossesInARow=0;playerWonLastRound=!1;constructor(){}playerBeatGame(){return this.playerIsOnLastLevel}update(s,f){let l=this.keys.length,t=[];if(s){for(let r=0;r<l;++r)t.push(1);this.lossesInARow=0}else{let r=f;for(let u=0;u<l;++u)if(r>this.columnsPerLevel[u])t[u]=1,r-=this.columnsPerLevel[u];else{t[u]=r/this.columnsPerLevel[u];break}}let a=t.length;for(let r=0;r<a;++r){let u=t[r],n=this.keys[r],i=o.getNode(n);if(u===1){if(!o.hasEdge(P,n))o.addDefaultEdge(P,n,[[n,1],[p,0]])}++i.visitedCount,i.sumPercentCompleted+=u,i.updateReward();let x=i.sumPercentCompleted/i.visitedCount,X=1-x;o.mapEdges((N)=>{if(N.tgt===n)N.probability[0][1]=x,N.probability[1][1]=X})}if(!s){++this.lossesInARow;for(let r=0;r<this.lossesInARow-1;++r){let u=o.getNode(P).neighbors,n=u.length;if(n===1)break;let i="",x=-1e4;for(let X=0;X<n;++X){let N=u[X],fe=o.getNode(N).depth;if(fe>x)i=N,x=fe}console.log("removing edge:",i,x),o.removeEdge(P,i)}}this.playerWonLastRound=s}get(s){let f=hs(o,0.95,!0,!0,20);if(this.columnsPerLevel=[],this.playerWonLastRound)this.keys=[H(f[P])];else this.keys=[P];for(let a=0;a<s;++a){let r=H(f[this.keys[a]]);if(this.keys.push(r),r===re)break}this.keys.splice(0,1),this.playerIsOnLastLevel=this.keys.includes(re);let l=Array(R).fill(""),t=this.keys.length;for(let a=0;a<t;++a){let r=Ae[this.keys[a]];this.columnsPerLevel.push(r[0].length);for(let u=0;u<R;++u)l[u]+=r[u]}return l}}class bs{runTime;callback;startTime;constructor(s,f){this.runTime=s;this.callback=f;this.startTime=0}update(s){if(this.startTime+=s,this.runTime<=this.startTime)this.startTime=0,this.callback()}}class Fe{static getCondition(s){if(!D){s(Be);return}fetch("/condition",{method:"POST"}).then((f)=>{if(f.status===200)f.text().then((l)=>{s(l)});else s(Be)}).catch(()=>{s(Be)})}static submitAttempt(){if(!D)return;fetch("/log",{method:"POST",body:JSON.stringify(w.getLog()),mode:"no-cors",headers:{"Content-Type":"application/json"}}).then((s)=>{console.log(s.status),console.log(s)})}}class ys extends W{ctx;transitionScene;agentType;game;camera;levelDirector;timer;timePlayed;constructor(s,f,l,t){super();this.ctx=s,this.agentType=t,this.transitionScene=f,this.camera=new he,this.levelDirector=new ps}onEnter(){let s=this.levelDirector.get(Ns);this.game=new se(s,this.agentType),this.timer=new bs(0.1,()=>{let f=this.game.dynamicEntities[0];w.pushPlayerPositionAndVelocity(f.pos,f.velocity)}),this.timePlayed=0,w.coinsInLevel=this.game.coins.length}update(s){this.game.update(s,2),this.timer.update(s),this.timePlayed+=s;let f=this.game.state();switch(f){case g:break;case Ue:{w.timePlayed=this.timePlayed,w.coinsCollected=this.game.dynamicEntities[0].coinsCollected,this.transitionScene.targetScene=Ne,this.changeScene=j;break}case qe:{if(w.result="won",w.timePlayed=this.timePlayed,w.coinsCollected=this.game.dynamicEntities[0].coinsCollected,this.levelDirector.playerBeatGame())this.transitionScene.targetScene=ne;else this.transitionScene.targetScene=we;this.changeScene=j;break}default:{console.error(`Unhandled game state type: ${f}`);break}}}render(){this.ctx.clearRect(0,0,V,k),this.game.render(this.ctx,this.camera)}_onExit(){if(console.log(w.result),w.result!=="none")Fe.submitAttempt();w.resetLog();let s=this.game.fitness();console.log(`Fitness: ${s}`),this.levelDirector.update(this.transitionScene.targetScene===we,s)}}window.addEventListener("load",()=>{Us(()=>{Fe.getCondition((s)=>{w.condition=s,y.init(),w.init();let f=document.createElement("canvas");f.setAttribute("id","canvas"),f.width=V,f.height=k;let l=f.getContext("2d");document.getElementById("game").appendChild(f);let t=new Te,a=new ts(l);t.registerScene(j,a),t.registerScene(ue,new xs(l,a)),t.registerScene(M,new ys(l,a,s,us)),t.registerScene(ne,new es(l)),t.registerScene(we,new ss(l,a)),t.registerScene(Ne,new fs(l,a));let r=300,u=document.getElementById("time");if(!D)u.style.display="none";let n=t.getScene(ue);n.onEnter();let i=0,x=(X)=>{let N=Math.min(0.05,(X-i)/1000);if(i=X,D)if(r>0){r-=N;let ms=Math.floor(r/60),Es=Math.round(r-ms*60);u.innerHTML=`${ms}:${Es}`}else n.onExit(),n=t.getScene(ne),n.onEnter();n.update(N),n.render();let fe=n.changeScene;if(fe!==void 0)n.onExit(),n=t.getScene(fe),n.onEnter();window.requestAnimationFrame(x)};window.requestAnimationFrame(x)})})});
