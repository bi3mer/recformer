class i{x;y;constructor(s,f){this.x=s,this.y=f}}function b(s){return new i(s.x,s.y)}function $(s,f){return new i(s.x+f.x,s.y+f.y)}function Re(s,f){s.x+=f.x,s.y+=f.y}function W(s,f){return new i(s.x-f.x,s.y-f.y)}function xe(s,f){s.x+=f,s.y+=f}function V(s,f){return new i(s.x*f,s.y*f)}function ws(s,f){s.x*=f,s.y*=f}function is(s){return s.x*s.x+s.y*s.y}function Gs(s){return Math.sqrt(s.x*s.x+s.y*s.y)}function os(s){let f=Gs(s);s.x/=f,s.y/=f}function Y(s,f){let l=s.x-f.x,t=s.y-f.y;return l*l+t*t}function Ye(s,f){return Math.atan2(f.y-s.y,f.x-s.x)}function Xs(s){return new i(Math.floor(s.x),Math.floor(s.y))}function g(s,f){let l=Math.pow(10,f);return Math.round(s*l)/l}function ds(s,f){return Math.floor(Math.random()*(f-s+1)+s)}function ye(s){return s*2-1}function be(){return Math.random()<0.5}function hs(s,f,l){return Math.min(Math.max(s,f),l)}function me(s,f,l,t){return is(W(l,new i(hs(l.x,s.x,s.x+f.x),hs(l.y,s.y,s.y+f.y))))<t*t}function ps(s,f,l,t){let{x:a,y:r}=s,n=a+f.x,o=r+f.y,h=l.x,x=l.y,S=h+t.x,pe=x+t.y;return a<S&&n>h&&r<pe&&o>x}function Ae(s){let f=Object.keys(s);return f[Math.floor(Math.random()*f.length)]}var Ce=typeof window!=="undefined",Q=[];function xs(s){if(Ce){Q.push(new Audio("audio/coin_1.wav")),Q.push(new Audio("audio/coin_2.wav")),Q.push(new Audio("audio/coin_3.wav")),Q.push(new Audio("audio/coin_4.wav")),Q.push(new Audio("audio/coin_5.wav")),Q.push(new Audio("audio/laser.wav"));let f=()=>{let l=!0;for(let t=0;t<Q.length;++t)if(!Q[t].readyState){l=!1;break}if(l)Q[5].volume=0.4,s();else setTimeout(f,100)};f()}else s()}function ys(){if(Ce){let s=ds(0,4);Q[s].currentTime=0.15,Q[s].play()}}function bs(){if(Ce)Q[5].currentTime=0,Q[5].play()}var H;((X)=>{X[X.LEFT=0]="LEFT";X[X.RIGHT=1]="RIGHT";X[X.DOWN=2]="DOWN";X[X.UP=3]="UP";X[X.A=4]="A";X[X.D=5]="D";X[X.E=6]="E";X[X.G=7]="G";X[X.H=8]="H";X[X.I=9]="I";X[X.Q=10]="Q";X[X.R=11]="R";X[X.S=12]="S";X[X.W=13]="W";X[X.SPACE=14]="SPACE";X[X.ESCAPE=15]="ESCAPE";X[X.ENTER=16]="ENTER";X[X.SHIFT=17]="SHIFT";X[X.INVALID=18]="INVALID"})(H||={});class y{static _keys=[];static init(){for(let s=0;s<Object.keys(H).length;++s)y._keys.push(!1);window.addEventListener("keydown",y.onKeyDown),window.addEventListener("keyup",y.onKeyUp)}static isKeyDown(...s){let f=s.length;for(let l=0;l<f;++l)if(y._keys[s[l]])return!0;return!1}static keyStrToKey(s){switch(s){case"Down":case"ArrowDown":return 2;case"Up":case"ArrowUp":return 3;case"Right":case"ArrowRight":return 1;case"Left":case"ArrowLeft":return 0;case" ":case"Space":return 14;case"Escape":return 15;case"a":case"A":return 4;case"e":case"E":return 6;case"s":case"S":return 12;case"d":case"D":return 5;case"w":case"W":return 13;case"r":case"R":return 11;case"q":case"Q":return 10;case"g":case"G":return 7;case"h":case"H":return 8;case"i":case"I":return 9;case"Shift":return 17;case"Enter":return 16;default:return console.warn(`Unhandled key: ${s}.`),18}}static onKeyDown(s){let f=y.keyStrToKey(s.key);if(y._keys[f]=!0,f==2||f==3||f==0||f==1)s.preventDefault();return!1}static onKeyUp(s){return y._keys[y.keyStrToKey(s.key)]=!1,!1}static clear(){for(let s=0;s<y._keys.length;++s)y._keys[s]=!1}}class Se{scenes={};registerScene(s,f){if(this.scenes[s]===void 0)this.scenes[s]=f;else console.error(`Key "${s}" for scene already exists! Scene not added to SceneManager.`)}getScene(s){return this.scenes[s]}}var z="#fe546f";var J="#ffd080",A="#fffdff",ms="#0bffe6";var vs="#9696ff";var U=720,q=480,m=32,K=15,$s=K+2,zs=3,Fs=2*Math.PI,I=0,ve=1,$e=2,Ke=20,Me=30,Hs=Ke/m,Is=Me/m,Vs=new i(Hs,Is),k=31,M=31,O=k/m,Ts=M/m,N=new i(O,Ts),T=16,c=16,cs=T/m,Ds=c/m,ze=new i(cs,Ds),E=25,L=15,Qs=E/m,Js=L/m,Us=new i(Qs,Js),qs=new i(Js,Qs),Oe=10,ks=Oe/m,Ge=2.5,He=O/8,Zs=k/8,Fe=0.6,Ps=2,Bs=2.5,Ws=150,Ns=10,js=10,Rs=10,Ve=T/m,_s=c/m,Ys=new i(Ve,_s),Qe="start",As="end",d="death",Ie="error-condition";class P{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class Te extends P{ctx;constructor(s){super();this.ctx=s}onEnter(){this.ctx.clearRect(0,0,U,q),this.ctx.font="30px Arial",this.ctx.fillStyle=A,this.ctx.fillText("You won! Congratulations!",170,q/2),document.getElementById("time").style.display="none",document.getElementById("instructions").style.display="none",document.getElementById("studyOver").style.display="inline"}update(s){}render(){}_onExit(){}}var ee="main menu",C="game",se="player won",B="transition",Je="lost",fe="won";class ce extends P{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){y.clear(),this.ctx.fillStyle=J,this.ctx.font="48px Arial",this.ctx.fillText("YOU WON",250,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to keep going.",180,400)}update(s){if(y.isKeyDown(14))this.transitionScene.targetScene=C,this.changeScene=B}render(){}_onExit(){}}class De extends P{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){y.clear(),this.ctx.fillStyle=z,this.ctx.font="48px Arial",this.ctx.fillText("YOU LOST",243,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to try again.",195,400)}update(s){if(y.isKeyDown(14))this.transitionScene.targetScene=C,this.changeScene=B}render(){}_onExit(){}}class _e{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class ge extends _e{targetScene=ee;timer=0;ctx;constructor(s){super();this.ctx=s}onEnter(){}update(s){if(this.timer+=s,this.timer>0.5)this.changeScene=this.targetScene}render(){let s=this.timer/0.5;this.ctx.fillStyle=`rgba(0,0,0, ${s})`,this.ctx.fillRect(0,0,U,q)}_onExit(){this.timer=0}}class G{movingRight=!1;movingLeft=!1;jumping=!1;set(s){this.movingRight=s.moveRight,this.movingLeft=s.moveLeft,this.jumping=s.jump}}class Ee extends G{time=0;name(){return"random"}update(s){if(this.time+=s,this.time>0.2)this.time=0,this.movingRight=be(),this.movingLeft=be(),this.jumping=be()}}class Ue extends G{name(){return"player"}update(s){this.movingRight=y.isKeyDown(5,1),this.movingLeft=y.isKeyDown(4,0),this.jumping=y.isKeyDown(14,3,13)}}class Le extends G{name(){return"empty"}update(s){}}var Es=0,es=1,le=2;function Cs(s,f){switch(s){case Es:return new Ee;case es:return new Ue;case le:return new Le;default:return console.error(`Unhandled agent type: ${s}. Defaulted to player agent.`),new Ue}}class ss{src;tgt;probability;constructor(s,f,l){this.src=s,this.tgt=f,this.probability=l}}class te{name;reward;utility;isTerminal;neighbors;constructor(s,f,l,t,a){this.name=s,this.reward=f,this.utility=l,this.isTerminal=t,this.neighbors=a}}class qe{nodes;edges;constructor(){this.nodes={},this.edges={}}getNode(s){return this.nodes[s]}hasNode(s){return s in this.nodes}addNode(s){this.nodes[s.name]=s}addDefaultNode(s,f=1,l=0,t=!1,a=null){if(a==null)a=[];this.nodes[s]=new te(s,f,l,t,a)}removeNode(s){let f=[];for(let l of Object.values(this.edges)){if(l.src==s||l.tgt==s)f.push(l);let t=l.probability,a=-1;for(let h=0;h<t.length;h++){let[x,S]=t[h];if(x==s){a=h;break}}if(a==-1)continue;let r=t[a][1];t.splice(a,1);let n=t.length,o=r/n;l.probability=t.map(([h,x])=>[h,x+o])}for(let l of f)this.removeEdge(l.src,l.tgt);delete this.nodes[s]}getEdge(s,f){return this.edges[`${s},${f}`]}hasEdge(s,f){return`${s},${f}`in this.edges}addEdge(s){this.edges[`${s.src},${s.tgt}`]=s;let f=this.nodes[s.src].neighbors;if(!f.includes(s.tgt))f.push(s.tgt)}addDefaultEdge(s,f,l=null){if(l==null)l=[[f,1]];this.addEdge(new ss(s,f,l))}removeEdge(s,f){let l=this.nodes[s],t=l.neighbors.indexOf(f);l.neighbors.splice(t,1),delete this.edges[`${s},${f}`]}neighbors(s){return this.nodes[s].neighbors}setNodeUtilities(s){for(let[f,l]of Object.entries(s))this.nodes[f].utility=l}utility(s){return this.nodes[s].utility}reward(s){return this.nodes[s].reward}isTerminal(s){return this.nodes[s].isTerminal}mapNodes(s){for(let f of Object.values(this.nodes))s(f)}mapEdges(s){for(let f of Object.values(this.edges))s(f)}}class v extends te{visitedCount;sumPercentCompleted;depth;designerReward;playerReward;constructor(s,f,l,t,a,r){super(s,f,l,t,a);this.designerReward=f,this.playerReward=0,this.depth=r,this.visitedCount=1,this.sumPercentCompleted=1}updateReward(){this.reward=this.designerReward*this.visitedCount}}var w=new qe;w.addNode(new v(Qe,0,0,!1,[],-1));w.addNode(new v(d,-1,0,!0,[],-1));w.addNode(new v(As,1,0,!0,[],-1));w.addNode(new v("1-a",-0.95,0,!1,[],1));w.addNode(new v("2-a",-0.925,0,!1,[],2));w.addNode(new v("2-b",-0.925,0,!1,[],2));w.addNode(new v("3-a",-0.9,0,!1,[],3));w.addNode(new v("3-b",-0.9,0,!1,[],3));w.addNode(new v("4-a",-0.825,0,!1,[],4));w.addNode(new v("4-b",-0.825,0,!1,[],4));w.addNode(new v("5-a",-0.8,0,!1,[],5));w.addNode(new v("5-b",-0.8,0,!1,[],5));w.addNode(new v("5-c",-0.8,0,!1,[],5));w.addNode(new v("6-a",-0.775,0,!1,[],6));w.addNode(new v("7-a",-0.75,0,!1,[],7));w.addNode(new v("6-b",-0.775,0,!1,[],6));w.addNode(new v("1-b",-0.95,0,!1,[],1));w.addDefaultEdge(Qe,"1-a",[["1-a",0.99],[d,0.01]]);w.addDefaultEdge("1-a","2-b",[["2-b",0.99],[d,0.01]]);w.addDefaultEdge("1-a","2-a",[["2-a",0.99],[d,0.01]]);w.addDefaultEdge("2-a","3-a",[["3-a",0.99],[d,0.01]]);w.addDefaultEdge("2-b","3-b",[["3-b",0.99],[d,0.01]]);w.addDefaultEdge("3-a","4-b",[["4-b",0.99],[d,0.01]]);w.addDefaultEdge("3-a","4-a",[["4-a",0.99],[d,0.01]]);w.addDefaultEdge("3-b","4-b",[["4-b",0.99],[d,0.01]]);w.addDefaultEdge("3-b","4-a",[["4-a",0.99],[d,0.01]]);w.addDefaultEdge("4-a","5-b",[["5-b",0.99],[d,0.01]]);w.addDefaultEdge("4-a","5-a",[["5-a",0.99],[d,0.01]]);w.addDefaultEdge("4-a","5-c",[["5-c",0.99],[d,0.01]]);w.addDefaultEdge("4-b","5-b",[["5-b",0.99],[d,0.01]]);w.addDefaultEdge("4-b","5-a",[["5-a",0.99],[d,0.01]]);w.addDefaultEdge("4-b","5-c",[["5-c",0.99],[d,0.01]]);w.addDefaultEdge("5-a","6-a",[["6-a",0.99],[d,0.01]]);w.addDefaultEdge("5-a","6-b",[["6-b",0.99],[d,0.01]]);w.addDefaultEdge("5-b","6-a",[["6-a",0.99],[d,0.01]]);w.addDefaultEdge("5-b","6-b",[["6-b",0.99],[d,0.01]]);w.addDefaultEdge("5-c","6-a",[["6-a",0.99],[d,0.01]]);w.addDefaultEdge("5-c","6-b",[["6-b",0.99],[d,0.01]]);w.addDefaultEdge("6-a","7-a",[["7-a",0.99],[d,0.01]]);w.addDefaultEdge("7-a","end",[["end",0.99],[d,0.01]]);w.addDefaultEdge("6-b","7-a",[["7-a",0.99],[d,0.01]]);w.addDefaultEdge(Qe,"1-b",[["1-b",0.99],[d,0.01]]);w.addDefaultEdge("1-b","2-b",[["2-b",0.99],[d,0.01]]);w.addDefaultEdge("1-b","2-a",[["2-a",0.99],[d,0.01]]);var Ss={"1-a":["------------XXX-","-------------T--","----------------","----------------","----------------","----------------","----------------","----------------","-----X-C-----X--","--------------b-","-----------o----","--------o-XX----","------o-XXXX----","------XXXXXX----","XXXXXXXXXXXX^XXX"],"2-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-------XXXXXXXX-------","----------------------","-------V--o---V-----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"2-b":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-----------o----------","--------------------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"3-a":["----------------------","----------------------","----------------------","----------------------","-----------o----------","----------------------","---------XXXXX--------","-----------o----------","----------------------","-------X-H-----X------","---XX--XXXXXXXXX--XX--","----------------------","-------V---o---V----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"3-b":["----------------------","----------------------","----------------------","----------------------","----------o-----------","----------------------","--------XXXXX---------","--------V---V---------","----------o-----------","----------------------","------XXXXXXXXX-------","----------------------","----------o---------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"4-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------XXX---","-----------------V----","-------X---XX-----V---","------XX------o-V---o-","-----XXX--------------","XXXXXXXX---XXXXXXXXXXX"],"4-b":["--------------------XX","--------------------XX","--------------------XX","--------------------XX","--------------------XX","-----------X-H---o--XX","-----------------o--XX","---------o----------XX","-----------XXXXXXX--XX","--------------------XX","-------X------------XX","------XXX-----------XX","-----XXXXX-----------o","----XXXXXXX-----------","XXXXXXXXXXXXXXXX--XXXX"],"5-a":["--------XXXXXXXXXXXXXX--------","-------------------ooX--------","---------------------X--------","---------------------X--------","------------------XXXX--------","------------------X-----------","-----------o--XXXXX-----------","------------------------------","---------XX-----------------o-","------------------------------","--------------XX---XXX----XXXX","------------------------------","----------XX------------------","------------------------------","XXXXXXXX----------------------"],"5-b":["------------------------------","-o----------------------------","------------------------------","XXX---------------------------","------------------------------","-----XXX----------------------","------------------------------","-----------XXX----------------","-o--------------------------o-","------XXX---------------------","XXX-----------------------XXXX","------------XXX-------XX------","------------------XX----------","------------------------------","XXXXXXXX---XXXXX--------------"],"5-c":["o-----------------------------","------------------------------","X---XX------------------------","------------------------------","------------------------------","XX----------------------------","--------XXXXX-----------------","--------Xoo-------------------","XXX-----Xoo----o------------o-","--------X---------------------","--------XXX---XX----XX----XXXX","XXXX--------------------------","------------------------------","------------------------------","XXXXXXXX----------------------"],"6-a":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","-------oo---XXXXXXXX----------","-o----------XXXXXXXX----------","------XXXX--XXXXXXXX----------","--------------o---------------","XXXX--------------------------","-------------XXXX-----------o-","---------------------XX-------","XXXXXXXX-----------------XXXXX"],"7-a":["-------------------V---------------","-----------------o---o-------------","------------X-H------------H--XXX--","-----V------XXXXXXXXXXXXXXXXXXXXX--","--------XX----o--------------------","-----------------------------------","-----------XXXXXX---Ho-------------","-----------------------------------","-------------V------XX--------H----","-----------------------------------","XX--------o------XXXXX----H--------","-----------------------------------","---X----H----H-X-----------------o-","---XXXXXXXXXXXXX-------------------","XXXX--------------------------XXXXX"],end:["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----oooooooooooooooooo","XXXXXXXXXXXXXXXXXXXXXX"],"6-b":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX---o------","----------XXXXXXXXXX----------","-o--------XXXXXXXXXX----------","----------XXXXXXXXXX---X------","----------XXXXXXXXXX----------","XXX-------XXXXXXXXXXX---------","------XX-----oooo-----------o-","------------------------------","XXXX--------XXXXXX---XXX--XXXX"],"1-b":["---------XXX----","----------T-----","----------------","----------------","----------------","----------------","----------------","----X-----X-----","-------oo------C","----------------","-------XX-------","----o-XXXX-o----","-----XXXXXX-----","---XXXXXXXXXX---","XXXXXXXXXXXXXXXX"]};class e{moveRight;moveLeft;jump;constructor(s,f,l){this.moveRight=s,this.moveLeft=f,this.jump=l}}var tf=[new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0)],Bl=tf.length;var Ks=0.049980000000000004,fs=3,ke={"1-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"2-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"2-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"3-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1)],"3-b":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"4-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"4-b":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"5-b":[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-c":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"6-a":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"7-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1)],end:[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"6-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"1-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)]};class ae{startCol=0;offsetX=0;colsPerScreen=Math.ceil(U/m);update(s){let f=s-this.colsPerScreen/2;this.startCol=Math.max(0,Math.floor(f)),this.offsetX=-f*m+this.startCol*m}columnToScreen(s){return(s-this.startCol)*m+this.offsetX}rowToScreen(s){return s*m}}class re{game;pos;type;dead=!1;velocity=new i(0,0);gravity=new i(0,100);leftX;rightX;constructor(s,f){this.pos=s,this.type=f}physicsUpdate(s){Re(this.velocity,V(this.gravity,s)),this.velocity.y=Math.min(this.velocity.y,30),Re(this.pos,V(this.velocity,s)),this.updateLeftRight()}}class p extends re{size;constructor(s,f,l){super(s,l);this.size=f,this.leftX=this.pos.x,this.rightX=this.pos.x+f.x}updateLeftRight(){this.leftX=this.pos.x,this.rightX=this.pos.x+this.size.x}collision(s){if(s instanceof p){if(ps(this.pos,this.size,s.pos,s.size))this.handleCollision(s),s.handleCollision(this)}else if(s instanceof ue){if(me(this.pos,this.size,s.pos,s.r))this.handleCollision(s),s.handleCollision(this)}}}class ue extends re{r;constructor(s,f,l){super(s,l);this.r=f,this.leftX=this.pos.x-f,this.rightX=this.pos.x+f}updateLeftRight(){this.leftX=this.pos.x-this.r,this.rightX=this.pos.x+this.r}collision(s){if(s instanceof p){if(me(s.pos,s.size,this.pos,this.r))this.handleCollision(s),s.handleCollision(this)}}}var F=0,Z=1,Ze=2,j=3,Pe=4,R=5;class u{static playerID;static version;static condition;static result;static coinsCollected;static coinsInLevel;static timePlayed;static levels;static order;static pathX;static pathY;static velX;static velY;static init(){if(location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname==="")u.playerID="local-dev";else if(new URLSearchParams(window.location.search).has("id"))u.playerID=crypto.randomUUID();else u.playerID="browser-dev";console.log(u.playerID),u.version="0.0.0",u.result="none",u.coinsCollected=0,u.timePlayed=0,u.order=0,u.pathX=[],u.pathY=[],u.velX=[],u.velY=[]}static pushPlayerPositionAndVelocity(s,f){this.pathX.push(g(s.x,4)),this.pathY.push(g(s.y,4)),this.velX.push(g(f.x,4)),this.velY.push(g(f.y,4))}static getLog(){return{id:u.playerID,version:u.version,condition:u.condition,result:u.result,coinsCollected:u.coinsCollected,coinsInLevel:u.coinsInLevel,timePlayed:u.timePlayed,order:u.order,pathX:u.pathX,pathY:u.pathY,velX:u.velX,velY:u.velY}}static resetLog(){++u.order,u.result="none",u.coinsCollected=0,u.coinsInLevel=0,u.timePlayed=0,u.pathX=[],u.pathY=[],u.velX=[],u.velY=[]}}class ne extends ue{angle;start;constructor(s,f,l,t){super(s,ks,j);this.gravity.y=0,this.angle=f,this.start=l,this.velocity=t}static defaultConstructor(s){return new ne(s,0,b(s),new i(0,0))}clone(){return new ne(b(this.pos),this.angle,this.start,b(this.velocity))}update(s){this.angle+=s,this.velocity.x=2*Ge*Math.cos(this.angle),this.velocity.y=Ge*Math.sin(this.angle)}handleCollision(s){if(s.type===F)u.result="lost - circle enemy";else this.dead=s.type===R}render(s,f){s.fillStyle=z,s.beginPath(),s.arc(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Oe,0,Fs),s.fill()}}class we extends p{constructor(s,f){super(s,Ys,R);this.gravity.y=0,this.velocity=f}static defaultConstructor(s,f){let l=W(f,s);return os(l),ws(l,Ns),new we(s,l)}clone(){return new we(b(this.pos),b(this.velocity))}update(s){}handleCollision(s){if(s.type===F)u.result="lost - bullet";this.dead=!0}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),js,Rs)}}class Be extends p{playerPos;color;time;state;constructor(s,f=0,l=0){super(s,N,Z);this.color=J,this.gravity.y=0,this.time=f,this.state=l}clone(){return new Be(b(this.pos),this.time,this.state)}update(s){switch(this.state){case 0:{if(Y(this.pos,this.game.protaganist().pos)<=Ws)this.color=z,this.state=1;break}case 1:{if(this.time+=s,this.time>=Bs)this.time=0,this.state=2;break}case 2:{this.state=0,this.color=J;let f=this.game.protaganist().pos,l=Ye(this.pos,f),t=Math.cos(l),a=Math.sin(l);this.game.dynamicEntities.push(we.defaultConstructor(new i(this.pos.x+(Ve+O)*t,this.pos.y+(Ve+O)*a),f));break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=k/2,r=2*a,n=new i(l+a,t);s.lineWidth=2,s.beginPath(),s.arc(n.x,n.y,a,0,Math.PI),s.stroke();let o=Ye(this.pos,this.game.protaganist().pos),h=Math.cos(o),x=Math.sin(o);s.lineWidth=4,s.beginPath(),s.moveTo(n.x+a*h,n.y+a*x),s.lineTo(n.x+r*h,n.y+r*x),s.stroke(),s.lineWidth=1}}class We extends p{constructor(s){super(s,N,Z)}clone(){throw new Error("Block.clone should not have been called!")}update(s){}handleCollision(s){}render(s,f){s.lineWidth=1.3,s.strokeStyle=A,s.strokeRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),k,M)}}var af=1000,rf=2;class ie extends p{minY;maxY;yMod;timeGone;constructor(s,f,l,t,a,r){super(s,ze,Pe);this.gravity.y=0,this.yMod=f,this.minY=l,this.maxY=t,this.velocity.y=a,this.timeGone=r}static defaultConstructor(s){return xe(s,0.25),new ie(s,0.25,s.y+0.15,s.y+0.3,0.25,0)}clone(){return new ie(b(this.pos),this.yMod,this.minY,this.maxY,this.velocity.y,this.timeGone)}update(s){if(this.pos.y>100){if(this.timeGone+=s,this.timeGone>=rf)this.pos.y=this.maxY,this.velocity.y=-this.yMod}else if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===F)this.pos.y=af,this.timeGone=0}render(s,f){s.fillStyle=ms,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),T,c)}}class D extends p{minY;maxY;yMod;constructor(s,f,l,t,a,r=!1){super(s,ze,Ze);this.gravity.y=0,this.yMod=f,this.maxY=l,this.minY=t,this.velocity.y=a,this.dead=r}static defaultConstructor(s){return s.x+=0.25,new D(s,0.1,s.y+0.3,s.y+0.15,0.1)}clone(){return new D(b(this.pos),this.yMod,this.maxY,this.minY,this.velocity.y,this.dead)}update(s){if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===F)ys(),this.dead=!0}render(s,f){s.fillStyle=J,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),T,c)}}class oe extends p{maxColumns;constructor(s,f,l){super(s,Us,j);this.maxColumns=f,this.velocity.x=l,this.gravity.y=0}static defaultConstructor(s,f){return xe(s,0.25),new oe(s,f,3)}clone(){return new oe(b(this.pos),this.maxColumns,this.velocity.x)}update(s){this.velocity.x*=ye(this.pos.x>=0&&this.pos.x<=this.maxColumns)}handleCollision(s){if(s.type===Z){let f=W($(this.pos,V(this.size,0.5)),$(s.pos,V(s.size,0.5))),l=$(this.size,s.size);if(V(l,0.5),Math.abs(f.x/this.size.x)>Math.abs(f.y/this.size.y))if(this.velocity.x*=-1,f.x<0)this.pos.x=s.pos.x-this.size.x;else this.pos.x=s.pos.x+s.size.x}else if(s.type===R)this.dead=!0;else if(s.type===F)u.result="lost - horizontal enemy"}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),E,L)}}class Xe extends p{time;constructor(s,f,l){super(s,f,j);this.gravity.y=0,this.time=l}static defaultConstructor(s,f){return s.x+=(O-He)/2,new Xe(s,new i(He,f),0)}clone(){return new Xe(this.pos,this.size,this.time)}update(s){bs(),this.time+=s,this.dead=this.time>=Fe}handleCollision(s){if(s.type===F)u.result="lost - laser"}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Zs,this.size.y*m)}}class Ne extends p{color;time=0;state=0;constructor(s,f=0,l=0){super(s,N,Z);this.color=J,this.gravity.y=0,this.state=f,this.time=l}clone(){return new Ne(b(this.pos),this.state,this.time)}update(s){if(Y(this.pos,this.game.protaganist().pos)>150)this.state=0;switch(this.time+=s,this.state){case 0:{if(this.time>=Fe)this.time=0,this.state=1,this.color=J;break}case 1:{if(this.time>=Ps){this.time=0,this.state=0,this.color=z;let f=this.game.raycastUp(this.pos),l=f===null?K:this.pos.y-f.pos.y-1;this.game.dynamicEntities.push(Xe.defaultConstructor(new i(this.pos.x,this.pos.y-l),l))}break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=t+M;s.beginPath(),s.moveTo(l,a),s.lineTo(l+k/2,t),s.lineTo(l+k,a),s.lineTo(l,a),s.stroke(),s.strokeStyle=A,s.beginPath(),s.moveTo(l,t),s.lineTo(l+k,t),s.stroke()}}var Ms=6,uf=0.4;class je extends p{movingRight;movingLeft;moveMod;jumpTime;squash;stretch;coinsCollected;maxColumn;agent;constructor(s,f,l,t=!1,a=!1,r=0,n=0,o=1,h=1,x=0,S=0){super(s,Vs,F);this.velocity=f,this.agent=l,this.movingRight=t,this.movingLeft=a,this.moveMod=r,this.jumpTime=n,this.squash=o,this.stretch=h,this.coinsCollected=x,this.maxColumn=S}clone(){return new je(b(this.pos),b(this.velocity),this.agent,this.movingRight,this.movingLeft,this.moveMod,this.jumpTime,this.squash,this.stretch,this.coinsCollected,this.maxColumn)}update(s){if(this.pos.y>$s){u.result="lost - fell",this.dead=!0;return}if(this.movingLeft=!1,this.movingRight=!1,this.velocity.x=0,this.agent.update(s),this.agent.movingRight)this.movingRight=!0,this.velocity.x=Ms,this.moveMod=4;if(this.agent.movingLeft)if(this.movingRight)this.movingRight=!1,this.velocity.x=0;else this.movingLeft=!0,this.velocity.x=-Ms,this.moveMod=4;if(this.jumpTime<uf&&this.agent.jumping){if(this.jumpTime===0)this.velocity.y=-15;else if(this.jumpTime<0.2)this.velocity.y-=2;this.velocity.y=Math.max(-20,this.velocity.y),this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s),this.jumpTime+=s}else if(this.squash!=this.stretch)this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s);this.maxColumn=Math.max(this.pos.x,this.maxColumn)}handleCollision(s){switch(s.type){case Z:{let f=s,l=W($(this.pos,V(this.size,0.5)),$(f.pos,V(f.size,0.5))),t=$(this.size,f.size);V(t,0.5);let a=Math.abs(Math.atan(l.y/l.x));if(!(a<1.03&&a>0.6)&&Math.abs(l.x/this.size.x)>Math.abs(l.y/this.size.y))if(l.x<0)this.pos.x=f.pos.x-this.size.x;else this.pos.x=f.pos.x+f.size.x;else if(l.y>0)this.pos.y=f.pos.y+f.size.y;else this.pos.y=f.pos.y-this.size.y,this.velocity.y=0,this.jumpTime=0,this.stretch=1.01,this.squash=0.99;break}case Ze:{++this.coinsCollected;break}case R:case j:{this.dead=!0;break}case Pe:{this.jumpTime=0,this.velocity.y=Math.min(this.velocity.y,0);break}default:{console.warn(`Protaganist has an unhandled collision type: ${s.type}.`);break}}}render(s,f){s.fillStyle=vs;let l=f.columnToScreen(this.pos.x),t=f.rowToScreen(this.pos.y),a=Me*this.squash,r=Ke*this.stretch;if(this.movingRight){let n=new Path2D;n.moveTo(l,t),n.lineTo(l-this.moveMod,t+a),n.lineTo(l+r-this.moveMod,t+a),n.lineTo(l+r,t),n.closePath(),s.fill(n,"evenodd")}else if(this.movingLeft){let n=new Path2D;n.moveTo(l,t),n.lineTo(l+this.moveMod,t+a),n.lineTo(l+r+this.moveMod,t+a),n.lineTo(l+r,t),n.closePath(),s.fill(n,"evenodd")}else s.fillRect(l,t,r,a)}}class he extends p{constructor(s,f){super(s,qs,j);this.velocity.y=f,this.gravity.y=0}static defaultConstructor(s){return s.x+=0.25,s.y+=0.1,new he(s,3)}clone(){return new he(b(this.pos),this.velocity.y)}update(s){this.velocity.y*=ye(this.pos.y>0&&this.pos.y<=K)}handleCollision(s){if(s.type===Z){let f=W($(this.pos,V(this.size,0.5)),$(s.pos,V(s.size,0.5))),l=$(this.size,s.size);if(V(l,0.5),Math.abs(f.x/this.size.x)<Math.abs(f.y/this.size.y))if(this.velocity.y*=-1,f.y>0)this.pos.y=s.pos.y+s.size.y;else this.pos.y=s.pos.y-this.size.y}else if(s.type===R)this.dead=!0;else if(s.type===F)u.result="lost - vertical enemy"}render(s,f){s.fillStyle=z,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),L,E)}}class _{staticEntitiesRenderLocations=[];staticEntities;dynamicEntities=[];coins=[];constructor(s,f){if(s===null)return;let l=s.length;if(l!==K){console.error("Level should have 15 rows!");return}this.dynamicEntities.push(new je(new i(2,12),new i(0,0),Cs(f,this)));let t=s[0].length,a,r;this.staticEntities=[];for(a=0;a<l;++a){let o=new Array(t);o.fill(!1),this.staticEntities.push(o)}for(a=0;a<l;++a){let o=s[a];if(t!==o.length){console.error(`Every row in the level should have the same number of columns! (${t} != ${o.length}).`);return}for(r=0;r<t;++r){let h=o[r];if(h==="X")this.staticEntities[a][r]=!0,this.staticEntitiesRenderLocations.push(new i(r,a));else if(h==="^")this.dynamicEntities.push(new Ne(new i(r,a)));else if(h==="T")this.dynamicEntities.push(new Be(new i(r,a)));else if(h==="o"){let x=D.defaultConstructor(new i(r,a));this.dynamicEntities.push(x),this.coins.push(x)}else if(h=="b")this.dynamicEntities.push(ie.defaultConstructor(new i(r,a)));else if(h==="H")this.dynamicEntities.push(oe.defaultConstructor(new i(r,a),t));else if(h==="V")this.dynamicEntities.push(he.defaultConstructor(new i(r,a)));else if(h==="C")this.dynamicEntities.push(ne.defaultConstructor(new i(r,a)));else if(h!=="-")console.error(`Unhandled tile type: ${h}`)}}for(let o=0;o<this.dynamicEntities.length;++o)this.dynamicEntities[o].game=this;let n=this.dynamicEntities[0].pos;this.coins.sort((o,h)=>{return Y(n,o.pos)-Y(n,h.pos)})}clone(){let s=new _(null,le),f=this.dynamicEntities.length,l=0;for(;l<f;++l){let a=this.dynamicEntities[l];if(a.dead)continue;let r=a.clone();if(r.game=s,s.dynamicEntities.push(r),r instanceof D)s.coins.push(r)}let t=s.dynamicEntities[0].pos;return s.coins.sort((a,r)=>{return Y(t,a.pos)-Y(t,r.pos)}),s.staticEntities=this.staticEntities,s}hash(){let s=this.dynamicEntities[0].pos;return Math.round(s.x*100)+Math.round(s.y*100)*1e6}update(s,f=1){s=s/f;for(let l=0;l<f;++l){let t=this.dynamicEntities.length;for(let r=0;r<t;++r){let n=this.dynamicEntities[r];n.update(s),n.physicsUpdate(s)}let a=Array.from(this.dynamicEntities.keys()).sort((r,n)=>this.dynamicEntities[r].leftX-this.dynamicEntities[n].leftX);for(let r=0;r<a.length;++r){let n=this.dynamicEntities[a[r]];for(let o=r+1;o<a.length;++o){let h=this.dynamicEntities[a[o]];if(h.leftX>n.rightX)break;n.collision(h)}if(n instanceof p){let o=[n.pos,$(n.pos,new i(N.x,0)),$(n.pos,new i(0,N.y)),$(n.pos,N)];for(let h=0;h<4;++h){let x=Xs(o[h]);if(x.y>=0&&x.y<this.staticEntities.length&&x.x>=0&&x.x<=this.staticEntities[0].length&&this.staticEntities[x.y][x.x])n.collision(new We(x))}}}for(let r=0;r<t;++r)if(this.dynamicEntities[r].dead){if(r==0)return;this.dynamicEntities.splice(r,1),--t}}}render(s,f){f.update(this.dynamicEntities[0].pos.x);let l=this.staticEntitiesRenderLocations.length,t=0;s.lineWidth=1.3,s.strokeStyle=A;for(;t<l;++t){let a=this.staticEntitiesRenderLocations[t];s.strokeRect(f.columnToScreen(a.x),f.rowToScreen(a.y),k,M)}l=this.dynamicEntities.length;for(t=0;t<l;++t)this.dynamicEntities[t].render(s,f)}state(){let s=this.dynamicEntities[0];if(s.coinsCollected>=this.coins.length)return $e;if(s.dead)return ve;return I}protaganist(){return this.dynamicEntities[0]}fitness(){return 1-this.dynamicEntities[0].coinsCollected/this.coins.length}raycastUp(s){let f=b(s);f.y-=1;while(f.y>=0){if(this.staticEntities[f.y][f.x])return new We(f);f.y-=1}return null}}var nf=Ks/fs;class ls extends P{ctx;transitionScene;camera;game;actions=[];actionIndex;frame;time;previousKey="";constructor(s,f){super();this.ctx=s,this.transitionScene=f,this.camera=new ae}onEnter(){let s=Ae(ke);while(s==this.previousKey)s=Ae(ke);this.previousKey=s,this.actions=ke[s],this.game=new _(Ss[s],le),this.actionIndex=0,this.frame=0,this.time=0}update(s){if(this.game.state()!==I)this.onEnter();if(y.isKeyDown(14))this.transitionScene.targetScene=C,this.changeScene=B;if(this.time+=s,this.time>=0.0166666){if(this.time=this.time-0.016666,this.frame>=fs)this.frame=0,++this.actionIndex;++this.frame,this.game.protaganist().agent.set(this.actions[this.actionIndex]),this.game.update(nf)}}render(){this.ctx.clearRect(0,0,U,q),this.game.render(this.ctx,this.camera),this.ctx.fillStyle="black",this.ctx.fillRect(240,60,240,47),this.ctx.fillRect(210,234,295,39),this.ctx.fillStyle=J,this.ctx.font="48px Arial",this.ctx.fillText("Recformer",247,100),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to start",220,q*0.55)}_onExit(){}}class ts{playerWonLastRound=!1;constructor(){}playerBeatGame(){return!0}update(s,f){}get(s){return["----------------------------------------------------------------------------------XXXXXXXX--------","-------------------------C---------------------------------------------------------XXXXXXX--------","-----------------------------------------------------------------------------------XXXXXXX--------","-------------------XXXXXXXXXXXXXXX----XXXXXX---------------------------------------XXXXXXX--------","---------------------------------------V--V----------------------------------------V-V-V-V--------","--------------------------------------------------------------------------------------------------","----------------------------------XXXXXXXXXXXXXX--------------------------------------------------","------------------------------------------V---VX-------------H--------X---------------------------","----------------------------------------------------XXXXXXXXXXXXXXXXXXX---------------------------","----XX--------------------------XX-------------------------------------------XXXXXXXX-------------","-------------------------XXX-----------XXXXXXXXXX----------------------------C------C-------------","--------------------------------------------------------------------------------------------------","-------------------------V-V----------------------------------------------------------------------","--------X---H---X---------V------------X---H----X-----------------------------------------------o-","XXXXXXXXXXXXXXXXXX---XXXXXXXXXXXXXXXXXXXXXX--XXXXX---XXXXX---XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"]}}class as{runTime;callback;startTime;constructor(s,f){this.runTime=s;this.callback=f;this.startTime=0}update(s){if(this.startTime+=s,this.runTime<=this.startTime)this.startTime=0,this.callback()}}class de{static getCondition(s){fetch("/condition",{method:"POST"}).then((f)=>{if(f.status===200)f.text().then((l)=>{s(l)});else s(Ie)}).catch(()=>{s(Ie)})}static submitAttempt(){fetch("/log",{method:"POST",body:JSON.stringify(u.getLog()),mode:"no-cors",headers:{"Content-Type":"application/json"}}).then((s)=>{console.log(s.status),console.log(s)})}}class rs extends P{ctx;transitionScene;agentType;game;camera;levelDirector;timer;timePlayed;constructor(s,f,l,t){super();this.ctx=s,this.agentType=t,this.transitionScene=f,this.camera=new ae,this.levelDirector=new ts}onEnter(){let s=this.levelDirector.get(zs);this.game=new _(s,this.agentType),this.timer=new as(0.1,()=>{let f=this.game.dynamicEntities[0];u.pushPlayerPositionAndVelocity(f.pos,f.velocity)}),this.timePlayed=0,u.coinsInLevel=this.game.coins.length}update(s){this.game.update(s,2),this.timer.update(s),this.timePlayed+=s;let f=this.game.state();switch(f){case I:break;case ve:{u.timePlayed=this.timePlayed,u.coinsCollected=this.game.dynamicEntities[0].coinsCollected,this.transitionScene.targetScene=Je,this.changeScene=B;break}case $e:{if(u.result="won",u.timePlayed=this.timePlayed,u.coinsCollected=this.game.dynamicEntities[0].coinsCollected,this.levelDirector.playerBeatGame())this.transitionScene.targetScene=se;else this.transitionScene.targetScene=fe;this.changeScene=B;break}default:{console.error(`Unhandled game state type: ${f}`);break}}}render(){this.ctx.clearRect(0,0,U,q),this.game.render(this.ctx,this.camera)}_onExit(){if(console.log(u.result),u.result!=="none")de.submitAttempt();u.resetLog();let s=this.game.fitness();console.log(`Fitness: ${s}`),this.levelDirector.update(this.transitionScene.targetScene===fe,s)}}window.addEventListener("load",()=>{xs(()=>{de.getCondition((s)=>{u.condition=s,y.init(),u.init();let f=document.createElement("canvas");f.setAttribute("id","canvas"),f.width=U,f.height=q;let l=f.getContext("2d");document.getElementById("game").appendChild(f);let t=new Se,a=new ge(l);t.registerScene(B,a),t.registerScene(ee,new ls(l,a)),t.registerScene(C,new rs(l,a,s,es)),t.registerScene(se,new Te(l)),t.registerScene(fe,new ce(l,a)),t.registerScene(Je,new De(l,a));let r=300,n=document.getElementById("time"),o=t.getScene(ee);o.onEnter();let h=0,x=(S)=>{let pe=Math.min(0.05,(S-h)/1000);if(h=S,r>0){r-=pe;let ns=Math.floor(r/60),Os=Math.round(r-ns*60);n.innerHTML=`${ns}:${Os}`}else o.onExit(),o=t.getScene(se),o.onEnter();o.update(pe),o.render();let us=o.changeScene;if(us!==void 0)o.onExit(),o=t.getScene(us),o.onEnter();window.requestAnimationFrame(x)};window.requestAnimationFrame(x)})})});
