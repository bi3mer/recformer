class o{x;y;constructor(s,f){this.x=s,this.y=f}}function y(s){return new o(s.x,s.y)}function g(s,f){return new o(s.x+f.x,s.y+f.y)}function Ye(s,f){s.x+=f.x,s.y+=f.y}function B(s,f){return new o(s.x-f.x,s.y-f.y)}function be(s,f){s.x+=f,s.y+=f}function F(s,f){return new o(s.x*f,s.y*f)}function ds(s,f){s.x*=f,s.y*=f}function xs(s){return s.x*s.x+s.y*s.y}function Gs(s){return Math.sqrt(s.x*s.x+s.y*s.y)}function ps(s){let f=Gs(s);s.x/=f,s.y/=f}function A(s,f){let l=s.x-f.x,a=s.y-f.y;return l*l+a*a}function Ce(s,f){return Math.atan2(f.y-s.y,f.x-s.x)}function bs(s){return new o(Math.floor(s.x),Math.floor(s.y))}function ys(s,f){return Math.floor(Math.random()*(f-s+1)+s)}function me(s){return s*2-1}function ve(){return Math.random()<0.5}function ye(s,f,l){return Math.min(Math.max(s,f),l)}function ge(s,f,l,a){return xs(B(l,new o(ye(l.x,s.x,s.x+f.x),ye(l.y,s.y,s.y+f.y))))<a*a}function ms(s,f,l,a){let{x:t,y:r}=s,u=t+f.x,n=r+f.y,w=l.x,d=l.y,P=w+a.x,Y=d+a.y;return t<P&&u>w&&r<Y&&n>d}function Se(s){let f=Object.keys(s);return f[Math.floor(Math.random()*f.length)]}var Ke=typeof window!=="undefined",z=[];function vs(s){if(Ke){z.push(new Audio("audio/coin_1.wav")),z.push(new Audio("audio/coin_2.wav")),z.push(new Audio("audio/coin_3.wav")),z.push(new Audio("audio/coin_4.wav")),z.push(new Audio("audio/coin_5.wav")),z.push(new Audio("audio/laser.wav"));let f=()=>{let l=!0;for(let a=0;a<z.length;++a)if(!z[a].readyState){l=!1;break}if(l)z[5].volume=0.4,s();else setTimeout(f,100)};f()}else s()}function gs(){if(Ke){let s=ys(0,4);z[s].currentTime=0.15,z[s].play()}}function $s(){if(Ke)z[5].currentTime=0,z[5].play()}var H;((h)=>{h[h.LEFT=0]="LEFT";h[h.RIGHT=1]="RIGHT";h[h.DOWN=2]="DOWN";h[h.UP=3]="UP";h[h.A=4]="A";h[h.D=5]="D";h[h.E=6]="E";h[h.G=7]="G";h[h.H=8]="H";h[h.I=9]="I";h[h.Q=10]="Q";h[h.R=11]="R";h[h.S=12]="S";h[h.W=13]="W";h[h.SPACE=14]="SPACE";h[h.ESCAPE=15]="ESCAPE";h[h.ENTER=16]="ENTER";h[h.SHIFT=17]="SHIFT";h[h.INVALID=18]="INVALID"})(H||={});class b{static _keys=[];static init(){for(let s=0;s<Object.keys(H).length;++s)b._keys.push(!1);window.addEventListener("keydown",b.onKeyDown),window.addEventListener("keyup",b.onKeyUp)}static isKeyDown(...s){let f=s.length;for(let l=0;l<f;++l)if(b._keys[s[l]])return!0;return!1}static keyStrToKey(s){switch(s){case"Down":case"ArrowDown":return 2;case"Up":case"ArrowUp":return 3;case"Right":case"ArrowRight":return 1;case"Left":case"ArrowLeft":return 0;case" ":case"Space":return 14;case"Escape":return 15;case"a":case"A":return 4;case"e":case"E":return 6;case"s":case"S":return 12;case"d":case"D":return 5;case"w":case"W":return 13;case"r":case"R":return 11;case"q":case"Q":return 10;case"g":case"G":return 7;case"h":case"H":return 8;case"i":case"I":return 9;case"Shift":return 17;case"Enter":return 16;default:return console.warn(`Unhandled key: ${s}.`),18}}static onKeyDown(s){let f=b.keyStrToKey(s.key);if(b._keys[f]=!0,f==2||f==3||f==0||f==1)s.preventDefault();return!1}static onKeyUp(s){return b._keys[b.keyStrToKey(s.key)]=!1,!1}static clear(){for(let s=0;s<b._keys.length;++s)b._keys[s]=!1}}class Oe{scenes={};registerScene(s,f){if(this.scenes[s]===void 0)this.scenes[s]=f;else console.error(`Key "${s}" for scene already exists! Scene not added to SceneManager.`)}getScene(s){return this.scenes[s]}}var $="#fe546f";var Q="#ffd080",C="#fffdff",Fs="#0bffe6";var zs="#9696ff";var J=720,X=480,m=32,N=15,Qs=N+2,Js=3,Xs=2*Math.PI,I=0,$e=1,Fe=2,Me=20,Ge=30,Hs=Me/m,Is=Ge/m,Us=new o(Hs,Is),U=31,O=31,M=U/m,cs=O/m,W=new o(M,cs),c=16,L=16,Ls=c/m,Ds=L/m,ze=new o(Ls,Ds),ee=25,se=15,qs=ee/m,Vs=se/m,ks=new o(qs,Vs),Zs=new o(Vs,qs),He=10,Ps=He/m,Ie=2.5,ce=M/8,Bs=U/8,Qe=0.6,Ns=2,Ws=2.5,js=150,Rs=10,As=10,Ys=10,Je=c/m,Ts=L/m,Cs=new o(Je,Ts),V="start",fe="end",x="death";class k{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class Le extends k{ctx;constructor(s){super();this.ctx=s}onEnter(){this.ctx.clearRect(0,0,J,X),this.ctx.font="30px Arial",this.ctx.fillStyle=C,this.ctx.fillText("You won! Congratulations!",170,X/2)}update(s){}render(){}_onExit(){}}var le="main menu",S="game",Xe="player won",Z="transition",Ue="lost",te="won";class De extends k{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){b.clear(),this.ctx.fillStyle=Q,this.ctx.font="48px Arial",this.ctx.fillText("YOU WON",250,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to keep going.",180,400)}update(s){if(b.isKeyDown(14))this.transitionScene.targetScene=S,this.changeScene=Z}render(){}_onExit(){}}class Te extends k{ctx;transitionScene;constructor(s,f){super();this.ctx=s,this.transitionScene=f}onEnter(){b.clear(),this.ctx.fillStyle=$,this.ctx.font="48px Arial",this.ctx.fillText("YOU LOST",243,200),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to try again.",195,400)}update(s){if(b.isKeyDown(14))this.transitionScene.targetScene=S,this.changeScene=Z}render(){}_onExit(){}}class _e{changeScene;onExit(){this.changeScene=void 0,this._onExit()}}class Ee extends _e{targetScene=le;timer=0;ctx;constructor(s){super();this.ctx=s}onEnter(){}update(s){if(this.timer+=s,this.timer>0.5)this.changeScene=this.targetScene}render(){let s=this.timer/0.5;this.ctx.fillStyle=`rgba(0,0,0, ${s})`,this.ctx.fillRect(0,0,J,X)}_onExit(){this.timer=0}}class G{movingRight=!1;movingLeft=!1;jumping=!1;set(s){this.movingRight=s.moveRight,this.movingLeft=s.moveLeft,this.jumping=s.jump}}class es extends G{time=0;name(){return"random"}update(s){if(this.time+=s,this.time>0.2)this.time=0,this.movingRight=ve(),this.movingLeft=ve(),this.jumping=ve()}}class qe extends G{name(){return"player"}update(s){this.movingRight=b.isKeyDown(5,1),this.movingLeft=b.isKeyDown(4,0),this.jumping=b.isKeyDown(14,3)}}class ss extends G{name(){return"empty"}update(s){}}var Es=0,fs=1,ae=2;function Ss(s,f){switch(s){case Es:return new es;case fs:return new qe;case ae:return new ss;default:return console.error(`Unhandled agent type: ${s}. Defaulted to player agent.`),new qe}}class ls{src;tgt;probability;constructor(s,f,l){this.src=s,this.tgt=f,this.probability=l}}class re{name;reward;utility;isTerminal;neighbors;constructor(s,f,l,a,t){this.name=s,this.reward=f,this.utility=l,this.isTerminal=a,this.neighbors=t}}class Ve{nodes;edges;constructor(){this.nodes={},this.edges={}}getNode(s){return this.nodes[s]}hasNode(s){return s in this.nodes}addNode(s){this.nodes[s.name]=s}addDefaultNode(s,f=1,l=0,a=!1,t=null){if(t==null)t=[];this.nodes[s]=new re(s,f,l,a,t)}removeNode(s){let f=[];for(let l of Object.values(this.edges)){if(l.src==s||l.tgt==s)f.push(l);let a=l.probability,t=-1;for(let w=0;w<a.length;w++){let[d,P]=a[w];if(d==s){t=w;break}}if(t==-1)continue;let r=a[t][1];a.splice(t,1);let u=a.length,n=r/u;l.probability=a.map(([w,d])=>[w,d+n])}for(let l of f)this.removeEdge(l.src,l.tgt);delete this.nodes[s]}getEdge(s,f){return this.edges[`${s},${f}`]}hasEdge(s,f){return`${s},${f}`in this.edges}addEdge(s){this.edges[`${s.src},${s.tgt}`]=s;let f=this.nodes[s.src].neighbors;if(!f.includes(s.tgt))f.push(s.tgt)}addDefaultEdge(s,f,l=null){if(l==null)l=[[f,1]];this.addEdge(new ls(s,f,l))}removeEdge(s,f){let l=this.nodes[s],a=l.neighbors.indexOf(f);l.neighbors.splice(a,1),delete this.edges[`${s},${f}`]}neighbors(s){return this.nodes[s].neighbors}setNodeUtilities(s){for(let[f,l]of Object.entries(s))this.nodes[f].utility=l}utility(s){return this.nodes[s].utility}reward(s){return this.nodes[s].reward}isTerminal(s){return this.nodes[s].isTerminal}mapNodes(s){for(let f of Object.values(this.nodes))s(f)}mapEdges(s){for(let f of Object.values(this.edges))s(f)}}function K(s){return s[Math.floor(Math.random()*s.length)]}function D(s,f,l,a){let t=s.getEdge(f,l).probability,r=t.length,u=0;for(let n=0;n<r;++n){let[w,d]=t[n];u+=d*(s.reward(w)+a*s.utility(w))}return u}function ke(s,f,l){let a=s.getNode(f);if(a.isTerminal)return 0;let t=a.neighbors,r=t.length,u=-1/0;for(let n=0;n<r;++n)u=Math.max(u,D(s,f,t[n],l));return u}function ts(s){for(let f in s.nodes)s.nodes[f].utility=0}function as(s){let f={};for(let l in s.nodes)if(!s.getNode(l).isTerminal)f[l]=[...s.neighbors(l)];return f}function rs(s,f){let l={};for(let a in s.nodes){if(s.getNode(a).isTerminal)continue;let t=-1/0,r=[];for(let u of s.neighbors(a)){let n=D(s,a,u,f);if(n===t)r.push(u);else if(n>t)t=n,r.length=0,r.push(u)}l[a]=r}return l}function ef(s,f,l,a){for(let t=0;t<a;++t)for(let r in s.nodes){let u=s.getNode(r);if(!u.isTerminal)u.utility=D(s,r,K(f[r]),l)}}function sf(s,f,l,a){for(let t=0;t<a;++t){let r={};for(let u in s.nodes)if(!s.getNode(u).isTerminal)r[u]=D(s,u,K(f[u]),l);s.setNodeUtilities(r)}}function ff(s,f,l,a){for(let t=0;t<a;++t)for(let r in s.nodes)s.getNode(r).utility=ke(s,r,l)}function lf(s,f,l,a){for(let t=0;t<a;++t){let r={};for(let u in s.nodes)r[u]=ke(s,u,l);s.setNodeUtilities(r)}}function Ks(s,f,l){let a=!1;for(let t in s.nodes){if(s.getNode(t).isTerminal)continue;let r=null,u=-1/0;for(let n of s.neighbors(t)){let w=D(s,t,n,l);if(w===u);else if(w>u)r=n,u=w}if(K(f[t])!==r)f[t].length=0,f[t].push(r),a=!0}return a}function us(s,f,l=!1,a=!1,t=10,r=!0){if(r)ts(s);let u=as(s),n;if(l&&a)n=ef;else if(l&&!a)n=sf;else if(!l&&a)n=ff;else n=lf;let w=!0;while(w)n(s,u,f,t),w=Ks(s,u,f);return n(s,u,f,t),Ks(s,u,f),rs(s,f)}class v extends re{visitedCount;sumPercentCompleted;depth;designerReward;playerReward;constructor(s,f,l,a,t,r){super(s,f,l,a,t);this.designerReward=f,this.playerReward=0,this.depth=r,this.visitedCount=1,this.sumPercentCompleted=1}updateReward(){this.reward=this.designerReward*this.visitedCount}}var i=new Ve;i.addNode(new v(V,0,0,!1,[],-1));i.addNode(new v(x,-1,0,!0,[],-1));i.addNode(new v(fe,1,0,!0,[],-1));i.addNode(new v("1-a",-0.95,0,!1,[],1));i.addNode(new v("2-a",-0.925,0,!1,[],2));i.addNode(new v("2-b",-0.925,0,!1,[],2));i.addNode(new v("3-a",-0.9,0,!1,[],3));i.addNode(new v("3-b",-0.9,0,!1,[],3));i.addNode(new v("4-a",-0.825,0,!1,[],4));i.addNode(new v("4-b",-0.825,0,!1,[],4));i.addNode(new v("5-a",-0.8,0,!1,[],5));i.addNode(new v("5-b",-0.8,0,!1,[],5));i.addNode(new v("5-c",-0.8,0,!1,[],5));i.addNode(new v("6-a",-0.775,0,!1,[],6));i.addNode(new v("7-a",-0.75,0,!1,[],7));i.addNode(new v("6-b",-0.775,0,!1,[],6));i.addNode(new v("1-b",-0.95,0,!1,[],1));i.addDefaultEdge(V,"1-a",[["1-a",0.99],[x,0.01]]);i.addDefaultEdge("1-a","2-b",[["2-b",0.99],[x,0.01]]);i.addDefaultEdge("1-a","2-a",[["2-a",0.99],[x,0.01]]);i.addDefaultEdge("2-a","3-a",[["3-a",0.99],[x,0.01]]);i.addDefaultEdge("2-b","3-b",[["3-b",0.99],[x,0.01]]);i.addDefaultEdge("3-a","4-b",[["4-b",0.99],[x,0.01]]);i.addDefaultEdge("3-a","4-a",[["4-a",0.99],[x,0.01]]);i.addDefaultEdge("3-b","4-b",[["4-b",0.99],[x,0.01]]);i.addDefaultEdge("3-b","4-a",[["4-a",0.99],[x,0.01]]);i.addDefaultEdge("4-a","5-b",[["5-b",0.99],[x,0.01]]);i.addDefaultEdge("4-a","5-a",[["5-a",0.99],[x,0.01]]);i.addDefaultEdge("4-a","5-c",[["5-c",0.99],[x,0.01]]);i.addDefaultEdge("4-b","5-b",[["5-b",0.99],[x,0.01]]);i.addDefaultEdge("4-b","5-a",[["5-a",0.99],[x,0.01]]);i.addDefaultEdge("4-b","5-c",[["5-c",0.99],[x,0.01]]);i.addDefaultEdge("5-a","6-a",[["6-a",0.99],[x,0.01]]);i.addDefaultEdge("5-a","6-b",[["6-b",0.99],[x,0.01]]);i.addDefaultEdge("5-b","6-a",[["6-a",0.99],[x,0.01]]);i.addDefaultEdge("5-b","6-b",[["6-b",0.99],[x,0.01]]);i.addDefaultEdge("5-c","6-a",[["6-a",0.99],[x,0.01]]);i.addDefaultEdge("5-c","6-b",[["6-b",0.99],[x,0.01]]);i.addDefaultEdge("6-a","7-a",[["7-a",0.99],[x,0.01]]);i.addDefaultEdge("7-a","end",[["end",0.99],[x,0.01]]);i.addDefaultEdge("6-b","7-a",[["7-a",0.99],[x,0.01]]);i.addDefaultEdge(V,"1-b",[["1-b",0.99],[x,0.01]]);i.addDefaultEdge("1-b","2-b",[["2-b",0.99],[x,0.01]]);i.addDefaultEdge("1-b","2-a",[["2-a",0.99],[x,0.01]]);var Ze={"1-a":["------------XXX-","-------------T--","----------------","----------------","----------------","----------------","----------------","----------------","-----X-C-----X--","--------------b-","-----------o----","--------o-XX----","------o-XXXX----","------XXXXXX----","XXXXXXXXXXXX^XXX"],"2-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-------XXXXXXXX-------","----------------------","-------V--o---V-----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"2-b":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","-----------o----------","--------------------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"3-a":["----------------------","----------------------","----------------------","----------------------","-----------o----------","----------------------","---------XXXXX--------","-----------o----------","----------------------","-------X-H-----X------","---XX--XXXXXXXXX--XX--","----------------------","-------V---o---V----o-","----------------------","XXXXXXXXXXXXXXXXXXXXXX"],"3-b":["----------------------","----------------------","----------------------","----------------------","----------o-----------","----------------------","--------XXXXX---------","--------V---V---------","----------o-----------","----------------------","------XXXXXXXXX-------","----------------------","----------o---------o-","-----X---H-----X------","XXXXXXXXXXXXXXXXXXXXXX"],"4-a":["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------XXX---","-----------------V----","-------X---XX-----V---","------XX------o-V---o-","-----XXX--------------","XXXXXXXX---XXXXXXXXXXX"],"4-b":["--------------------XX","--------------------XX","--------------------XX","--------------------XX","--------------------XX","-----------X-H---o--XX","-----------------o--XX","---------o----------XX","-----------XXXXXXX--XX","--------------------XX","-------X------------XX","------XXX-----------XX","-----XXXXX-----------o","----XXXXXXX-----------","XXXXXXXXXXXXXXXX--XXXX"],"5-a":["--------XXXXXXXXXXXXXX--------","-------------------ooX--------","---------------------X--------","---------------------X--------","------------------XXXX--------","------------------X-----------","-----------o--XXXXX-----------","------------------------------","---------XX-----------------o-","------------------------------","--------------XX---XXX----XXXX","------------------------------","----------XX------------------","------------------------------","XXXXXXXX----------------------"],"5-b":["------------------------------","-o----------------------------","------------------------------","XXX---------------------------","------------------------------","-----XXX----------------------","------------------------------","-----------XXX----------------","-o--------------------------o-","------XXX---------------------","XXX-----------------------XXXX","------------XXX-------XX------","------------------XX----------","------------------------------","XXXXXXXX---XXXXX--------------"],"5-c":["o-----------------------------","------------------------------","X---XX------------------------","------------------------------","------------------------------","XX----------------------------","--------XXXXX-----------------","--------Xoo-------------------","XXX-----Xoo----o------------o-","--------X---------------------","--------XXX---XX----XX----XXXX","XXXX--------------------------","------------------------------","------------------------------","XXXXXXXX----------------------"],"6-a":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","-------oo---XXXXXXXX----------","-o----------XXXXXXXX----------","------XXXX--XXXXXXXX----------","--------------o---------------","XXXX--------------------------","-------------XXXX-----------o-","---------------------XX-------","XXXXXXXX-----------------XXXXX"],"7-a":["-------------------V---------------","-----------------o---o-------------","------------X-H------------H--XXX--","-----V------XXXXXXXXXXXXXXXXXXXXX--","--------XX----o--------------------","-----------------------------------","-----------XXXXXX---Ho-------------","-----------------------------------","-------------V------XX--------H----","-----------------------------------","XX--------o------XXXXX----H--------","-----------------------------------","---X----H----H-X-----------------o-","---XXXXXXXXXXXXX-------------------","XXXX--------------------------XXXXX"],end:["----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----------------------","----oooooooooooooooooo","XXXXXXXXXXXXXXXXXXXXXX"],"6-b":["----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX----------","----------XXXXXXXXXX---o------","----------XXXXXXXXXX----------","-o--------XXXXXXXXXX----------","----------XXXXXXXXXX---X------","----------XXXXXXXXXX----------","XXX-------XXXXXXXXXXX---------","------XX-----oooo-----------o-","------------------------------","XXXX--------XXXXXX---XXX--XXXX"],"1-b":["---------XXX----","----------T-----","----------------","----------------","----------------","----------------","----------------","----X-----X-----","-------oo------C","----------------","-------XX-------","----o-XXXX-o----","-----XXXXXX-----","---XXXXXXXXXX---","XXXXXXXXXXXXXXXX"]};class e{moveRight;moveLeft;jump;constructor(s,f,l){this.moveRight=s,this.moveLeft=f,this.jump=l}}var tf=[new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0)],kl=tf.length;var Os=0.049980000000000004,ns=3,Pe={"1-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"2-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"2-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1)],"3-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1)],"3-b":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1)],"4-a":[new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"4-b":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"5-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1)],"5-b":[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"5-c":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0)],"6-a":[new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1)],"7-a":[new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!1,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1)],end:[new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"6-b":[new e(!1,!0,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!1,!1,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!0),new e(!1,!0,!0),new e(!1,!0,!1),new e(!1,!0,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!1,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)],"1-b":[new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!0),new e(!0,!1,!0),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1),new e(!0,!1,!1)]};class ue{startCol=0;offsetX=0;colsPerScreen=Math.ceil(J/m);update(s){let f=s-this.colsPerScreen/2;this.startCol=Math.max(0,Math.floor(f)),this.offsetX=-f*m+this.startCol*m}columnToScreen(s){return(s-this.startCol)*m+this.offsetX}rowToScreen(s){return s*m}}class ne{game;pos;type;dead=!1;velocity=new o(0,0);gravity=new o(0,100);leftX;rightX;constructor(s,f){this.pos=s,this.type=f}physicsUpdate(s){Ye(this.velocity,F(this.gravity,s)),this.velocity.y=Math.min(this.velocity.y,30),Ye(this.pos,F(this.velocity,s)),this.updateLeftRight()}}class p extends ne{size;constructor(s,f,l){super(s,l);this.size=f,this.leftX=this.pos.x,this.rightX=this.pos.x+f.x}updateLeftRight(){this.leftX=this.pos.x,this.rightX=this.pos.x+this.size.x}collision(s){if(s instanceof p){if(ms(this.pos,this.size,s.pos,s.size))this.handleCollision(s),s.handleCollision(this)}else if(s instanceof we){if(ge(this.pos,this.size,s.pos,s.r))this.handleCollision(s),s.handleCollision(this)}}}class we extends ne{r;constructor(s,f,l){super(s,l);this.r=f,this.leftX=this.pos.x-f,this.rightX=this.pos.x+f}updateLeftRight(){this.leftX=this.pos.x-this.r,this.rightX=this.pos.x+this.r}collision(s){if(s instanceof p){if(ge(s.pos,s.size,this.pos,this.r))this.handleCollision(s),s.handleCollision(this)}}}var T=0,q=1,Be=2,j=3,Ne=4,R=5;class ie extends we{angle;start;constructor(s,f,l,a){super(s,Ps,j);this.gravity.y=0,this.angle=f,this.start=l,this.velocity=a}static defaultConstructor(s){return new ie(s,0,y(s),new o(0,0))}clone(){return new ie(y(this.pos),this.angle,this.start,y(this.velocity))}update(s){this.angle+=s,this.velocity.x=2*Ie*Math.cos(this.angle),this.velocity.y=Ie*Math.sin(this.angle)}handleCollision(s){this.dead=s.type===R}render(s,f){s.fillStyle=$,s.beginPath(),s.arc(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),He,0,Xs),s.fill()}}class oe extends p{constructor(s,f){super(s,Cs,R);this.gravity.y=0,this.velocity=f}static defaultConstructor(s,f){let l=B(f,s);return ps(l),ds(l,Rs),new oe(s,l)}clone(){return new oe(y(this.pos),y(this.velocity))}update(s){}handleCollision(s){this.dead=!0}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),As,Ys)}}class We extends p{playerPos;color;time;state;constructor(s,f=0,l=0){super(s,W,q);this.color=Q,this.gravity.y=0,this.time=f,this.state=l}clone(){return new We(y(this.pos),this.time,this.state)}update(s){switch(this.state){case 0:{if(A(this.pos,this.game.protaganist().pos)<=js)this.color=$,this.state=1;break}case 1:{if(this.time+=s,this.time>=Ws)this.time=0,this.state=2;break}case 2:{this.state=0,this.color=Q;let f=this.game.protaganist().pos,l=Ce(this.pos,f),a=Math.cos(l),t=Math.sin(l);this.game.dynamicEntities.push(oe.defaultConstructor(new o(this.pos.x+(Je+M)*a,this.pos.y+(Je+M)*t),f));break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),a=f.rowToScreen(this.pos.y),t=U/2,r=2*t,u=new o(l+t,a);s.lineWidth=2,s.beginPath(),s.arc(u.x,u.y,t,0,Math.PI),s.stroke();let n=Ce(this.pos,this.game.protaganist().pos),w=Math.cos(n),d=Math.sin(n);s.lineWidth=4,s.beginPath(),s.moveTo(u.x+t*w,u.y+t*d),s.lineTo(u.x+r*w,u.y+r*d),s.stroke(),s.lineWidth=1}}class je extends p{constructor(s){super(s,W,q)}clone(){throw new Error("Block.clone should not have been called!")}update(s){}handleCollision(s){}render(s,f){s.lineWidth=1.3,s.strokeStyle=C,s.strokeRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),U,O)}}var af=1000,rf=2;class he extends p{minY;maxY;yMod;timeGone;constructor(s,f,l,a,t,r){super(s,ze,Ne);this.gravity.y=0,this.yMod=f,this.minY=l,this.maxY=a,this.velocity.y=t,this.timeGone=r}static defaultConstructor(s){return be(s,0.25),new he(s,0.25,s.y+0.15,s.y+0.3,0.25,0)}clone(){return new he(y(this.pos),this.yMod,this.minY,this.maxY,this.velocity.y,this.timeGone)}update(s){if(this.pos.y>100){if(this.timeGone+=s,this.timeGone>=rf)this.pos.y=this.maxY,this.velocity.y=-this.yMod}else if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===T)this.pos.y=af,this.timeGone=0}render(s,f){s.fillStyle=Fs,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),c,L)}}class _ extends p{minY;maxY;yMod;constructor(s,f,l,a,t,r=!1){super(s,ze,Be);this.gravity.y=0,this.yMod=f,this.maxY=l,this.minY=a,this.velocity.y=t,this.dead=r}static defaultConstructor(s){return s.x+=0.25,new _(s,0.1,s.y+0.3,s.y+0.15,0.1)}clone(){return new _(y(this.pos),this.yMod,this.maxY,this.minY,this.velocity.y,this.dead)}update(s){if(this.pos.y>=this.maxY)this.velocity.y=-this.yMod;else if(this.pos.y<=this.minY)this.velocity.y=this.yMod}handleCollision(s){if(s.type===T)gs(),this.dead=!0}render(s,f){s.fillStyle=Q,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),c,L)}}class de extends p{maxColumns;constructor(s,f,l){super(s,ks,j);this.maxColumns=f,this.velocity.x=l,this.gravity.y=0}static defaultConstructor(s,f){return be(s,0.25),new de(s,f,3)}clone(){return new de(y(this.pos),this.maxColumns,this.velocity.x)}update(s){this.velocity.x*=me(this.pos.x>=0&&this.pos.x<=this.maxColumns)}handleCollision(s){if(s.type===q){let f=B(g(this.pos,F(this.size,0.5)),g(s.pos,F(s.size,0.5))),l=g(this.size,s.size);if(F(l,0.5),Math.abs(f.x/this.size.x)>Math.abs(f.y/this.size.y))if(this.velocity.x*=-1,f.x<0)this.pos.x=s.pos.x-this.size.x;else this.pos.x=s.pos.x+s.size.x}else if(s.type===R)this.dead=!0}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),ee,se)}}class xe extends p{time;constructor(s,f,l){super(s,f,j);this.gravity.y=0,this.time=l}static defaultConstructor(s,f){return s.x+=(M-ce)/2,new xe(s,new o(ce,f),0)}clone(){return new xe(this.pos,this.size,this.time)}update(s){$s(),this.time+=s,this.dead=this.time>=Qe}handleCollision(s){}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),Bs,this.size.y*m)}}class Re extends p{color;time=0;state=0;constructor(s,f=0,l=0){super(s,W,q);this.color=Q,this.gravity.y=0,this.state=f,this.time=l}clone(){return new Re(y(this.pos),this.state,this.time)}update(s){if(A(this.pos,this.game.protaganist().pos)>150)this.state=0;switch(this.time+=s,this.state){case 0:{if(this.time>=Qe)this.time=0,this.state=1,this.color=Q;break}case 1:{if(this.time>=Ns){this.time=0,this.state=0,this.color=$;let f=this.game.raycastUp(this.pos),l=f===null?N:this.pos.y-f.pos.y-1;this.game.dynamicEntities.push(xe.defaultConstructor(new o(this.pos.x,this.pos.y-l),l))}break}default:{console.error(`Should not be able to enter state ${this.state}`),this.state=0;break}}}handleCollision(s){}render(s,f){s.strokeStyle=this.color;let l=f.columnToScreen(this.pos.x),a=f.rowToScreen(this.pos.y),t=a+O;s.beginPath(),s.moveTo(l,t),s.lineTo(l+U/2,a),s.lineTo(l+U,t),s.lineTo(l,t),s.stroke(),s.strokeStyle=C,s.beginPath(),s.moveTo(l,a),s.lineTo(l+U,a),s.stroke()}}var Ms=6,uf=0.4;class Ae extends p{movingRight;movingLeft;moveMod;jumpTime;squash;stretch;coinsCollected;maxColumn;agent;constructor(s,f,l,a=!1,t=!1,r=0,u=0,n=1,w=1,d=0,P=0){super(s,Us,T);this.velocity=f,this.agent=l,this.movingRight=a,this.movingLeft=t,this.moveMod=r,this.jumpTime=u,this.squash=n,this.stretch=w,this.coinsCollected=d,this.maxColumn=P}clone(){return new Ae(y(this.pos),y(this.velocity),this.agent,this.movingRight,this.movingLeft,this.moveMod,this.jumpTime,this.squash,this.stretch,this.coinsCollected,this.maxColumn)}update(s){if(this.pos.y>Qs){this.dead=!0;return}if(this.movingLeft=!1,this.movingRight=!1,this.velocity.x=0,this.agent.update(s),this.agent.movingRight)this.movingRight=!0,this.velocity.x=Ms,this.moveMod=4;if(this.agent.movingLeft)if(this.movingRight)this.movingRight=!1,this.velocity.x=0;else this.movingLeft=!0,this.velocity.x=-Ms,this.moveMod=4;if(this.jumpTime<uf&&this.agent.jumping){if(this.jumpTime===0)this.velocity.y=-15;else if(this.jumpTime<0.2)this.velocity.y-=2;this.velocity.y=Math.max(-20,this.velocity.y),this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s),this.jumpTime+=s}else if(this.squash!=this.stretch)this.squash=Math.min(1.03,this.squash+s),this.stretch=Math.max(0.97,this.stretch-s);this.maxColumn=Math.max(this.pos.x,this.maxColumn)}handleCollision(s){switch(s.type){case q:{let f=s,l=B(g(this.pos,F(this.size,0.5)),g(f.pos,F(f.size,0.5))),a=g(this.size,f.size);F(a,0.5);let t=Math.abs(Math.atan(l.y/l.x));if(!(t<0.96&&t>0.698)&&Math.abs(l.x/this.size.x)>Math.abs(l.y/this.size.y))if(l.x<0)this.pos.x=f.pos.x-this.size.x;else this.pos.x=f.pos.x+f.size.x;else if(l.y>0)this.pos.y=f.pos.y+f.size.y;else this.pos.y=f.pos.y-this.size.y,this.velocity.y=0,this.jumpTime=0,this.stretch=1.01,this.squash=0.99;break}case Be:{++this.coinsCollected;break}case R:case j:{this.dead=!0;break}case Ne:{this.jumpTime=0,this.velocity.y=Math.min(this.velocity.y,0);break}default:{console.warn(`Player unhandled collision type: ${s.type}.`);break}}}render(s,f){s.fillStyle=zs;let l=f.columnToScreen(this.pos.x),a=f.rowToScreen(this.pos.y),t=Ge*this.squash,r=Me*this.stretch;if(this.movingRight){let u=new Path2D;u.moveTo(l,a),u.lineTo(l-this.moveMod,a+t),u.lineTo(l+r-this.moveMod,a+t),u.lineTo(l+r,a),u.closePath(),s.fill(u,"evenodd")}else if(this.movingLeft){let u=new Path2D;u.moveTo(l,a),u.lineTo(l+this.moveMod,a+t),u.lineTo(l+r+this.moveMod,a+t),u.lineTo(l+r,a),u.closePath(),s.fill(u,"evenodd")}else s.fillRect(l,a,r,t)}}class pe extends p{constructor(s,f){super(s,Zs,j);this.velocity.y=f,this.gravity.y=0}static defaultConstructor(s){return s.x+=0.25,s.y+=0.1,new pe(s,3)}clone(){return new pe(y(this.pos),this.velocity.y)}update(s){this.velocity.y*=me(this.pos.y>0&&this.pos.y<=N)}handleCollision(s){if(s.type===q){let f=B(g(this.pos,F(this.size,0.5)),g(s.pos,F(s.size,0.5))),l=g(this.size,s.size);if(F(l,0.5),Math.abs(f.x/this.size.x)<Math.abs(f.y/this.size.y))if(this.velocity.y*=-1,f.y>0)this.pos.y=s.pos.y+s.size.y;else this.pos.y=s.pos.y-this.size.y}else if(s.type===R)this.dead=!0}render(s,f){s.fillStyle=$,s.fillRect(f.columnToScreen(this.pos.x),f.rowToScreen(this.pos.y),se,ee)}}class E{staticEntitiesRenderLocations=[];staticEntities;dynamicEntities=[];coins=[];constructor(s,f){if(s===null)return;let l=s.length;if(l!==N){console.error("Level should have 15 rows!");return}this.dynamicEntities.push(new Ae(new o(2,12),new o(0,0),Ss(f,this)));let a=s[0].length,t,r;this.staticEntities=[];for(t=0;t<l;++t){let n=new Array(a);n.fill(!1),this.staticEntities.push(n)}for(t=0;t<l;++t){let n=s[t];if(a!==n.length){console.error(`Every row in the level should have the same number of columns! (${a} != ${n.length}).`);return}for(r=0;r<a;++r){let w=n[r];if(w==="X")this.staticEntities[t][r]=!0,this.staticEntitiesRenderLocations.push(new o(r,t));else if(w==="^")this.dynamicEntities.push(new Re(new o(r,t)));else if(w==="T")this.dynamicEntities.push(new We(new o(r,t)));else if(w==="o"){let d=_.defaultConstructor(new o(r,t));this.dynamicEntities.push(d),this.coins.push(d)}else if(w=="b")this.dynamicEntities.push(he.defaultConstructor(new o(r,t)));else if(w==="H")this.dynamicEntities.push(de.defaultConstructor(new o(r,t),a));else if(w==="V")this.dynamicEntities.push(pe.defaultConstructor(new o(r,t)));else if(w==="C")this.dynamicEntities.push(ie.defaultConstructor(new o(r,t)));else if(w!=="-")console.error(`Unhandled tile type: ${w}`)}}for(let n=0;n<this.dynamicEntities.length;++n)this.dynamicEntities[n].game=this;let u=this.dynamicEntities[0].pos;this.coins.sort((n,w)=>{return A(u,n.pos)-A(u,w.pos)})}clone(){let s=new E(null,ae),f=this.dynamicEntities.length,l=0;for(;l<f;++l){let t=this.dynamicEntities[l];if(t.dead)continue;let r=t.clone();if(r.game=s,s.dynamicEntities.push(r),r instanceof _)s.coins.push(r)}let a=s.dynamicEntities[0].pos;return s.coins.sort((t,r)=>{return A(a,t.pos)-A(a,r.pos)}),s.staticEntities=this.staticEntities,s}hash(){let s=this.dynamicEntities[0].pos;return Math.round(s.x*100)+Math.round(s.y*100)*1e6}update(s,f=1){s=s/f;for(let l=0;l<f;++l){let a=this.dynamicEntities.length;for(let r=0;r<a;++r){let u=this.dynamicEntities[r];u.update(s),u.physicsUpdate(s)}let t=Array.from(this.dynamicEntities.keys()).sort((r,u)=>this.dynamicEntities[r].leftX-this.dynamicEntities[u].leftX);for(let r=0;r<t.length;++r){let u=this.dynamicEntities[t[r]];for(let n=r+1;n<t.length;++n){let w=this.dynamicEntities[t[n]];if(w.leftX>u.rightX)break;u.collision(w)}if(u instanceof p){let n=[u.pos,g(u.pos,new o(W.x,0)),g(u.pos,new o(0,W.y)),g(u.pos,W)];for(let w=0;w<4;++w){let d=bs(n[w]);if(d.y>=0&&d.y<this.staticEntities.length&&d.x>=0&&d.x<=this.staticEntities[0].length&&this.staticEntities[d.y][d.x])u.collision(new je(d))}}}for(let r=0;r<a;++r)if(this.dynamicEntities[r].dead){if(r==0)return;this.dynamicEntities.splice(r,1),--a}}}render(s,f){f.update(this.dynamicEntities[0].pos.x);let l=this.staticEntitiesRenderLocations.length,a=0;s.lineWidth=1.3,s.strokeStyle=C;for(;a<l;++a){let t=this.staticEntitiesRenderLocations[a];s.strokeRect(f.columnToScreen(t.x),f.rowToScreen(t.y),U,O)}l=this.dynamicEntities.length;for(a=0;a<l;++a)this.dynamicEntities[a].render(s,f)}state(){let s=this.dynamicEntities[0];if(s.coinsCollected>=this.coins.length)return Fe;if(s.dead)return $e;return I}protaganist(){return this.dynamicEntities[0]}fitness(){return 1-this.dynamicEntities[0].coinsCollected/this.coins.length}raycastUp(s){let f=y(s);f.y-=1;while(f.y>=0){if(this.staticEntities[f.y][f.x])return new je(f);f.y-=1}return null}}var nf=Os/ns;class ws extends k{ctx;transitionScene;camera;game;actions=[];actionIndex;frame;time;previousKey="";constructor(s,f){super();this.ctx=s,this.transitionScene=f,this.camera=new ue}onEnter(){let s=Se(Pe);while(s==this.previousKey)s=Se(Pe);this.previousKey=s,this.actions=Pe[s],this.game=new E(Ze[s],ae),this.actionIndex=0,this.frame=0,this.time=0}update(s){if(this.game.state()!==I)this.onEnter();if(b.isKeyDown(14))this.transitionScene.targetScene=S,this.changeScene=Z;if(this.time+=s,this.time>=0.0166666){if(this.time=this.time-0.016666,this.frame>=ns)this.frame=0,++this.actionIndex;++this.frame,this.game.protaganist().agent.set(this.actions[this.actionIndex]),this.game.update(nf)}}render(){this.ctx.clearRect(0,0,J,X),this.game.render(this.ctx,this.camera),this.ctx.fillStyle="black",this.ctx.fillRect(240,60,240,47),this.ctx.fillRect(210,234,295,39),this.ctx.fillStyle=Q,this.ctx.font="48px Arial",this.ctx.fillText("Recformer",247,100),this.ctx.font="30px Arial",this.ctx.fillText("Press 'space' to start",220,X*0.55)}_onExit(){}}class is{playerIsOnLastLevel=!1;keys;columnsPerLevel;lossesInARow=0;playerWonLastRound=!1;constructor(){}update(s,f){let l=this.keys.length,a=[];if(s){for(let r=0;r<l;++r)a.push(1);this.lossesInARow=0}else{let r=f;for(let u=0;u<l;++u)if(r>this.columnsPerLevel[u])a[u]=1,r-=this.columnsPerLevel[u];else{a[u]=r/this.columnsPerLevel[u];break}}let t=a.length;for(let r=0;r<t;++r){let u=a[r],n=this.keys[r],w=i.getNode(n);if(u===1){if(!i.hasEdge(V,n))i.addDefaultEdge(V,n,[[n,1],[x,0]])}++w.visitedCount,w.sumPercentCompleted+=u,w.updateReward();let d=w.sumPercentCompleted/w.visitedCount,P=1-d;i.mapEdges((Y)=>{if(Y.tgt===n)Y.probability[0][1]=d,Y.probability[1][1]=P})}if(!s){++this.lossesInARow;for(let r=0;r<this.lossesInARow-1;++r){let u=i.getNode(V).neighbors,n=u.length;if(n===1)break;let w="",d=-1e4;for(let P=0;P<n;++P){let Y=u[P],hs=i.getNode(Y).depth;if(hs>d)w=Y,d=hs}console.log("removing edge:",w,d),i.removeEdge(V,w)}}this.playerWonLastRound=s}get(s){let f=us(i,0.95,!0,!0,20);if(this.columnsPerLevel=[],this.playerWonLastRound)this.keys=[K(f[V])];else this.keys=[V];for(let t=0;t<s;++t){let r=K(f[this.keys[t]]);if(this.keys.push(r),r===fe)break}this.keys.splice(0,1),this.playerIsOnLastLevel=this.keys.includes(fe);let l=Array(N).fill(""),a=this.keys.length;for(let t=0;t<a;++t){let r=Ze[this.keys[t]];this.columnsPerLevel.push(r[0].length);for(let u=0;u<N;++u)l[u]+=r[u]}return l}}class os extends k{ctx;transitionScene;agentType;game;camera;levelDirector;constructor(s,f,l){super();this.ctx=s,this.agentType=l,this.transitionScene=f,this.camera=new ue,this.levelDirector=new is}onEnter(){let s=this.levelDirector.get(Js);this.game=new E(s,this.agentType)}update(s){this.game.update(s);let f=this.game.state();switch(f){case I:break;case $e:{this.transitionScene.targetScene=Ue,this.changeScene=Z;break}case Fe:{if(this.levelDirector.playerIsOnLastLevel)this.transitionScene.targetScene=Xe;else this.transitionScene.targetScene=te;this.changeScene=Z;break}default:{console.error(`Unhandled game state type: ${f}`);break}}}render(){this.ctx.clearRect(0,0,J,X),this.game.render(this.ctx,this.camera)}_onExit(){let s=this.game.fitness();console.log(`Fitness: ${s}`),this.levelDirector.update(this.transitionScene.targetScene===te,s)}}window.addEventListener("load",()=>{vs(()=>{b.init();let s=document.createElement("canvas");s.setAttribute("id","canvas"),s.width=J,s.height=X;let f=s.getContext("2d");document.getElementById("game").appendChild(s);let l=new Oe,a=new Ee(f);l.registerScene(Z,a),l.registerScene(le,new ws(f,a)),l.registerScene(S,new os(f,a,fs)),l.registerScene(Xe,new Le(f)),l.registerScene(te,new De(f,a)),l.registerScene(Ue,new Te(f,a));let t=l.getScene(le);t.onEnter();let r=0,u=(n)=>{let w=Math.min(0.05,(n-r)/1000);r=n,t.update(ye(w,0.01,0.2)),t.render();let d=t.changeScene;if(d!==void 0)t.onExit(),t=l.getScene(d),t.onEnter();window.requestAnimationFrame(u)};window.requestAnimationFrame(u)})});
